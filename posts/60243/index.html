<!DOCTYPE html><html class="hide-aside" lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>é“ä¹‹ä¼Šå§‹ â€”â€” Javaå‡½æ•°å¼ç¼–ç¨‹ | muyoukule</title><meta name="author" content="æœ¨åˆæ¯äº†"><meta name="copyright" content="æœ¨åˆæ¯äº†"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="æœ¬æ–‡ä¸»è¦å¯¹Javaå‡½æ•°å¼ç¼–ç¨‹çš„è¯­æ³•ã€Stream APIã€å®é™…åº”ç”¨ç­‰è¿›è¡Œä»‹ç»ã€‚">
<meta property="og:type" content="article">
<meta property="og:title" content="é“ä¹‹ä¼Šå§‹ â€”â€” Javaå‡½æ•°å¼ç¼–ç¨‹">
<meta property="og:url" content="https://zz.muyoukule.cn/posts/60243/index.html">
<meta property="og:site_name" content="muyoukule">
<meta property="og:description" content="æœ¬æ–‡ä¸»è¦å¯¹Javaå‡½æ•°å¼ç¼–ç¨‹çš„è¯­æ³•ã€Stream APIã€å®é™…åº”ç”¨ç­‰è¿›è¡Œä»‹ç»ã€‚">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://muyoukule-blog-pics.oss-cn-chengdu.aliyuncs.com/Source/CoverIMG/cover13.png">
<meta property="article:published_time" content="2024-04-20T14:42:01.000Z">
<meta property="article:modified_time" content="2024-04-21T02:00:01.000Z">
<meta property="article:author" content="æœ¨åˆæ¯äº†">
<meta property="article:tag" content="Java">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://muyoukule-blog-pics.oss-cn-chengdu.aliyuncs.com/Source/CoverIMG/cover13.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://zz.muyoukule.cn/posts/60243/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"è·ç¦»æœ¬æ–‡ä¸Šæ¬¡æ›´æ–°å·²ç»è¿‡å»","messageNext":"å¤©ï¼Œè¯·æ³¨æ„æ—¶æ•ˆæ€§ã€‚"},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":500},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: {"limitCount":10,"languages":{"author":"ä½œè€…: æœ¨åˆæ¯äº†","link":"é“¾æ¥: ","source":"æ¥æº: muyoukule","info":"è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"ä½ å·²åˆ‡æ¢ä¸ºç¹ä½“ä¸­æ–‡","cht_to_chs":"ä½ å·²åˆ‡æ¢ä¸ºç®€ä½“ä¸­æ–‡","day_to_night":"ä½ å·²åˆ‡æ¢ä¸ºæ·±è‰²æ¨¡å¼","night_to_day":"ä½ å·²åˆ‡æ¢ä¸ºæµ…è‰²æ¨¡å¼","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: 'åŠ è½½æ›´å¤š'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'é“ä¹‹ä¼Šå§‹ â€”â€” Javaå‡½æ•°å¼ç¼–ç¨‹',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-04-21 10:00:01'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const now = new Date()
          const hour = now.getHours()
          const isNight = hour <= 6 || hour >= 22
          if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
          else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="https://fastly.jsdelivr.net/gh/muyoukule/blog-static-resource/css/custom.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://cdn1.tianli0.top/npm/element-ui@2.15.6/packages/theme-chalk/lib/index.css"><div id="myscoll"></div><!-- hexo injector head_end start --><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/animate.min.css" media="print" onload="this.media='screen'"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.1.1"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">49</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">24</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">10</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-book"></i><span> æ–‡ç« </span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> å½’æ¡£</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> å‹é“¾</span></a></div><div class="menus_item"><a class="site-page" href="/essay/"><i class="fa-fw fas fa-comment-dots"></i><span> å“”å“”</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-heart"></i><span> å…³äº</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-home-lg"></i><span> å…³äºæœ¬ç«™</span></a></li><li><a class="site-page child" href="/me/"><i class="fa-fw fas fa-address-card"></i><span> å…³äºæˆ‘</span></a></li><li><a class="site-page child" href="/crazy/"><i class="fa-fw fas fa-heart"></i><span> æµ‹è¯•</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://muyoukule-blog-pics.oss-cn-chengdu.aliyuncs.com/Source/CoverIMG/cover13.png')"><nav id="nav"><span id="blog-info"><a href="/" title="muyoukule"><span class="site-name">muyoukule</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-book"></i><span> æ–‡ç« </span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> å½’æ¡£</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> å‹é“¾</span></a></div><div class="menus_item"><a class="site-page" href="/essay/"><i class="fa-fw fas fa-comment-dots"></i><span> å“”å“”</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-heart"></i><span> å…³äº</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-home-lg"></i><span> å…³äºæœ¬ç«™</span></a></li><li><a class="site-page child" href="/me/"><i class="fa-fw fas fa-address-card"></i><span> å…³äºæˆ‘</span></a></li><li><a class="site-page child" href="/crazy/"><i class="fa-fw fas fa-heart"></i><span> æµ‹è¯•</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">é“ä¹‹ä¼Šå§‹ â€”â€” Javaå‡½æ•°å¼ç¼–ç¨‹</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2024-04-20T14:42:01.000Z" title="å‘è¡¨äº 2024-04-20 22:42:01">2024-04-20</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2024-04-21T02:00:01.000Z" title="æ›´æ–°äº 2024-04-21 10:00:01">2024-04-21</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Java/">Java</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">å­—æ•°æ€»è®¡:</span><span class="word-count">1.7w</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>74åˆ†é’Ÿ</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="é“ä¹‹ä¼Šå§‹ â€”â€” Javaå‡½æ•°å¼ç¼–ç¨‹"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="0-å‰è¨€"><a href="#0-å‰è¨€" class="headerlink" title="0. å‰è¨€"></a>0. å‰è¨€</h1><p>ä»Šå¹´å¹´åˆ Java æ¨å‡ºäº†22ç‰ˆæœ¬ï¼Œä½†æ˜¯å…³æˆ‘å•¥äº‹å•Šï¼Ÿæˆ‘å½“ç„¶è¿˜æ˜¯çˆ±ç”¨ Java 8 å’¯ã€‚é‚£ä¸ºä»€ä¹ˆæˆ‘ä¼šå¦‚æ­¤å–œçˆ± Java 8è¿™ä¸ªç‰ˆæœ¬å‘¢ï¼Ÿé‚£è¿˜å¾—ä» Java å†ä»£çš„é‡è¦ç‰ˆæœ¬è¯´èµ·ï¼š</p>
<p><img src="https://muyoukule-blog-pics.oss-cn-chengdu.aliyuncs.com/JavaIMG/Java%E5%8E%86%E4%BB%A3%E9%87%8D%E8%A6%81%E7%89%88%E6%9C%AC.png" alt="Javaå†ä»£é‡è¦ç‰ˆæœ¬"></p>
<p>å¯ä»¥çœ‹å‡ºå„ä¸ªç‰ˆæœ¬çš„æ‹›ç‰ŒåŠŸèƒ½ï¼š</p>
<ul>
<li><p>Java 5ï¼šæ³›å‹ã€æšä¸¾ã€æ³¨è§£ã€è‡ªåŠ¨æ‹†è£…ç®±</p>
</li>
<li><p>Java 8ï¼š<font color="red"><strong>å‡½æ•°å¼ç¼–ç¨‹ã€Stream APIã€‚</strong></font>ğŸ’ªJava 8 YYDSğŸ’ª</p>
</li>
<li><p>Java 11ã€Java 17ã€Java 21ï¼šä»…ä»…æ˜¯LTSï¼ˆé•¿æœŸæ”¯æŒç‰ˆæœ¬ï¼‰ï¼Œå¥½åƒè¯´ä¸å‡ºå•¥ç‰¹è‰²åŠŸèƒ½ğŸ˜‚</p>
</li>
</ul>
<p>é‚£å‡½æ•°å¼ç¼–ç¨‹æœ‰ä»€ä¹ˆä¼˜ç‚¹å‘¢ï¼Ÿ</p>
<p>å½“ç„¶æ˜¯ä»£ç ç®€æ´ã€åŠŸèƒ½å¼ºå¤§ã€å¹¶è¡Œå¤„ç†ã€é“¾å¼è°ƒç”¨ã€å»¶æ—¶æ‰§è¡Œå’¯ã€‚æ€»ä¹‹å°±ä¿©å­— â€”â€” â€œä¼˜é›…â€ã€‚</p>
<h1 id="1-é“ä¹‹ä¼Šå§‹"><a href="#1-é“ä¹‹ä¼Šå§‹" class="headerlink" title="1. é“ä¹‹ä¼Šå§‹"></a>1. é“ä¹‹ä¼Šå§‹</h1><center>å®‡å®™åˆå¼€ä¹‹é™…ï¼Œæ··æ²Œä¹‹æ°”ç¬¼ç½©ç€æ•´ä¸ªå®‡å®™ï¼Œä¸€åˆ‡æ¨¡ç³Šä¸æ¸…ã€‚</center>

<center>ç„¶åï¼Œç›˜å¤å¼€å¤©ï¼Œå¥³å¨²é€ äººã€‚</center>

<center>æ—¥æœˆä¹ƒå‡ºã€æ˜Ÿè¾°ä¹ƒç°ã€‚</center>

<center>å±±å·èœ¿èœ’ã€æ±Ÿæ²³å¥”æµã€‚</center>

<center>ç”Ÿçµä¸‡ç‰©ï¼Œæ¬£æ¬£å‘è£ã€‚</center>

<center>æ­¤æ—¥æœˆã€æ˜Ÿè¾°ã€å±±å·ã€æ±Ÿæ²³ã€ç”Ÿçµä¸‡ç‰©ï¼Œ</center>

<center>è°“ä¹‹ã€å¯¹è±¡ã€‘ï¼Œçš†éšæ—¶é—´è€ŒåŒ–ã€‚</center>

<center>ç„¶è€Œï¼šæ—¥æœˆä¹‹è¡Œã€æ˜Ÿæ±‰ç¿çƒ‚ï¼Œ</center>

<center>å±±å·èµ·ä¼ã€æ¹–æµ·æ±‡èšï¼Œ</center>

<center>å†¥å†¥ä¸­æœ‰è‡³ç†è—å…¶ä¸­ã€‚</center>

<center>åæ›°ã€é“ã€‘ï¼Œä¹ƒä¸‡ç‰©éµå¾ªä¹‹è§„å¾‹ï¼Œäº¦è°“ä¹‹ã€å‡½æ•°ã€‘ã€‚</center>

<center>å®ƒæ— é—®ä¸œè¥¿ï¼Œäº˜å¤ä¸å˜ã€‚</center>

<p>ä½œä¸º<strong>è®¾è®¡å®‡å®™æ´ªè’</strong>çš„ç¨‹åºå‘˜</p>
<ul>
<li>é€ æ—¥æœˆã€ç­‘å±±å·ã€åˆ’æ±Ÿæ²³ã€å¼€æ¹–æµ·ã€æ¼”åŒ–ç”Ÿçµä¸‡ç‰©ã€ä»¤å…¶ç”Ÿç”Ÿä¸æ¯ï¼Œåˆ™å¿…ç”¨é¢å‘ã€å¯¹è±¡ã€‘ä¹‹æ‰‹æ®µ</li>
<li>è‹¥å®šè§„åˆ™ã€æ±‚æœ¬æºã€è¿½çº¯ç²¹ï¼Œè®ºä¸å˜ï¼Œåˆ™å½“é€‰ã€å‡½æ•°ã€‘ç¼–ç¨‹ä¹‹æ€æƒ³</li>
</ul>
<p>ä¸‹é¢å°±è®©æˆ‘ä»¬ä»ã€å‡½æ•°ã€‘å¼€å§‹ã€‚</p>
<h2 id="1-1-ä»€ä¹ˆæ˜¯å‡½æ•°"><a href="#1-1-ä»€ä¹ˆæ˜¯å‡½æ•°" class="headerlink" title="1.1 ä»€ä¹ˆæ˜¯å‡½æ•°"></a>1.1 ä»€ä¹ˆæ˜¯å‡½æ•°</h2><p>ä»€ä¹ˆæ˜¯å‡½æ•°å‘¢ï¼Ÿå‡½æ•°å³è§„åˆ™ï¼Œå‡½æ•° &#x3D;&#x3D; é“</p>
<p>æ•°å­¦ä¸Šï¼š</p>
<img src="https://muyoukule-blog-pics.oss-cn-chengdu.aliyuncs.com/JavaIMG/%E6%95%B0%E5%AD%A6%E4%B8%8A%E7%9A%84%E5%87%BD%E6%95%B0.png" alt="æ•°å­¦ä¸Šçš„å‡½æ•°" style="zoom: 67%;">



<p>ä¾‹å¦‚ï¼š</p>
<table>
<thead>
<tr>
<th align="center">INPUT</th>
<th align="center">f(x)</th>
<th align="center">OUTPUT</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center">?</td>
<td align="center">1</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">?</td>
<td align="center">4</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">?</td>
<td align="center">9</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">?</td>
<td align="center">16</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center">?</td>
<td align="center">25</td>
</tr>
<tr>
<td align="center">â€¦</td>
<td align="center">â€¦</td>
<td align="center">â€¦</td>
</tr>
</tbody></table>
<ul>
<li>f(x) &#x3D; x^2 æ˜¯ä¸€ç§è§„å¾‹ï¼Œ input æŒ‰ç…§æ­¤è§„å¾‹å˜åŒ–ä¸º output</li>
<li>å¾ˆå¤šè§„å¾‹å·²ç»ç”±äººæ­ç¤ºï¼Œä¾‹å¦‚ e &#x3D; m * c^2</li>
<li>ç¨‹åºè®¾è®¡ä¸­<strong>æ›´</strong>å¯ä»¥è‡ªå·±å»åˆ¶å®šè§„å¾‹ï¼Œä¸€æ—¦æˆä¸ºè§„åˆ™çš„åˆ¶å®šè€…ï¼Œä½ å°±æ˜¯ç¥</li>
</ul>
<h2 id="1-2-å¤§é“æ— æƒ…"><a href="#1-2-å¤§é“æ— æƒ…" class="headerlink" title="1.2 å¤§é“æ— æƒ…"></a>1.2 å¤§é“æ— æƒ…</h2><p>æ€æ ·æ‰èƒ½æˆä¸ºä¸€ä¸ªåˆæ ¼çš„å‡½æ•°ï¼Ÿä¸Šé¢æè¿‡å‡½æ•°å³è§„åˆ™ï¼Œå‡½æ•° &#x3D;&#x3D; é“ã€‚é‚£å°±è¦å…ˆæ€è€ƒé‚£æ€æ ·æ‰èƒ½æˆé“å‘¢ï¼Ÿ</p>
<p>æˆé“éœ€è¦ä¸€ä¸ªå…ˆå†³æ¡ä»¶ï¼š<strong>æˆåˆ°è¦æ— æƒ…</strong></p>
<h3 id="1-2-1-æ— æƒ…"><a href="#1-2-1-æ— æƒ…" class="headerlink" title="1.2.1 æ— æƒ…"></a>1.2.1 æ— æƒ…</h3><p>ä½•ä¸ºæ— æƒ…ï¼Ÿåªè¦è¾“å…¥ç›¸åŒï¼Œæ— è®ºå¤šå°‘æ¬¡è°ƒç”¨ï¼Œæ— è®ºä»€ä¹ˆæ—¶é—´è°ƒç”¨ï¼Œè¾“å‡ºç›¸åŒã€‚</p>
<h3 id="1-2-2-ä½›ç¥–æˆé“"><a href="#1-2-2-ä½›ç¥–æˆé“" class="headerlink" title="1.2.2 ä½›ç¥–æˆé“"></a>1.2.2 ä½›ç¥–æˆé“</h3><p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestMutable</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(pray(<span class="string">&quot;å¼ ä¸‰&quot;</span>));</span><br><span class="line">        System.out.println(pray(<span class="string">&quot;å¼ ä¸‰&quot;</span>));</span><br><span class="line">        System.out.println(pray(<span class="string">&quot;å¼ ä¸‰&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Buddha</span> &#123;</span><br><span class="line">        String name;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Buddha</span><span class="params">(String name)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.name = name;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="type">Buddha</span> <span class="variable">buddha</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Buddha</span>(<span class="string">&quot;ä½›ç¥–&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> String <span class="title function_">pray</span><span class="params">(String person)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (person + <span class="string">&quot;å‘[&quot;</span> + buddha.name + <span class="string">&quot;]è™”è¯šç¥ˆç¥·&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸Š pray çš„æ‰§è¡Œç»“æœï¼Œé™¤äº†å‚æ•°å˜åŒ–å¤–ï¼Œå¸Œæœ›å‡½æ•°çš„æ‰§è¡Œè§„åˆ™æ°¸è¿œä¸å˜</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">å¼ ä¸‰å‘[ä½›ç¥–]è™”è¯šç¥ˆç¥·</span><br><span class="line">å¼ ä¸‰å‘[ä½›ç¥–]è™”è¯šç¥ˆç¥·</span><br><span class="line">å¼ ä¸‰å‘[ä½›ç¥–]è™”è¯šç¥ˆç¥·</span><br></pre></td></tr></table></figure>

<p>ç„¶è€Œï¼Œç”±äºè®¾è®¡ä¸Šçš„ç¼ºé™·ï¼Œå‡½æ•°å¼•ç”¨äº†å¤–ç•Œå¯å˜çš„æ•°æ®ï¼Œå¦‚æœè¿™ä¹ˆä½¿ç”¨ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">buddha.name = <span class="string">&quot;é­”ç‹&quot;</span>;</span><br><span class="line">System.out.println(pray(<span class="string">&quot;å¼ ä¸‰&quot;</span>));</span><br></pre></td></tr></table></figure>

<p>ç»“æœå°±ä¼šæ˜¯ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å¼ ä¸‰å‘[é­”ç‹]è™”è¯šç¥ˆç¥·</span><br></pre></td></tr></table></figure>

<p>é—®é¢˜å‡ºåœ¨å“ªå„¿å‘¢ï¼Ÿå‡½æ•°çš„ç›®çš„æ˜¯é™¤äº†å‚æ•°èƒ½å˜åŒ–ï¼Œå…¶å®ƒéƒ¨åˆ†éƒ½è¦ä¸å˜ï¼Œè¿™æ ·æ‰èƒ½æˆä¸ºè§„åˆ™çš„ä¸€éƒ¨åˆ†ã€‚ä½›ç¥–è¦æˆä¸ºè§„åˆ™çš„ä¸€éƒ¨åˆ†ï¼Œä¹Ÿè¦ä¿æŒä¸å˜ã€‚</p>
<p>æ”¹æ­£æ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Buddha</span> &#123;</span><br><span class="line">    <span class="keyword">final</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Buddha</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æˆ–ï¼ˆJDK 16ä»¥ä¸Šç‰ˆæœ¬ï¼‰</span></span><br><span class="line"><span class="keyword">record</span> <span class="title class_">Buddha</span><span class="params">(String name)</span> &#123; &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>ä¸æ˜¯è¯´å‡½æ•°ä¸èƒ½å¼•ç”¨å¤–ç•Œçš„æ•°æ®ï¼Œè€Œæ˜¯å®ƒå¼•ç”¨çš„æ•°æ®å¿…é¡»ä¹Ÿèƒ½ä½œä¸ºè§„åˆ™çš„ä¸€éƒ¨åˆ†</li>
<li>è®©ä½›ç¥–ä¸å˜ï¼Œä½›ç¥–æ‰èƒ½æˆä¸ºè§„åˆ™</li>
</ul>
<h3 id="1-2-3-å‡½æ•°ä¸æ–¹æ³•"><a href="#1-2-3-å‡½æ•°ä¸æ–¹æ³•" class="headerlink" title="1.2.3 å‡½æ•°ä¸æ–¹æ³•"></a>1.2.3 å‡½æ•°ä¸æ–¹æ³•</h3><p>æ–¹æ³•æœ¬è´¨ä¸Šä¹Ÿæ˜¯å‡½æ•°ã€‚ä¸è¿‡æ–¹æ³•ç»‘å®šåœ¨å¯¹è±¡ä¹‹ä¸Šï¼Œå®ƒæ˜¯å¯¹è±¡ä¸ªäººæ³•åˆ™ã€‚</p>
<ul>
<li><p>å‡½æ•°æ˜¯ï¼šå‡½æ•°ï¼ˆå¯¹è±¡æ•°æ®ï¼Œå…¶å®ƒå‚æ•°ï¼‰</p>
</li>
<li><p>æ–¹æ³•æ˜¯ï¼šå¯¹è±¡æ•°æ®.æ–¹æ³•ï¼ˆå…¶å®ƒå‚æ•°ï¼‰</p>
</li>
</ul>
<h3 id="1-2-4-ä¸å˜çš„å¥½å¤„"><a href="#1-2-4-ä¸å˜çš„å¥½å¤„" class="headerlink" title="1.2.4 ä¸å˜çš„å¥½å¤„"></a>1.2.4 ä¸å˜çš„å¥½å¤„</h3><p>åªæœ‰ä¸å˜ï¼Œæ‰èƒ½åœ¨æ»šæ»šæ—¶é—´æ´ªæµä¸­å±¹ç«‹ä¸å€’ï¼Œæˆä¸ºè§„åˆ™çš„ä¸€éƒ¨åˆ†ã€‚</p>
<p>å¤šçº¿ç¨‹ç¼–ç¨‹ä¸­ï¼Œä¸å˜æ„å‘³ç€çº¿ç¨‹å®‰å…¨ã€‚</p>
<h3 id="1-2-5-åˆæ ¼çš„å‡½æ•°æ— çŠ¶æ€"><a href="#1-2-5-åˆæ ¼çš„å‡½æ•°æ— çŠ¶æ€" class="headerlink" title="1.2.5 åˆæ ¼çš„å‡½æ•°æ— çŠ¶æ€"></a>1.2.5 åˆæ ¼çš„å‡½æ•°æ— çŠ¶æ€</h3><h2 id="1-3-å¤§é“æ— å½¢"><a href="#1-3-å¤§é“æ— å½¢" class="headerlink" title="1.3 å¤§é“æ— å½¢"></a>1.3 å¤§é“æ— å½¢</h2><h3 id="1-3-1-å‡½æ•°åŒ–å¯¹è±¡"><a href="#1-3-1-å‡½æ•°åŒ–å¯¹è±¡" class="headerlink" title="1.3.1 å‡½æ•°åŒ–å¯¹è±¡"></a>1.3.1 å‡½æ•°åŒ–å¯¹è±¡</h3><p>å‡½æ•°æœ¬æ— å½¢ï¼Œä¹Ÿå°±æ˜¯å®ƒä»£è¡¨çš„è§„åˆ™ï¼šä½ç½®å›ºå®šã€ä¸èƒ½ä¼ æ’­ã€‚</p>
<p>è‹¥è¦æœ‰å½¢ï¼Œè®©å‡½æ•°çš„è§„åˆ™èƒ½å¤Ÿä¼ æ’­ï¼Œéœ€è¦å°†å‡½æ•°åŒ–ä¸ºå¯¹è±¡ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> a + b;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<p>ä¸</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Lambda</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="title function_">calculate</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">Lambda</span> <span class="variable">add</span> <span class="operator">=</span> (a, b) -&gt; a + b; <span class="comment">// å®ƒå·²ç»å˜æˆäº†ä¸€ä¸ª Lambda å¯¹è±¡</span></span><br></pre></td></tr></table></figure>

<p>åŒºåˆ«åœ¨å“ªï¼Ÿ</p>
<ul>
<li>å‰è€…æ˜¯çº¯ç²¹çš„ä¸€æ¡ä¸¤æ•°åŠ æ³•è§„åˆ™ï¼Œå®ƒçš„ä½ç½®æ˜¯å›ºå®šçš„ï¼Œè¦ä½¿ç”¨å®ƒï¼Œéœ€è¦é€šè¿‡ MyClass.add æ‰¾åˆ°å®ƒï¼Œç„¶åæ‰§è¡Œ</li>
<li>è€Œåè€…ï¼ˆadd å¯¹è±¡ï¼‰å°±åƒé•¿äº†è…¿ï¼Œå®ƒçš„ä½ç½®æ˜¯å¯ä»¥å˜åŒ–çš„ï¼Œæƒ³å»å“ªé‡Œå°±å»å“ªé‡Œï¼Œå“ªé‡Œè¦ç”¨åˆ°è¿™æ¡åŠ æ³•è§„åˆ™ï¼ŒæŠŠå®ƒä¼ é€’è¿‡å»<font color="red"><strong>ï¼ˆå¯¹è±¡å¯ä»¥ä¼ åˆ°ä»»æ„åœ°æ–¹å»ï¼Œå‡½æ•°ä¸è¡Œï¼‰</strong></font></li>
<li>æ¥å£çš„ç›®çš„æ˜¯ä¸ºäº†å°†æ¥ç”¨å®ƒæ¥æ‰§è¡Œå‡½æ•°å¯¹è±¡ï¼Œæ­¤æ¥å£ä¸­åªèƒ½æœ‰ä¸€ä¸ªæ–¹æ³•å®šä¹‰</li>
</ul>
<p>å‡½æ•°åŒ–ä¸ºå¯¹è±¡åšä¸ªæ¯”å–»ï¼š</p>
<ul>
<li>ä¹‹å‰æ˜¯å¤§å®¶è¦ç»Ÿä¸€å»è¥¿å¤©å–ç»</li>
<li>ç°åœ¨æ˜¯æ¯ä¸ªè©è¨ã€ç½—æ±‰æ‹¿ç€ç»ä¹¦ï¼Œå…¥ä¸–ä¼ ç»</li>
</ul>
<p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line">    <span class="keyword">interface</span> <span class="title class_">Lambda</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="title function_">calculate</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Server</span> &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">            <span class="type">ServerSocket</span> <span class="variable">ss</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServerSocket</span>(<span class="number">8080</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;server start...&quot;</span>);</span><br><span class="line">            <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">                <span class="type">Socket</span> <span class="variable">s</span> <span class="operator">=</span> ss.accept();</span><br><span class="line">                Thread.ofVirtual().start(() -&gt; &#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        <span class="type">ObjectInputStream</span> <span class="variable">is</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectInputStream</span>(s.getInputStream());</span><br><span class="line">                        <span class="type">Lambda</span> <span class="variable">lambda</span> <span class="operator">=</span> (Lambda) is.readObject();</span><br><span class="line">                        <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> ThreadLocalRandom.current().nextInt(<span class="number">10</span>);</span><br><span class="line">                        <span class="type">int</span> <span class="variable">b</span> <span class="operator">=</span> ThreadLocalRandom.current().nextInt(<span class="number">10</span>);</span><br><span class="line">                        System.out.printf(<span class="string">&quot;%s %d op %d = %d%n&quot;</span>,</span><br><span class="line">                   s.getRemoteSocketAddress().toString(), a, b, lambda.calculate(a, b));</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (IOException | ClassNotFoundException e) &#123;</span><br><span class="line">                        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Client1</span> &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">            <span class="keyword">try</span>(<span class="type">Socket</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Socket</span>(<span class="string">&quot;127.0.0.1&quot;</span>, <span class="number">8080</span>))&#123;</span><br><span class="line">                <span class="type">Lambda</span> <span class="variable">lambda</span> <span class="operator">=</span> (Lambda &amp; Serializable) (a, b) -&gt; a + b;</span><br><span class="line">                <span class="type">ObjectOutputStream</span> <span class="variable">os</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectOutputStream</span>(s.getOutputStream());</span><br><span class="line">                os.writeObject(lambda);</span><br><span class="line">                os.flush();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Client2</span> &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">            <span class="keyword">try</span>(<span class="type">Socket</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Socket</span>(<span class="string">&quot;127.0.0.1&quot;</span>, <span class="number">8080</span>))&#123;</span><br><span class="line">                <span class="type">Lambda</span> <span class="variable">lambda</span> <span class="operator">=</span> (Lambda &amp; Serializable) (a, b) -&gt; a - b;</span><br><span class="line">                <span class="type">ObjectOutputStream</span> <span class="variable">os</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectOutputStream</span>(s.getOutputStream());</span><br><span class="line">                os.writeObject(lambda);</span><br><span class="line">                os.flush();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Client3</span> &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">            <span class="keyword">try</span>(<span class="type">Socket</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Socket</span>(<span class="string">&quot;127.0.0.1&quot;</span>, <span class="number">8080</span>))&#123;</span><br><span class="line">                <span class="type">Lambda</span> <span class="variable">lambda</span> <span class="operator">=</span> (Lambda &amp; Serializable) (a, b) -&gt; a * b;</span><br><span class="line">                <span class="type">ObjectOutputStream</span> <span class="variable">os</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectOutputStream</span>(s.getOutputStream());</span><br><span class="line">                os.writeObject(lambda);</span><br><span class="line">                os.flush();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢çš„ä¾‹å­åšäº†ä¸€äº›ç®€å•çš„æ‰©å±•ï¼Œå¯ä»¥çœ‹åˆ°ä¸åŒçš„å®¢æˆ·ç«¯å¯ä»¥ä¸Šä¼ è‡ªå·±çš„è®¡ç®—è§„åˆ™ã€‚</p>
<p><strong>PSï¼š</strong></p>
<ul>
<li>å¤§éƒ¨åˆ†æ–‡çŒ®éƒ½è¯´ Lambda æ˜¯åŒ¿åå‡½æ•°ï¼Œä½†<strong>æ»¡è€å¸ˆ</strong>è§‰å¾—éœ€è¦åœ¨è¿™ä¸ªè¯´æ³•ä¸Šè¿›è¡Œè¡¥å……</li>
<li>è‡³å°‘åœ¨ java é‡Œï¼Œè™½ç„¶ Lambda è¡¨è¾¾å¼æœ¬èº«ä¸éœ€è¦èµ·åå­—ï¼Œä½†ä¸å¾—æä¾›ä¸€ä¸ªå¯¹åº”æ¥å£å˜›</li>
</ul>
<h3 id="1-3-2-è¡Œä¸ºå‚æ•°åŒ–"><a href="#1-3-2-è¡Œä¸ºå‚æ•°åŒ–" class="headerlink" title="1.3.2 è¡Œä¸ºå‚æ•°åŒ–"></a>1.3.2 è¡Œä¸ºå‚æ•°åŒ–</h3><p>å·²çŸ¥å­¦ç”Ÿç±»å®šä¹‰å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> String sex;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name, <span class="type">int</span> age, String sex)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">        <span class="built_in">this</span>.sex = sex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getSex</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> sex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Student&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">                <span class="string">&quot;, sex=&#x27;&quot;</span> + sex + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é’ˆå¯¹ä¸€ç»„å­¦ç”Ÿé›†åˆï¼Œç­›é€‰å‡ºç”·å­¦ç”Ÿï¼Œä¸‹é¢çš„ä»£ç å®ç°å¦‚ä½•ï¼Œè¯„ä»·ä¸€ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    List&lt;Student&gt; students = List.of(</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;å¼ æ— å¿Œ&quot;</span>, <span class="number">18</span>, <span class="string">&quot;ç”·&quot;</span>),</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;æ¨ä¸æ‚”&quot;</span>, <span class="number">16</span>, <span class="string">&quot;å¥³&quot;</span>),</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;å‘¨èŠ·è‹¥&quot;</span>, <span class="number">19</span>, <span class="string">&quot;å¥³&quot;</span>),</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;å®‹é’ä¹¦&quot;</span>, <span class="number">20</span>, <span class="string">&quot;ç”·&quot;</span>)</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    System.out.println(filter(students)); <span class="comment">// èƒ½å¾—åˆ° å¼ æ— å¿Œï¼Œå®‹é’ä¹¦</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> List&lt;Student&gt; <span class="title function_">filter</span><span class="params">(List&lt;Student&gt; students)</span> &#123;</span><br><span class="line">    List&lt;Student&gt; result = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (Student student : students) &#123;</span><br><span class="line">        <span class="keyword">if</span> (student.sex.equals(<span class="string">&quot;ç”·&quot;</span>)) &#123;</span><br><span class="line">            result.add(student);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœéœ€æ±‚å†å˜åŠ¨ä¸€ä¸‹ï¼Œè¦æ±‚æ‰¾åˆ° 18 å²ä»¥ä¸‹çš„å­¦ç”Ÿï¼Œä¸Šé¢ä»£ç æ˜¾ç„¶ä¸èƒ½ç”¨äº†ï¼Œæ”¹åŠ¨æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> List&lt;Student&gt; <span class="title function_">filter</span><span class="params">(List&lt;Student&gt; students)</span> &#123;</span><br><span class="line">    List&lt;Student&gt; result = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (Student student : students) &#123;</span><br><span class="line">        <span class="keyword">if</span> (student.age &lt;= <span class="number">18</span>) &#123;</span><br><span class="line">            result.add(student);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">System.out.println(filter(students)); <span class="comment">// èƒ½å¾—åˆ° å¼ æ— å¿Œï¼Œæ¨ä¸æ‚”</span></span><br></pre></td></tr></table></figure>

<p>é‚£ä¹ˆéœ€æ±‚å¦‚æœå†è¦å˜åŠ¨ï¼Œæ‰¾18å²ä»¥ä¸‹ç”·å­¦ç”Ÿï¼Œæ€ä¹ˆæ”¹ï¼Ÿæ˜¾ç„¶ä¸Šè¿°åšæ³•å¹¶ä¸å¤ªå¥½â€¦ æ›´å¸Œæœ›ä¸€ä¸ªæ–¹æ³•èƒ½å¤„ç†å„ç§æƒ…å†µï¼Œä»”ç»†è§‚å¯Ÿä»¥ä¸Šä¸¤ä¸ªæ–¹æ³•ï¼Œæ‰¾ä¸åŒã€‚</p>
<p>ä¸åŒåœ¨äºç­›é€‰æ¡ä»¶éƒ¨åˆ†ï¼š<code>student.sex.equals(&quot;ç”·&quot;)</code> å’Œ <code>student.age &lt;= 18</code></p>
<p>æ—¢ç„¶å®ƒä»¬å°±æ˜¯ä¸åŒï¼Œé‚£ä¹ˆèƒ½å¦æŠŠå®ƒä½œä¸ºå‚æ•°ä¼ é€’è¿›æ¥ï¼Œè¿™æ ·å¤„ç†èµ·æ¥ä¸å°±ä¸€è‡´äº†å—ï¼Ÿ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> List&lt;Student&gt; <span class="title function_">filter</span><span class="params">(List&lt;Student&gt; students, ???)</span> &#123;</span><br><span class="line">    List&lt;Student&gt; result = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (Student student : students) &#123;</span><br><span class="line">        <span class="keyword">if</span> (???) &#123;</span><br><span class="line">            result.add(student);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å®ƒä¿©è¦åˆ¤æ–­çš„é€»è¾‘ä¸åŒï¼Œé‚£è¿™ä¸¤å¤„ä¸åŒçš„é€»è¾‘å¿…ç„¶è¦ç”¨å‡½æ•°æ¥è¡¨ç¤ºï¼Œå°†æ¥è¿™ä¸¤ä¸ªå‡½æ•°éƒ½éœ€è¦ç”¨åˆ° student å¯¹è±¡æ¥åˆ¤æ–­ï¼Œéƒ½åº”è¯¥è¿”å›ä¸€ä¸ª boolean ç»“æœï¼Œæ€ä¹ˆæè¿°å‡½æ•°çš„é•¿ç›¸å‘¢ï¼Ÿ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Lambda</span> &#123;</span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">test</span><span class="params">(Student student)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ–¹æ³•å¯ä»¥ç»Ÿä¸€æˆä¸‹è¿°ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> List&lt;Student&gt; <span class="title function_">filter</span><span class="params">(List&lt;Student&gt; students, Lambda lambda)</span> &#123;</span><br><span class="line">    List&lt;Student&gt; result = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (Student student : students) &#123;</span><br><span class="line">        <span class="keyword">if</span> (lambda.test(student)) &#123;</span><br><span class="line">            result.add(student);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¥½ï¼Œæœ€åæ€ä¹ˆç»™å®ƒä¼ é€’ä¸åŒå®ç°å‘¢ï¼Ÿ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">filter(students, student -&gt; student.sex.equals(<span class="string">&quot;ç”·&quot;</span>));</span><br></pre></td></tr></table></figure>

<p>ä»¥åŠ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">filter(students, student -&gt; student.age &lt;= <span class="number">18</span>);</span><br></pre></td></tr></table></figure>

<p>è¿˜æœ‰æ–°éœ€æ±‚ä¹Ÿèƒ½æ»¡è¶³</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">filter(students, student -&gt; student.sex.equals(<span class="string">&quot;ç”·&quot;</span>) &amp;&amp; student.age &lt;= <span class="number">18</span>);</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·å°±å®ç°äº†ä»¥ä¸å˜åº”ä¸‡å˜ï¼Œè€Œå˜æ¢å³æ˜¯ä¸€ä¸ªä¸ªå‡½æ•°å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥ç§°ä¹‹ä¸ºè¡Œä¸ºå‚æ•°åŒ–</p>
<h3 id="1-3-3-å»¶è¿Ÿæ‰§è¡Œ"><a href="#1-3-3-å»¶è¿Ÿæ‰§è¡Œ" class="headerlink" title="1.3.3 å»¶è¿Ÿæ‰§è¡Œ"></a>1.3.3 å»¶è¿Ÿæ‰§è¡Œ</h3><p>åœ¨è®°å½•æ—¥å¿—æ—¶ï¼Œå‡è®¾æ—¥å¿—çº§åˆ«æ˜¯ INFOï¼Œdebug æ–¹æ³•ä¼šé‡åˆ°ä¸‹é¢çš„é—®é¢˜ï¼š</p>
<p>æœ¬ä¸éœ€è¦è®°å½•æ—¥å¿—ï¼Œä½† expensive æ–¹æ³•ä»è¢«æ‰§è¡Œäº†ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="type">Logger</span> <span class="variable">logger</span> <span class="operator">=</span> LogManager.getLogger();</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    System.out.println(logger.getLevel());</span><br><span class="line">    logger.debug(<span class="string">&quot;&#123;&#125;&quot;</span>, expensive());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> String <span class="title function_">expensive</span><span class="params">()</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;æ‰§è¡Œè€—æ—¶æ“ä½œ&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;ç»“æœ&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ”¹è¿›æ–¹æ³•1ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (logger.isDebugEnabled()) &#123;</span><br><span class="line">    logger.debug(<span class="string">&quot;&#123;&#125;&quot;</span>, expensive());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ˜¾ç„¶è¿™ä¹ˆåšï¼Œå¾ˆå¤šç±»ä¼¼ä»£ç éƒ½è¦åŠ ä¸Šè¿™æ · if åˆ¤æ–­ï¼Œå¾ˆä¸ä¼˜é›…ã€‚</p>
<p>æ”¹è¿›æ–¹æ³•2ï¼š</p>
<p>åœ¨ debug æ–¹æ³•å¤–å†å¥—ä¸€ä¸ªæ–°æ–¹æ³•ï¼Œå†…éƒ¨é€»è¾‘å¤§æ¦‚æ˜¯è¿™æ ·ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">debug</span><span class="params">(<span class="keyword">final</span> String msg, <span class="keyword">final</span> Supplier&lt;?&gt; lambda)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.isDebugEnabled()) &#123;</span><br><span class="line">        <span class="built_in">this</span>.debug(msg, lambda.get());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è°ƒç”¨æ—¶è¿™æ ·ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">logger.debug(<span class="string">&quot;&#123;&#125;&quot;</span>, () -&gt; expensive());</span><br></pre></td></tr></table></figure>

<p>expensive() å˜æˆäº†ä¸æ˜¯ç«‹åˆ»æ‰§è¡Œï¼Œåœ¨æœªæ¥ if æ¡ä»¶æˆç«‹æ—¶æ‰æ‰§è¡Œã€‚</p>
<h3 id="1-3-4-å‡½æ•°å¯¹è±¡çš„ä¸åŒç±»å‹"><a href="#1-3-4-å‡½æ•°å¯¹è±¡çš„ä¸åŒç±»å‹" class="headerlink" title="1.3.4 å‡½æ•°å¯¹è±¡çš„ä¸åŒç±»å‹"></a>1.3.4 å‡½æ•°å¯¹è±¡çš„ä¸åŒç±»å‹</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Comparator&lt;Student&gt; c = </span><br><span class="line">    			(Student s1, Student s2) -&gt; Integer.compare(s1.age, s2.age);</span><br><span class="line"></span><br><span class="line">BiFunction&lt;Student, Student, Integer&gt; f = </span><br><span class="line">                (Student s1, Student s2) -&gt; Integer.compare(s1.age, s2.age);</span><br></pre></td></tr></table></figure>

<h1 id="2-å‡½æ•°ç¼–ç¨‹è¯­æ³•"><a href="#2-å‡½æ•°ç¼–ç¨‹è¯­æ³•" class="headerlink" title="2. å‡½æ•°ç¼–ç¨‹è¯­æ³•"></a>2. å‡½æ•°ç¼–ç¨‹è¯­æ³•</h1><h2 id="2-1-è¡¨ç°å½¢å¼"><a href="#2-1-è¡¨ç°å½¢å¼" class="headerlink" title="2.1 è¡¨ç°å½¢å¼"></a>2.1 è¡¨ç°å½¢å¼</h2><p>åœ¨ Java è¯­è¨€ä¸­ï¼ŒLambda å¯¹è±¡æœ‰ä¸¤ç§å½¢å¼ï¼š<code>Lambdaè¡¨è¾¾å¼</code> ä¸ <code>æ–¹æ³•å¼•ç”¨</code></p>
<ul>
<li><code>Lambdaè¡¨è¾¾å¼</code>ï¼šåŠŸèƒ½æ›´å…¨é¢</li>
<li><code>æ–¹æ³•å¼•ç”¨</code>ï¼šå†™æ³•æ›´ç®€ä»‹</li>
</ul>
<p>Lambda å¯¹è±¡çš„ç±»å‹æ˜¯ç”±å®ƒçš„è¡Œä¸ºå†³å®šçš„ï¼Œå¦‚æœæœ‰ä¸€äº› Lambda å¯¹è±¡ï¼Œå®ƒä»¬çš„å…¥å‚ç±»å‹ã€è¿”å›å€¼ç±»å‹éƒ½ä¸€è‡´ï¼Œé‚£ä¹ˆå®ƒä»¬å¯ä»¥çœ‹ä½œæ˜¯åŒä¸€ç±»çš„ Lambda å¯¹è±¡ï¼Œå®ƒä»¬çš„ç±»å‹ï¼Œç”¨ <code>å‡½æ•°å¼æ¥å£</code> æ¥è¡¨ç¤ºã€‚</p>
<h3 id="2-1-1-åŒ¿åå†…éƒ¨ç±»"><a href="#2-1-1-åŒ¿åå†…éƒ¨ç±»" class="headerlink" title="2.1.1 åŒ¿åå†…éƒ¨ç±»"></a>2.1.1 åŒ¿åå†…éƒ¨ç±»</h3><p>åŒ¿åå†…éƒ¨ç±» ï¼šæ˜¯å†…éƒ¨ç±»çš„ç®€åŒ–å†™æ³•ã€‚ä»–æ˜¯ä¸€ä¸ªéšå«äº†åå­—çš„å†…éƒ¨ç±»ã€‚å¼€å‘ä¸­ï¼Œæœ€å¸¸ç”¨åˆ°çš„å†…éƒ¨ç±»å°±æ˜¯åŒ¿åå†…éƒ¨ç±»äº†ã€‚</p>
<p>åŒ¿åå†…éƒ¨ç±»å¿…é¡»<strong>ç»§æ‰¿ä¸€ä¸ªçˆ¶ç±»</strong>æˆ–è€…<strong>å®ç°ä¸€ä¸ªçˆ¶æ¥å£</strong>ã€‚æ ¼å¼ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> çˆ¶ç±»åæˆ–è€…æ¥å£å() &#123;</span><br><span class="line">     é‡å†™æ–¹æ³•;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>åŒ…å«äº†ï¼š</p>
<ul>
<li><p>ç»§æ‰¿æˆ–è€…å®ç°å…³ç³»</p>
</li>
<li><p>æ–¹æ³•é‡å†™</p>
</li>
<li><p>åˆ›å»ºå¯¹è±¡</p>
</li>
</ul>
<img src="https://muyoukule-blog-pics.oss-cn-chengdu.aliyuncs.com/JavaIMG/%E5%8C%BF%E5%90%8D%E5%86%85%E9%83%A8%E7%B1%BB.png" alt="åŒ¿åå†…éƒ¨ç±»">

<p>æ‰€ä»¥ä»è¯­æ³•ä¸Šæ¥è®²ï¼Œè¿™ä¸ªæ•´ä½“å…¶å®æ˜¯<strong>åŒ¿åå†…éƒ¨ç±»çš„å¯¹è±¡</strong>ã€‚</p>
<p>ä»€ä¹ˆæ—¶å€™ç”¨åˆ°åŒ¿åå†…éƒ¨ç±» ï¼Ÿ</p>
<ul>
<li><p>å¦‚æœå¸Œæœ›å®šä¹‰ä¸€ä¸ªåªè¦ä½¿ç”¨ä¸€æ¬¡çš„ç±»ï¼Œå°±å¯è€ƒè™‘ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»ã€‚åŒ¿åå†…éƒ¨ç±»çš„æœ¬è´¨ä½œç”¨æ˜¯ä¸ºäº†ç®€åŒ–ä»£ç </p>
</li>
<li><p>é€šå¸¸åœ¨æ–¹æ³•çš„å½¢å¼å‚æ•°æ˜¯æ¥å£æˆ–è€…æŠ½è±¡ç±»æ—¶ï¼Œä¹Ÿå¯ä»¥å°†åŒ¿åå†…éƒ¨ç±»ä½œä¸ºå‚æ•°ä¼ é€’</p>
</li>
</ul>
<p>åŒ¿åå†…éƒ¨ç±»çš„ç‰¹ç‚¹ï¼š</p>
<ul>
<li>å®šä¹‰ä¸€ä¸ªæ²¡æœ‰åå­—çš„å†…éƒ¨ç±»</li>
<li>è¿™ä¸ªç±»å®ç°äº†çˆ¶ç±»ï¼Œæˆ–è€…çˆ¶ç±»æ¥å£</li>
<li>åŒ¿åå†…éƒ¨ç±»ä¼šåˆ›å»ºè¿™ä¸ªæ²¡æœ‰åå­—çš„ç±»çš„å¯¹è±¡</li>
</ul>
<h3 id="2-1-2-Lambdaè¡¨è¾¾å¼"><a href="#2-1-2-Lambdaè¡¨è¾¾å¼" class="headerlink" title="2.1.2 Lambdaè¡¨è¾¾å¼"></a>2.1.2 Lambdaè¡¨è¾¾å¼</h3><p>è¯­æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å‚æ•°éƒ¨åˆ†(æ–¹æ³•çš„å½¢å‚) -&gt; æ‰§è¡Œé€»è¾‘(æ–¹æ³•çš„æ–¹æ³•ä½“)</span><br></pre></td></tr></table></figure>

<ul>
<li><code>-&gt;</code>ï¼šå›ºå®šæ ¼å¼</li>
</ul>
<p>æ³¨æ„ç‚¹ï¼š</p>
<ul>
<li>Lambdaè¡¨è¾¾å¼å¯ä»¥ç”¨æ¥ç®€åŒ–<strong>åŒ¿åå†…éƒ¨ç±»</strong>çš„ä¹¦å†™</li>
<li>Lambdaè¡¨è¾¾å¼<strong>åªèƒ½ç®€åŒ–å‡½æ•°å¼æ¥å£çš„åŒ¿åå†…éƒ¨ç±»æ–¹æ³•</strong></li>
<li>å‡½æ•°å¼æ¥å£ï¼šæœ‰ä¸”ä»…æœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•çš„æ¥å£å«å‡½æ•°å¼æ¥å£ï¼Œæ¥å£æ–¹æ³•ä¸Šå¯ä»¥åŠ ä¸Š <code>@FunctionalInterface</code> æ³¨è§£<ul>
<li><code>@FunctionalInterface</code> ä½œç”¨ï¼šåœ¨ç¼–è¯‘æœŸé—´æ£€æŸ¥å‡½æ•°å¼æ¥å£æ˜¯å¦<strong>æœ‰ä¸”ä»…æœ‰ä¸€ä¸ª</strong>æŠ½è±¡æ–¹æ³•ï¼Œå¦‚æœä¸æ»¡è¶³ä¼šæç¤ºé”™è¯¯</li>
</ul>
</li>
</ul>
<p>Lambdaçš„çœç•¥è§„åˆ™ï¼š</p>
<ul>
<li>å‚æ•°ç±»å‹å¯ä»¥çœç•¥ä¸å†™</li>
<li>å¦‚æœåªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œå‚æ•°ç±»å‹å¯ä»¥çœç•¥ï¼ŒåŒæ—¶()ä¹Ÿå¯ä»¥çœç•¥</li>
<li>å¦‚æœLambdaè¡¨è¾¾å¼çš„æ–¹æ³•ä½“åªæœ‰ä¸€è¡Œï¼Œå¤§æ‹¬å·ã€åˆ†å·ã€returnå¯ä»¥çœç•¥ä¸å†™<font color="red">ï¼ˆéœ€è¦åŒæ—¶çœç•¥ï¼‰</font></li>
</ul>
<p>ä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LambdaDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        Integer[] arr = &#123;<span class="number">2</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">4</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">5</span>, <span class="number">9</span>&#125;;</span><br><span class="line"></span><br><span class="line">        Arrays.sort(arr, <span class="keyword">new</span> <span class="title class_">Comparator</span>&lt;Integer&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(Integer o1, Integer o2)</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> o1 - o2;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Lambdaå®Œæ•´æ ¼å¼</span></span><br><span class="line">        Arrays.sort(arr, (Integer o1, Integer o2) -&gt; &#123;</span><br><span class="line">                    <span class="keyword">return</span> o1 - o2;</span><br><span class="line">                &#125;</span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Lambdaçœç•¥å†™æ³•</span></span><br><span class="line">        Arrays.sort(arr, (o1, o2) -&gt; o1 - o2);</span><br><span class="line"></span><br><span class="line">        System.out.println(Arrays.toString(arr));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-1-3-æ–¹æ³•å¼•ç”¨"><a href="#2-1-3-æ–¹æ³•å¼•ç”¨" class="headerlink" title="2.1.3 æ–¹æ³•å¼•ç”¨"></a>2.1.3 æ–¹æ³•å¼•ç”¨</h3><p>æ–¹æ³•å¼•ç”¨çš„æ¡ä»¶ï¼š</p>
<ul>
<li>å¼•ç”¨å¤„éœ€è¦æ˜¯å‡½æ•°å¼æ¥å£</li>
<li>è¢«å¼•ç”¨çš„æ–¹æ³•éœ€è¦å·²ç»å­˜åœ¨</li>
<li>è¢«å¼•ç”¨æ–¹æ³•çš„å½¢å‚å’Œè¿”å›å€¼éœ€è¦è·ŸæŠ½è±¡æ–¹æ³•çš„å½¢å‚å’Œè¿”å›å€¼ä¿æŒä¸€è‡´</li>
<li>è¢«å¼•ç”¨æ–¹æ³•çš„åŠŸèƒ½éœ€è¦æ»¡è¶³å½“å‰çš„è¦æ±‚</li>
</ul>
<p>æ–¹æ³•å¼•ç”¨çš„åˆ†ç±»ï¼š</p>
<ul>
<li>å¼•ç”¨é™æ€æ–¹æ³•</li>
<li>å¼•ç”¨æˆå‘˜æ–¹æ³•<ul>
<li>å¼•ç”¨å…¶ä»–ç±»çš„æˆå‘˜æ–¹æ³•</li>
<li>å¼•ç”¨æœ¬ç±»çš„æˆå‘˜æ–¹æ³•</li>
<li>å¼•ç”¨çˆ¶ç±»çš„æˆå‘˜æ–¹æ³•</li>
</ul>
</li>
<li>å¼•ç”¨æ„é€ æ–¹æ³•</li>
<li>å…¶ä»–è°ƒç”¨æ–¹å¼<ul>
<li>ä½¿ç”¨ç±»åå¼•ç”¨æˆå‘˜æ–¹æ³•</li>
<li>å¼•ç”¨æ•°ç»„çš„æ„é€ æ–¹æ³•</li>
</ul>
</li>
</ul>
<h2 id="2-2-å‡½æ•°ç±»å‹"><a href="#2-2-å‡½æ•°ç±»å‹" class="headerlink" title="2.2 å‡½æ•°ç±»å‹"></a>2.2 å‡½æ•°ç±»å‹</h2><p>å…¥å‚ç±»å‹ã€è¿”å›å€¼ç±»å‹éƒ½ä¸€è‡´çš„è¯ï¼Œå¯ä»¥çœ‹ä½œåŒä¸€ç±»çš„å¯¹è±¡ã€‚</p>
<p>å¸¸è§å‡½æ•°æ¥å£ï¼š</p>
<img src="https://muyoukule-blog-pics.oss-cn-chengdu.aliyuncs.com/JavaIMG/%E5%B8%B8%E8%A7%81%E5%87%BD%E6%95%B0%E6%8E%A5%E5%8F%A3.png" alt="å¸¸è§å‡½æ•°æ¥å£" style="zoom: 50%;">

<p>å‡½æ•°æ¥å£çš„å‘½åè§„å¾‹ï¼š</p>
<table>
<thead>
<tr>
<th align="center">åç§°</th>
<th align="center">å«ä¹‰</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Consumer</td>
<td align="center">æœ‰å‚ã€æ— è¿”å›å€¼</td>
</tr>
<tr>
<td align="center">Function</td>
<td align="center">æœ‰å‚ã€æœ‰è¿”å›å€¼</td>
</tr>
<tr>
<td align="center">Predicate</td>
<td align="center">æœ‰å‚ã€è¿”å›boolean</td>
</tr>
<tr>
<td align="center">Supplier</td>
<td align="center">æ— å‚ã€æœ‰è¿”å›å€¼</td>
</tr>
<tr>
<td align="center">Operator</td>
<td align="center">æœ‰å‚ã€æœ‰è¿”å›å€¼ï¼Œå¹¶ä¸”ç±»å‹ä¸€æ ·</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="center">å‰ç¼€</th>
<th align="center">å«ä¹‰</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Unary</td>
<td align="center">ä¸€å…ƒçš„æ„æ€ï¼Œè¡¨ç¤ºä¸€ä¸ªå‚æ•°</td>
</tr>
<tr>
<td align="center">Bi æˆ– Binary</td>
<td align="center">äºŒå…ƒçš„æ„æ€ï¼Œè¡¨ç¤ºä¸¤ä¸ªå‚æ•°</td>
</tr>
<tr>
<td align="center">Ternary</td>
<td align="center">ä¸‰å…ƒ</td>
</tr>
<tr>
<td align="center">Quatenary</td>
<td align="center">å››å…ƒ</td>
</tr>
<tr>
<td align="center">â€¦</td>
<td align="center">â€¦</td>
</tr>
</tbody></table>
<p>æ–¹æ³•å¼•ç”¨ä¹Ÿæ˜¯ç±»ä¼¼ï¼Œå…¥å‚ç±»å‹ã€è¿”å›å€¼ç±»å‹éƒ½ä¸€è‡´çš„è¯ï¼Œå¯ä»¥çœ‹ä½œåŒä¸€ç±»çš„å¯¹è±¡ï¼Œä¹Ÿæ˜¯ç”¨å‡½æ•°å¼æ¥å£è¡¨ç¤ºã€‚</p>
<h2 id="2-3-å‡ ç§æ–¹æ³•å¼•ç”¨"><a href="#2-3-å‡ ç§æ–¹æ³•å¼•ç”¨" class="headerlink" title="2.3 å‡ ç§æ–¹æ³•å¼•ç”¨"></a>2.3 å‡ ç§æ–¹æ³•å¼•ç”¨</h2><h3 id="2-3-1-ç±»å-é™æ€æ–¹æ³•å"><a href="#2-3-1-ç±»å-é™æ€æ–¹æ³•å" class="headerlink" title="2.3.1 ç±»å::é™æ€æ–¹æ³•å"></a>2.3.1 <code>ç±»å::é™æ€æ–¹æ³•å</code></h3><p>å¦‚ä½•ç†è§£ï¼š</p>
<ul>
<li>å‡½æ•°å¯¹è±¡çš„é€»è¾‘éƒ¨åˆ†æ˜¯ï¼šè°ƒç”¨æ­¤é™æ€æ–¹æ³•</li>
<li>å› æ­¤è¿™ä¸ªé™æ€æ–¹æ³•éœ€è¦ä»€ä¹ˆå‚æ•°ï¼Œå‡½æ•°å¯¹è±¡ä¹Ÿæä¾›ç›¸åº”çš„å‚æ•°å³å¯</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Type2Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            éœ€æ±‚ï¼šæŒ‘é€‰å‡ºæ‰€æœ‰ç”·æ€§å­¦ç”Ÿ</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        Stream.of(</span><br><span class="line">                        <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;å¼ æ— å¿Œ&quot;</span>, <span class="string">&quot;ç”·&quot;</span>),</span><br><span class="line">                        <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;å‘¨èŠ·è‹¥&quot;</span>, <span class="string">&quot;å¥³&quot;</span>),</span><br><span class="line">                        <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;å®‹é’ä¹¦&quot;</span>, <span class="string">&quot;ç”·&quot;</span>)</span><br><span class="line">                )</span><br><span class="line">                .filter(Type2Test::isMale)</span><br><span class="line">                .forEach(student -&gt; System.out.println(student));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">isMale</span><span class="params">(Student student)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> student.sex.equals(<span class="string">&quot;ç”·&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">record</span> <span class="title class_">Student</span><span class="params">(String name, String sex)</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>filter</code> è¿™ä¸ªé«˜é˜¶å‡½æ•°æ¥æ”¶çš„å‡½æ•°ç±»å‹ï¼ˆPredicateï¼‰æ˜¯ï¼šä¸€ä¸ª <code>T</code> ç±»å‹çš„å…¥å‚ï¼Œä¸€ä¸ª <code>boolean</code> çš„è¿”å›å€¼ï¼Œå› æ­¤æˆ‘ä»¬åªéœ€è¦ç»™å®ƒæä¾›ä¸€ä¸ªç›¸ç¬¦åˆçš„ Lambda å¯¹è±¡å³å¯</li>
<li>isMale è¿™ä¸ªé™æ€æ–¹æ³•æœ‰å…¥å‚ Student å¯¹åº” <code>T</code>ï¼Œæœ‰è¿”å›å€¼ <code>boolean</code> ä¹Ÿèƒ½å¯¹åº”ä¸Šï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥ä½¿ç”¨</li>
</ul>
<p>è¾“å‡ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Student[name=å¼ æ— å¿Œ, sex=ç”·]</span><br><span class="line">Student[name=å®‹é’ä¹¦, sex=ç”·]</span><br></pre></td></tr></table></figure>

<h3 id="2-3-2-ç±»å-éé™æ€æ–¹æ³•å"><a href="#2-3-2-ç±»å-éé™æ€æ–¹æ³•å" class="headerlink" title="2.3.2 ç±»å::éé™æ€æ–¹æ³•å"></a>2.3.2 <code>ç±»å::éé™æ€æ–¹æ³•å</code></h3><p>å¦‚ä½•ç†è§£ï¼š</p>
<ul>
<li>å‡½æ•°å¯¹è±¡çš„é€»è¾‘éƒ¨åˆ†æ˜¯ï¼šè°ƒç”¨æ­¤éé™æ€æ–¹æ³•</li>
<li>å› æ­¤è¿™ä¸ªå‡½æ•°å¯¹è±¡éœ€è¦æä¾›ä¸€ä¸ªé¢å¤–çš„å¯¹è±¡å‚æ•°ï¼Œä»¥ä¾¿èƒ½å¤Ÿè°ƒç”¨æ­¤éé™æ€æ–¹æ³•</li>
<li>éé™æ€æ–¹æ³•çš„å‰©ä½™å‚æ•°ï¼Œä¸å‡½æ•°å¯¹è±¡çš„å‰©ä½™å‚æ•°ä¸€ä¸€å¯¹åº”</li>
</ul>
<p>ä¾‹1ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Type3Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        highOrder(Student::hello);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">highOrder</span><span class="params">(Type3 lambda)</span> &#123;</span><br><span class="line">        System.out.println(lambda.transfer(<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;å¼ ä¸‰&quot;</span>), <span class="string">&quot;ä½ å¥½&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">interface</span> <span class="title class_">Type3</span> &#123;</span><br><span class="line">        String <span class="title function_">transfer</span><span class="params">(Student stu, String message)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">        String name;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.name = name;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">(String message)</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>.name + <span class="string">&quot; say: &quot;</span> + message;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šä¾‹ä¸­å‡½æ•°ç±»å‹çš„</p>
<ul>
<li>å‚æ•°1 å¯¹åº”ç€ hello æ–¹æ³•æ‰€å±ç±»å‹ Student</li>
<li>å‚æ•°2 å¯¹åº”ç€ hello æ–¹æ³•è‡ªå·±çš„å‚æ•° String</li>
<li>è¿”å›å€¼å¯¹åº”ç€ hello æ–¹æ³•è‡ªå·±çš„è¿”å›å€¼ String</li>
</ul>
<p>è¾“å‡ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å¼ ä¸‰ say: ä½ å¥½</span><br></pre></td></tr></table></figure>

<p>ä¾‹2ï¼šæ”¹å†™ä¹‹å‰æ ¹æ®æ€§åˆ«è¿‡æ»¤çš„éœ€æ±‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Type2Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            éœ€æ±‚ï¼šæŒ‘é€‰å‡ºæ‰€æœ‰ç”·æ€§å­¦ç”Ÿ</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        Stream.of(</span><br><span class="line">                        <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;å¼ æ— å¿Œ&quot;</span>, <span class="string">&quot;ç”·&quot;</span>),</span><br><span class="line">                        <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;å‘¨èŠ·è‹¥&quot;</span>, <span class="string">&quot;å¥³&quot;</span>),</span><br><span class="line">                        <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;å®‹é’ä¹¦&quot;</span>, <span class="string">&quot;ç”·&quot;</span>)</span><br><span class="line">                )</span><br><span class="line">                .filter(Student::isMale)</span><br><span class="line">                .forEach(student -&gt; System.out.println(student));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">record</span> <span class="title class_">Student</span><span class="params">(String name, String sex)</span> &#123;</span><br><span class="line">        <span class="type">boolean</span> <span class="title function_">isMale</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>.sex.equals(<span class="string">&quot;ç”·&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>filter</code> è¿™ä¸ªé«˜é˜¶å‡½æ•°æ¥æ”¶çš„å‡½æ•°ç±»å‹ï¼ˆPredicateï¼‰æ˜¯ï¼šä¸€ä¸ª <code>T</code> ç±»å‹çš„å…¥å‚ï¼Œä¸€ä¸ª <code>boolean</code> çš„è¿”å›å€¼ï¼Œå› æ­¤æˆ‘ä»¬åªéœ€è¦ç»™å®ƒæä¾›ä¸€ä¸ªç›¸ç¬¦åˆçš„ Lambda å¯¹è±¡å³å¯</li>
<li>å®ƒçš„å…¥å‚1 <code>T</code> å¯¹åº”ç€ isMale éé™æ€æ–¹æ³•çš„æ‰€å±ç±»å‹ Student</li>
<li>å®ƒæ²¡æœ‰å…¶å®ƒå‚æ•°ï¼ŒisMale æ–¹æ³•ä¹Ÿæ²¡æœ‰å‚æ•°</li>
<li>è¿”å›å€¼éƒ½æ˜¯ boolean</li>
</ul>
<p>è¾“å‡ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Student[name=å¼ æ— å¿Œ, sex=ç”·]</span><br><span class="line">Student[name=å®‹é’ä¹¦, sex=ç”·]</span><br></pre></td></tr></table></figure>

<p>ä¾‹3ï¼šå°†å­¦ç”Ÿå¯¹è±¡ä»…ä¿ç•™å­¦ç”Ÿçš„å§“å</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Type2Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Stream.of(</span><br><span class="line">                        <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;å¼ æ— å¿Œ&quot;</span>, <span class="string">&quot;ç”·&quot;</span>),</span><br><span class="line">                        <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;å‘¨èŠ·è‹¥&quot;</span>, <span class="string">&quot;å¥³&quot;</span>),</span><br><span class="line">                        <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;å®‹é’ä¹¦&quot;</span>, <span class="string">&quot;ç”·&quot;</span>)</span><br><span class="line">                )</span><br><span class="line">                .map(Student::name)</span><br><span class="line">                .forEach(student -&gt; System.out.println(student));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">record</span> <span class="title class_">Student</span><span class="params">(String name, String sex)</span> &#123;</span><br><span class="line">        <span class="type">boolean</span> <span class="title function_">isMale</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>.sex.equals(<span class="string">&quot;ç”·&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>map è¿™ä¸ªé«˜é˜¶å‡½æ•°æ¥æ”¶çš„å‡½æ•°ç±»å‹æ˜¯ï¼ˆFunctionï¼‰æ˜¯ï¼šä¸€ä¸ª <code>T</code> ç±»å‹çš„å‚æ•°ï¼Œä¸€ä¸ª <code>R</code> ç±»å‹çš„è¿”å›å€¼</li>
<li>å®ƒçš„å…¥å‚1 <code>T</code> å¯¹åº”ç€ name éé™æ€æ–¹æ³•çš„æ‰€å±ç±»å‹ Student</li>
<li>å®ƒæ²¡æœ‰å‰©ä½™å‚æ•°ï¼Œname æ–¹æ³•ä¹Ÿæ²¡æœ‰å‚æ•°</li>
<li>å®ƒçš„è¿”å›å€¼ R å¯¹åº”ç€ name æ–¹æ³•çš„è¿”å›å€¼ String</li>
</ul>
<p>è¾“å‡ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">å¼ æ— å¿Œ</span><br><span class="line">å‘¨èŠ·è‹¥</span><br><span class="line">å®‹é’ä¹¦</span><br></pre></td></tr></table></figure>

<h3 id="2-3-3-å¯¹è±¡-éé™æ€æ–¹æ³•å"><a href="#2-3-3-å¯¹è±¡-éé™æ€æ–¹æ³•å" class="headerlink" title="2.3.3 å¯¹è±¡::éé™æ€æ–¹æ³•å"></a>2.3.3 <code>å¯¹è±¡::éé™æ€æ–¹æ³•å</code></h3><p>å¦‚ä½•ç†è§£ï¼š</p>
<ul>
<li>å‡½æ•°å¯¹è±¡çš„é€»è¾‘éƒ¨åˆ†æ˜¯ï¼šè°ƒç”¨æ­¤éé™æ€æ–¹æ³•</li>
<li>å› ä¸ºå¯¹è±¡å·²æä¾›ï¼Œæ‰€ä»¥ä¸å¿…ä½œä¸ºå‡½æ•°å¯¹è±¡å‚æ•°çš„ä¸€éƒ¨åˆ†</li>
<li>éé™æ€æ–¹æ³•çš„å‰©ä½™å‚æ•°ï¼Œä¸å‡½æ•°å¯¹è±¡çš„å‰©ä½™å‚æ•°ä¸€ä¸€å¯¹åº”</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Type4Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Util</span> <span class="variable">util</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Util</span>(); <span class="comment">// å¯¹è±¡</span></span><br><span class="line">        Stream.of(</span><br><span class="line">                        <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;å¼ æ— å¿Œ&quot;</span>, <span class="string">&quot;ç”·&quot;</span>),</span><br><span class="line">                        <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;å‘¨èŠ·è‹¥&quot;</span>, <span class="string">&quot;å¥³&quot;</span>),</span><br><span class="line">                        <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;å®‹é’ä¹¦&quot;</span>, <span class="string">&quot;ç”·&quot;</span>)</span><br><span class="line">                )</span><br><span class="line">                .filter(util::isMale)</span><br><span class="line">                .map(util::getName)</span><br><span class="line">                .forEach(student -&gt; System.out.println(student));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">record</span> <span class="title class_">Student</span><span class="params">(String name, String sex)</span> &#123;</span><br><span class="line">        <span class="type">boolean</span> <span class="title function_">isMale</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>.sex.equals(<span class="string">&quot;ç”·&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Util</span> &#123;</span><br><span class="line">        <span class="type">boolean</span> <span class="title function_">isMale</span><span class="params">(Student student)</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> student.sex.equals(<span class="string">&quot;ç”·&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        String <span class="title function_">getName</span><span class="params">(Student student)</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> student.name();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å…¶å®è¾ƒä¸ºå…¸å‹çš„ä¸€ä¸ªåº”ç”¨å°±æ˜¯ <code>System.out</code> å¯¹è±¡ä¸­çš„éé™æ€æ–¹æ³•ï¼Œæœ€åçš„è¾“å‡ºå¯ä»¥ä¿®æ”¹ä¸ºï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.forEach(System.out::println);</span><br></pre></td></tr></table></figure>

<p>è¿™æ˜¯å› ä¸ºï¼š</p>
<ul>
<li>forEach  è¿™ä¸ªé«˜é˜¶å‡½æ•°æ¥æ”¶çš„å‡½æ•°ç±»å‹ï¼ˆConsumerï¼‰æ˜¯ä¸€ä¸ª <code>T</code> ç±»å‹å‚æ•°ï¼Œ<code>void</code> æ— è¿”å›å€¼</li>
<li>è€Œ System.out å¯¹è±¡ä¸­æœ‰éé™æ€æ–¹æ³• void println(Object x) ä¸ä¹‹ä¸€è‡´ï¼Œå› æ­¤å¯ä»¥å°†æ­¤æ–¹æ³•åŒ–ä¸º Lambda å¯¹è±¡ç»™ forEach ä½¿ç”¨</li>
</ul>
<h3 id="2-3-4-ç±»å-new"><a href="#2-3-4-ç±»å-new" class="headerlink" title="2.3.4 ç±»å::new"></a>2.3.4 <code>ç±»å::new</code></h3><p>å¯¹äºæ„é€ æ–¹æ³•ï¼Œä¹Ÿæœ‰ä¸“é—¨çš„è¯­æ³•æŠŠå®ƒä»¬è½¬æ¢ä¸º Lambda å¯¹è±¡ã€‚</p>
<p>å‡½æ•°ç±»å‹åº”æ»¡è¶³ï¼š</p>
<ul>
<li>å‚æ•°éƒ¨åˆ†ä¸æ„é€ æ–¹æ³•å‚æ•°ä¸€è‡´</li>
<li>è¿”å›å€¼ç±»å‹ä¸æ„é€ æ–¹æ³•æ‰€åœ¨ç±»ä¸€è‡´</li>
</ul>
<p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Type5Test</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">final</span> String name;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.name = <span class="string">&quot;æŸäºº&quot;</span>;</span><br><span class="line">            <span class="built_in">this</span>.age = <span class="number">18</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.name = name;</span><br><span class="line">            <span class="built_in">this</span>.age = <span class="number">18</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.name = name;</span><br><span class="line">            <span class="built_in">this</span>.age = age;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;Student&#123;&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                    <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">                    <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">interface</span> <span class="title class_">Type51</span> &#123;</span><br><span class="line">        Student <span class="title function_">create</span><span class="params">()</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">interface</span> <span class="title class_">Type52</span> &#123;</span><br><span class="line">        Student <span class="title function_">create</span><span class="params">(String name)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">interface</span> <span class="title class_">Type53</span> &#123;</span><br><span class="line">        Student <span class="title function_">create</span><span class="params">(String name, <span class="type">int</span> age)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        hiOrder((Type51) Student::<span class="keyword">new</span>);</span><br><span class="line">        hiOrder((Type52) Student::<span class="keyword">new</span>);</span><br><span class="line">        hiOrder((Type53) Student::<span class="keyword">new</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">hiOrder</span><span class="params">(Type51 creator)</span> &#123;</span><br><span class="line">        System.out.println(creator.create());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">hiOrder</span><span class="params">(Type52 creator)</span> &#123;</span><br><span class="line">        System.out.println(creator.create(<span class="string">&quot;å¼ ä¸‰&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">hiOrder</span><span class="params">(Type53 creator)</span> &#123;</span><br><span class="line">        System.out.println(creator.create(<span class="string">&quot;æå››&quot;</span>, <span class="number">20</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-3-5-this-éé™æ€æ–¹æ³•å"><a href="#2-3-5-this-éé™æ€æ–¹æ³•å" class="headerlink" title="2.3.5 this::éé™æ€æ–¹æ³•å"></a>2.3.5 <code>this::éé™æ€æ–¹æ³•å</code></h3><p>ç®—æ˜¯ <code>ç±»å::éé™æ€æ–¹æ³•å</code> å½¢å¼çš„ç‰¹ä¾‹ï¼Œåªèƒ½ç”¨åœ¨ç±»å†…éƒ¨ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Type6Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Util</span> <span class="variable">util</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UtilExt</span>();</span><br><span class="line">        util.hiOrder(Stream.of(</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;å¼ æ— å¿Œ&quot;</span>, <span class="string">&quot;ç”·&quot;</span>),</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;å‘¨èŠ·è‹¥&quot;</span>, <span class="string">&quot;å¥³&quot;</span>),</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;å®‹é’ä¹¦&quot;</span>, <span class="string">&quot;ç”·&quot;</span>)</span><br><span class="line">        ));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">record</span> <span class="title class_">Student</span><span class="params">(String name, String sex)</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Util</span> &#123;</span><br><span class="line">        <span class="type">boolean</span> <span class="title function_">isMale</span><span class="params">(Student student)</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> student.sex.equals(<span class="string">&quot;ç”·&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">boolean</span> <span class="title function_">isFemale</span><span class="params">(Student student)</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> student.sex.equals(<span class="string">&quot;å¥³&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">void</span> <span class="title function_">hiOrder</span><span class="params">(Stream&lt;Student&gt; stream)</span> &#123;</span><br><span class="line">            stream</span><br><span class="line">                    .filter(<span class="built_in">this</span>::isMale)</span><br><span class="line">                    .forEach(System.out::println);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-3-6-super-éé™æ€æ–¹æ³•å"><a href="#2-3-6-super-éé™æ€æ–¹æ³•å" class="headerlink" title="2.3.6 super::éé™æ€æ–¹æ³•å"></a>2.3.6 super::éé™æ€æ–¹æ³•å</h3><p>ç®—æ˜¯ <code>ç±»å::éé™æ€æ–¹æ³•å</code> å½¢å¼çš„ç‰¹ä¾‹ï¼Œåªèƒ½ç”¨åœ¨ç±»å†…éƒ¨ï¼ˆç”¨åœ¨è¦ç”¨ super åŒºåˆ†é‡è½½æ–¹æ³•æ—¶ï¼‰ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Type6Test</span> &#123;</span><br><span class="line">	</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">UtilExt</span> <span class="keyword">extends</span> <span class="title class_">Util</span> &#123;</span><br><span class="line">        <span class="keyword">void</span> <span class="title function_">hiOrder</span><span class="params">(Stream&lt;Student&gt; stream)</span> &#123;</span><br><span class="line">            stream</span><br><span class="line">                    .filter(<span class="built_in">super</span>::isFemale)</span><br><span class="line">                    .forEach(System.out::println);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-3-7-ç‰¹ä¾‹"><a href="#2-3-7-ç‰¹ä¾‹" class="headerlink" title="2.3.7 ç‰¹ä¾‹"></a>2.3.7 ç‰¹ä¾‹</h3><p>å¯¹äºæ— è¿”å›å€¼çš„å‡½æ•°æ¥å£ï¼Œä¾‹å¦‚ <code>Consumer</code> å’Œ <code>Runnable</code>ï¼Œå®ƒä»¬å¯ä»¥é…åˆæœ‰è¿”å›å€¼çš„å‡½æ•°å¯¹è±¡ä½¿ç”¨ï¼ˆå‡½æ•°æ¥å£å’Œæ–¹æ³•å¼•ç”¨ä¹‹é—´ï¼Œå¯ä»¥å·®ä¸€ä¸ªè¿”å›å€¼ï¼‰ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExceptionTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Runnable</span> <span class="variable">task1</span> <span class="operator">=</span> ExceptionTest::print1;</span><br><span class="line">        <span class="type">Runnable</span> <span class="variable">task2</span> <span class="operator">=</span> ExceptionTest::print2;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">print1</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;task1 running...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">print2</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;task2 running...&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ° <code>Runnable</code> æ¥å£ä¸éœ€è¦è¿”å›å€¼ï¼Œè€Œå®é™…çš„å‡½æ•°å¯¹è±¡å¤šå‡ºçš„è¿”å›å€¼ä¹Ÿä¸å½±å“ä½¿ç”¨ã€‚</p>
<h2 id="2-4-é—­åŒ…ï¼ˆClosureï¼‰"><a href="#2-4-é—­åŒ…ï¼ˆClosureï¼‰" class="headerlink" title="2.4 é—­åŒ…ï¼ˆClosureï¼‰"></a>2.4 é—­åŒ…ï¼ˆClosureï¼‰</h2><p>ä½•ä¸ºé—­åŒ…ï¼Ÿé—­åŒ…å°±æ˜¯<strong>å‡½æ•°å¯¹è±¡</strong>ä¸<strong>å¤–ç•Œå˜é‡</strong>ç»‘å®šåœ¨ä¸€èµ·ï¼Œå½¢æˆçš„æ•´ä½“ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ClosureTest1</span> &#123;</span><br><span class="line">    <span class="keyword">interface</span> <span class="title class_">Lambda</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> y)</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line">        highOrder(y -&gt; x + y);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">highOrder</span><span class="params">(Lambda lambda)</span> &#123;</span><br><span class="line">        System.out.println(lambda.add(<span class="number">20</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>ä»£ç ä¸­çš„ $y \rightarrow x + y$ å’Œ $x &#x3D; 10$ï¼Œå°±å½¢æˆäº†ä¸€ä¸ªé—­åŒ…</li>
<li>å¯ä»¥æƒ³è±¡æˆï¼Œå‡½æ•°å¯¹è±¡æœ‰ä¸ªèƒŒåŒ…ï¼ŒèƒŒåŒ…é‡Œå¯ä»¥è£…å˜é‡éšèº«æºå¸¦ï¼Œå°†æ¥å‡½æ•°å¯¹è±¡ç”­ç®¡ä¼ é€’åˆ°å¤šè¿œçš„åœ°æ–¹ï¼ŒåŒ…é‡Œæ€»è£…ç€ä¸ª $x &#x3D; 10$</li>
<li>æœ‰ä¸ªé™åˆ¶ï¼Œå±€éƒ¨å˜é‡ x å¿…é¡»æ˜¯ <code>final</code> æˆ– <code>effective final</code> çš„ï¼Œeffective final æ„æ€å°±æ˜¯ï¼Œè™½ç„¶æ²¡æœ‰ç”¨ final ä¿®é¥°ï¼Œä½†å°±åƒæ˜¯ç”¨ final ä¿®é¥°äº†ä¸€æ ·ï¼Œä¸èƒ½é‡æ–°èµ‹å€¼ï¼Œå¦åˆ™å°±è¯­æ³•é”™è¯¯ã€‚<ul>
<li>æ„å‘³ç€é—­åŒ…å˜é‡ï¼Œåœ¨è£…è¿›åŒ…é‡Œçš„é‚£ä¸€åˆ»ï¼Œå°±ä¸èƒ½å˜åŒ–äº†</li>
<li>é“ç†ä¹Ÿç®€å•ï¼Œä¸ºäº†ä¿è¯å‡½æ•°çš„ä¸å˜æ€§ï¼Œé˜²æ­¢ç ´åæˆé“</li>
</ul>
</li>
<li>é—­åŒ…æ˜¯ä¸€ç§ç»™å‡½æ•°æ‰§è¡Œæä¾›æ•°æ®çš„æ‰‹æ®µï¼Œå‡½æ•°æ‰§è¡Œæ—¢å¯ä»¥ä½¿ç”¨å‡½æ•°å…¥å‚ï¼Œè¿˜å¯ä»¥ä½¿ç”¨é—­åŒ…å˜é‡</li>
</ul>
<p>ä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ClosureTest2</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é—­åŒ…ä½œç”¨ï¼šç»™å‡½æ•°å¯¹è±¡æä¾›å‚æ•°ä»¥å¤–çš„æ•°æ®</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// åˆ›å»º 10 ä¸ªä»»åŠ¡å¯¹è±¡ï¼Œå¹¶ä¸”æ¯ä¸ªä»»åŠ¡å¯¹è±¡ç»™ä¸€ä¸ªä»»åŠ¡ç¼–å·</span></span><br><span class="line">        List&lt;Runnable&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> i + <span class="number">1</span>;</span><br><span class="line">            <span class="type">Runnable</span> <span class="variable">task</span> </span><br><span class="line">                <span class="operator">=</span> () -&gt; System.out.println(Thread.currentThread()+<span class="string">&quot;:æ‰§è¡Œä»»åŠ¡&quot;</span> + k);</span><br><span class="line">            list.add(task);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">ExecutorService</span> <span class="variable">service</span> <span class="operator">=</span> Executors.newVirtualThreadPerTaskExecutor();</span><br><span class="line">        <span class="keyword">for</span> (Runnable task : list) &#123;</span><br><span class="line">            service.submit(task);</span><br><span class="line">        &#125;</span><br><span class="line">        System.in.read();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-5-æŸ¯é‡ŒåŒ–ï¼ˆCarryingï¼‰"><a href="#2-5-æŸ¯é‡ŒåŒ–ï¼ˆCarryingï¼‰" class="headerlink" title="2.5 æŸ¯é‡ŒåŒ–ï¼ˆCarryingï¼‰"></a>2.5 æŸ¯é‡ŒåŒ–ï¼ˆCarryingï¼‰</h2><p>æŸ¯é‡ŒåŒ–çš„ä½œç”¨æ˜¯è®©å‡½æ•°å¯¹è±¡åˆ†æ­¥æ‰§è¡Œï¼ˆæœ¬è´¨ä¸Šæ˜¯åˆ©ç”¨å¤šä¸ªå‡½æ•°å¯¹è±¡å’Œé—­åŒ…ï¼‰ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Carrying1Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        highOrder(a -&gt; b -&gt; a + b);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">highOrder</span><span class="params">(Step1 step1)</span> &#123;</span><br><span class="line">        <span class="type">Step2</span> <span class="variable">step2</span> <span class="operator">=</span> step1.exec(<span class="number">10</span>);</span><br><span class="line">        System.out.println(step2.exec(<span class="number">20</span>));</span><br><span class="line">        System.out.println(step2.exec(<span class="number">50</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">interface</span> <span class="title class_">Step1</span> &#123;</span><br><span class="line">        Step2 <span class="title function_">exec</span><span class="params">(<span class="type">int</span> a)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">interface</span> <span class="title class_">Step2</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="title function_">exec</span><span class="params">(<span class="type">int</span> b)</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä»£ç ä¸­ï¼š</p>
<ul>
<li><code>a -&gt; ...</code> æ˜¯ç¬¬ä¸€ä¸ªå‡½æ•°å¯¹è±¡ï¼Œå®ƒçš„è¿”å›ç»“æœ  <code>b -&gt; ...</code> æ˜¯ç¬¬äºŒä¸ªå‡½æ•°å¯¹è±¡ï¼Œç”±ç¬¬äºŒä¸ªå‡½æ•°å¯¹è±¡è¿”å›æœ€ç»ˆç»“æœ</li>
<li>åè€…ä¸å‰é¢çš„å‚æ•° a æ„æˆäº†é—­åŒ…</li>
<li>step1.exec(10) ç¡®å®šäº† a çš„å€¼æ˜¯ 10ï¼Œè¿”å›ç¬¬äºŒä¸ªå‡½æ•°å¯¹è±¡ step2ï¼Œa è¢«æ”¾å…¥äº† step2 å¯¹è±¡çš„èƒŒåŒ…è®°ä¸‹æ¥äº†</li>
<li>step2.exec(20) ç¡®å®šäº† b çš„å€¼æ˜¯ 20ï¼Œæ­¤æ—¶å¯ä»¥æ‰§è¡Œ a + b çš„æ“ä½œï¼Œå¾—åˆ°ç»“æœ 30</li>
<li>step2.exec(50) åˆ†æè¿‡ç¨‹ç±»ä¼¼</li>
</ul>
<h2 id="2-6-é«˜é˜¶å‡½æ•°ï¼ˆHigher-Order-Functionsï¼‰"><a href="#2-6-é«˜é˜¶å‡½æ•°ï¼ˆHigher-Order-Functionsï¼‰" class="headerlink" title="2.6 é«˜é˜¶å‡½æ•°ï¼ˆHigher-Order Functionsï¼‰"></a>2.6 é«˜é˜¶å‡½æ•°ï¼ˆHigher-Order Functionsï¼‰</h2><p>æ‰€è°“é«˜é˜¶ï¼Œå°±æ˜¯æŒ‡å®ƒæ˜¯å…¶ä»–å‡½æ•°å¯¹è±¡çš„ä½¿ç”¨è€…ã€‚</p>
<p>ä½œç”¨ï¼š</p>
<ul>
<li>å°†<strong>é€šç”¨ã€å¤æ‚</strong>çš„é€»è¾‘éšå«åœ¨<strong>é«˜é˜¶å‡½æ•°</strong>ä¸­</li>
<li>å°†<strong>æ˜“å˜ã€æœªå®š</strong>çš„é€»è¾‘æ”¾åœ¨å¤–éƒ¨çš„<strong>å‡½æ•°å¯¹è±¡</strong>ä¸­</li>
</ul>
<p>1ã€å†…å¾ªç¯</p>
<p>2ã€éå†äºŒå‰æ ‘</p>
<p>3ã€ç®€å•æµ</p>
<p>4ã€ç®€å•æµ-åŒ–ç®€</p>
<p>5ã€ç®€å•æµ-æ”¶é›†</p>
<h2 id="2-7-ç­‰ä»·çš„-lambda-è¡¨è¾¾å¼"><a href="#2-7-ç­‰ä»·çš„-lambda-è¡¨è¾¾å¼" class="headerlink" title="2.7 ç­‰ä»·çš„ lambda è¡¨è¾¾å¼"></a>2.7 ç­‰ä»·çš„ lambda è¡¨è¾¾å¼</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">equals</span><span class="params">(Object o)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span> == o) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">if</span> (o == <span class="literal">null</span> || getClass() != o.getClass()) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> (Student) o;</span><br><span class="line">        <span class="keyword">return</span> Objects.equals(name, student.name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">hashCode</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Objects.hash(name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li><p><code>Math::random</code> </p>
<p><code>()-&gt;Math.random()</code></p>
</li>
<li><p><code>Math::sqrt</code></p>
<p><code>(double number)-&gt;Math.sqrt(number)</code></p>
</li>
<li><p><code>Student::getName</code></p>
<p><code>(Student stu)-&gt;stu.getName()</code></p>
</li>
<li><p><code>Student::setName</code></p>
<p><code>(Student stu, String newName) -&gt; stu.setName(newName)</code></p>
</li>
<li><p><code>Student::hashCode</code></p>
<p><code>(Student stu) -&gt; stu.hashCode()</code></p>
</li>
<li><p><code>Student::equals</code></p>
<p><code>(Student stu, Object o) -&gt; stu.equals(o)</code></p>
</li>
</ol>
<p>å‡è®¾å·²æœ‰å¯¹è±¡ <code>Student stu = new Student(&quot;å¼ ä¸‰&quot;);</code></p>
<ol>
<li><p><code>stu::getName</code></p>
<p><code>()-&gt;stu.getName()</code></p>
</li>
<li><p><code>stu::setName</code></p>
<p><code>(String newName)-&gt;stu.setName(newName)</code></p>
</li>
<li><p><code>Student::new</code></p>
<p><code>(String name)-&gt;new Student(name)</code></p>
</li>
</ol>
<h1 id="3-Stream-API"><a href="#3-Stream-API" class="headerlink" title="3. Stream API"></a>3. Stream API</h1><h2 id="3-1-Streamæµçš„æ€æƒ³"><a href="#3-1-Streamæµçš„æ€æƒ³" class="headerlink" title="3.1 Streamæµçš„æ€æƒ³"></a>3.1 Streamæµçš„æ€æƒ³</h2><img src="https://muyoukule-blog-pics.oss-cn-chengdu.aliyuncs.com/JavaIMG/Stream%E6%B5%81%E6%80%9D%E6%83%B3.png" alt="Streamæµæ€æƒ³" style="zoom: 67%;">

<h2 id="3-2-Streamæµä½œç”¨"><a href="#3-2-Streamæµä½œç”¨" class="headerlink" title="3.2 Streamæµä½œç”¨"></a>3.2 Streamæµä½œç”¨</h2><p>ç»“åˆLambdaè¡¨è¾¾å¼ï¼Œç®€åŒ–é›†åˆã€æ•°ç»„æ“ä½œã€‚</p>
<h2 id="3-3-æµçš„ä¸‰ç±»æ–¹æ³•"><a href="#3-3-æµçš„ä¸‰ç±»æ–¹æ³•" class="headerlink" title="3.3 æµçš„ä¸‰ç±»æ–¹æ³•"></a>3.3 æµçš„ä¸‰ç±»æ–¹æ³•</h2><ul>
<li>è·å–Streamæµ<ul>
<li>åˆ›å»ºä¸€æ¡æµæ°´çº¿ï¼Œå¹¶æŠŠæ•°æ®æ”¾åˆ°æµæ°´çº¿ä¸Šå‡†å¤‡è¿›è¡Œæ“ä½œ</li>
</ul>
</li>
<li>ä¸­é—´æ–¹æ³•<ul>
<li>æµæ°´çº¿ä¸Šçš„æ“ä½œ</li>
<li>ä¸€æ¬¡æ“ä½œå®Œæ¯•ä¹‹åï¼Œè¿˜å¯ä»¥ç»§ç»­è¿›è¡Œå…¶ä»–æ“ä½œ</li>
</ul>
</li>
<li>ç»ˆç»“æ–¹æ³•<ul>
<li>ä¸€ä¸ªStreamæµåªèƒ½æœ‰ä¸€ä¸ªç»ˆç»“æ–¹æ³•</li>
<li>æ˜¯æµæ°´çº¿ä¸Šçš„æœ€åä¸€ä¸ªæ“ä½œ</li>
</ul>
</li>
</ul>
<h2 id="3-4-Streamä½¿ç”¨æ­¥éª¤"><a href="#3-4-Streamä½¿ç”¨æ­¥éª¤" class="headerlink" title="3.4 Streamä½¿ç”¨æ­¥éª¤"></a>3.4 Streamä½¿ç”¨æ­¥éª¤</h2><ol>
<li>å…ˆå¾—åˆ°ä¸€æ¡Streamæµï¼ˆæµæ°´çº¿ï¼‰ï¼Œå†æŠŠæ•°æ®æ”¾ä¸Šå»ã€‚</li>
<li>ä½¿ç”¨<strong>ä¸­é—´æ–¹æ³•</strong>å¯¹æµæ°´çº¿ä¸Šçš„æ•°æ®è¿›è¡Œæ“ä½œã€‚</li>
<li>ä½¿ç”¨<strong>ç»ˆç»“æ–¹æ³•</strong>å¯¹æµæ°´çº¿ä¸Šçš„æ•°æ®è¿›è¡Œæ“ä½œã€‚</li>
</ol>
<blockquote>
<p>ç”ŸæˆStreamæµçš„æ–¹å¼</p>
</blockquote>
<table>
<thead>
<tr>
<th align="center">è·å–æ–¹å¼</th>
<th align="center">æ–¹æ³•å</th>
<th align="center">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="center">å•åˆ—é›†åˆ</td>
<td align="center">default Stream<E> stream()</E></td>
<td align="center">Collectionä¸­çš„é»˜è®¤æ–¹æ³•</td>
</tr>
<tr>
<td align="center">åŒåˆ—é›†åˆ</td>
<td align="center">æ— </td>
<td align="center">æ— æ³•ç›´æ¥ä½¿ç”¨streamæµ</td>
</tr>
<tr>
<td align="center">æ•°ç»„</td>
<td align="center">public static <T> Stream<T> stream(T[] array)</T></T></td>
<td align="center">Arrayså·¥å…·ç±»ä¸­çš„é™æ€æ–¹æ³•</td>
</tr>
<tr>
<td align="center">ä¸€å †é›¶æ•£æ•°æ®</td>
<td align="center">public static<T> Stream<T> of(Tâ€¦ values)</T></T></td>
<td align="center">Streamæ¥å£ä¸­çš„é™æ€æ–¹æ³•</td>
</tr>
</tbody></table>
<p><font color="red"><strong>PSï¼šStreamæ¥å£ä¸­é™æ€æ–¹æ³• <code>of</code> çš„ç»†èŠ‚</strong></font></p>
<p>æ–¹æ³•çš„å½¢å‚æ˜¯ä¸€ä¸ªå¯å˜å‚æ•°ï¼Œå¯ä»¥ä¼ é€’ä¸€å †é›¶æ•£çš„æ•°æ®ï¼Œä¹Ÿå¯ä»¥ä¼ é€’æ•°ç»„ï¼Œä½†æ˜¯æ•°ç»„<strong>å¿…é¡»</strong>æ˜¯<font color="red"><strong>å¼•ç”¨æ•°æ®ç±»å‹</strong></font>çš„ï¼Œå¦‚æœä¼ é€’åŸºæœ¬æ•°æ®ç±»å‹ï¼Œæ˜¯ä¼šæŠŠæ•´ä¸ªæ•°ç»„å½“åšä¸€ä¸ªå…ƒç´ ï¼Œæ”¾åˆ°Streamå½“ä¸­ã€‚</p>
<blockquote>
<p>Streamæµä¸­é—´æ“ä½œæ–¹æ³•</p>
</blockquote>
<p>æ¦‚å¿µï¼šä¸­é—´æ“ä½œçš„æ„æ€æ˜¯,æ‰§è¡Œå®Œæ­¤æ–¹æ³•ä¹‹åï¼ŒStreamæµä¾ç„¶å¯ä»¥ç»§ç»­æ‰§è¡Œå…¶ä»–æ“ä½œ</p>
<p>å¸¸è§æ–¹æ³•ï¼š</p>
<table>
<thead>
<tr>
<th align="center">æ–¹æ³•å</th>
<th align="center">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Stream<T> filter(Predicate predicate)</T></td>
<td align="center">ç”¨äºå¯¹æµä¸­çš„æ•°æ®è¿›è¡Œè¿‡æ»¤</td>
</tr>
<tr>
<td align="center">Stream<T> limit(long maxSize)</T></td>
<td align="center">è¿”å›æ­¤æµä¸­çš„å…ƒç´ ç»„æˆçš„æµï¼Œæˆªå–å‰æŒ‡å®šå‚æ•°ä¸ªæ•°çš„æ•°æ®</td>
</tr>
<tr>
<td align="center">Stream<T> skip(long n)</T></td>
<td align="center">è·³è¿‡æŒ‡å®šå‚æ•°ä¸ªæ•°çš„æ•°æ®ï¼Œè¿”å›ç”±è¯¥æµçš„å‰©ä½™å…ƒç´ ç»„æˆçš„æµ</td>
</tr>
<tr>
<td align="center">static <T> Stream<T> concat(Stream a, Stream b)</T></T></td>
<td align="center">åˆå¹¶aå’Œbä¸¤ä¸ªæµä¸ºä¸€ä¸ªæµ</td>
</tr>
<tr>
<td align="center">Stream<T> distinct()</T></td>
<td align="center">è¿”å›ç”±è¯¥æµçš„ä¸åŒå…ƒç´ ï¼ˆæ ¹æ®Object.equals(Object) ï¼‰ç»„æˆçš„æµ</td>
</tr>
</tbody></table>
<p><strong>PSï¼š</strong></p>
<ul>
<li>ä¸­é—´æ–¹æ³•ï¼Œè¿”å›æ–°çš„Streamæµï¼Œ<font color="red"><strong>åŸæ¥çš„Streamæµåªèƒ½ä½¿ç”¨ä¸€æ¬¡ï¼Œ</strong></font>å»ºè®®ä½¿ç”¨é“¾å¼ç¼–ç¨‹ã€‚</li>
<li>ä¿®æ”¹Streamæµä¸­çš„æ•°æ®ï¼Œ<font color="red"><strong>ä¸ä¼šå½±å“åŸæ¥é›†åˆæˆ–æ•°ç»„çš„æ•°æ®ã€‚</strong></font></li>
</ul>
<blockquote>
<p>Streamæµç»ˆç»“æ“ä½œæ–¹æ³•</p>
</blockquote>
<p>æ¦‚å¿µï¼šç»ˆç»“æ“ä½œçš„æ„æ€æ˜¯ï¼Œæ‰§è¡Œå®Œæ­¤æ–¹æ³•ä¹‹åï¼ŒStreamæµå°†ä¸èƒ½å†æ‰§è¡Œå…¶ä»–æ“ä½œ</p>
<p>å¸¸ç”¨æ–¹æ³•ï¼š</p>
<table>
<thead>
<tr>
<th align="center">æ–¹æ³•å</th>
<th align="center">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="center">void forEach(Consumer action)</td>
<td align="center">éå†ã€æ‰“å°</td>
</tr>
<tr>
<td align="center">long count()</td>
<td align="center">ç»Ÿè®¡</td>
</tr>
<tr>
<td align="center">toArray()</td>
<td align="center">æŠŠç»“æœæ”¶é›†åˆ°æ•°ç»„ä¸­</td>
</tr>
<tr>
<td align="center">collect(Collector collector)</td>
<td align="center">æŠŠç»“æœæ”¶é›†åˆ°é›†åˆä¸­</td>
</tr>
</tbody></table>
<p>å·¥å…·ç±»<code>Collectors</code>æä¾›äº†å…·ä½“çš„é›†åˆæ”¶é›†æ–¹å¼ï¼š</p>
<table>
<thead>
<tr>
<th align="center">æ–¹æ³•å</th>
<th align="center">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="center">public static <T> Collector toList()</T></td>
<td align="center">æŠŠå…ƒç´ æ”¶é›†åˆ°Listé›†åˆä¸­</td>
</tr>
<tr>
<td align="center">public static <T> Collector toSet()</T></td>
<td align="center">æŠŠå…ƒç´ æ”¶é›†åˆ°Seté›†åˆä¸­</td>
</tr>
<tr>
<td align="center">public static  Collector toMap(Function keyMapper,Function valueMapper)</td>
<td align="center">æŠŠå…ƒç´ æ”¶é›†åˆ°Mapé›†åˆä¸­</td>
</tr>
</tbody></table>
<p><strong>PSï¼šç»ˆç»“æ“ä½œåªèƒ½æ‰§è¡Œä¸€æ¬¡</strong></p>
<h2 id="3-5-è¿‡æ»¤"><a href="#3-5-è¿‡æ»¤" class="headerlink" title="3.5 è¿‡æ»¤"></a>3.5 è¿‡æ»¤</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">record</span> <span class="title class_">Fruit</span><span class="params">(String cname, String name, String category, String color)</span> &#123; &#125;</span><br><span class="line"></span><br><span class="line">Stream.of(</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Fruit</span>(<span class="string">&quot;è‰è“&quot;</span>, <span class="string">&quot;Strawberry&quot;</span>, <span class="string">&quot;æµ†æœ&quot;</span>, <span class="string">&quot;çº¢è‰²&quot;</span>),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Fruit</span>(<span class="string">&quot;æ¡‘è‘š&quot;</span>, <span class="string">&quot;Mulberry&quot;</span>, <span class="string">&quot;æµ†æœ&quot;</span>, <span class="string">&quot;ç´«è‰²&quot;</span>),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Fruit</span>(<span class="string">&quot;æ¨æ¢…&quot;</span>, <span class="string">&quot;Waxberry&quot;</span>, <span class="string">&quot;æµ†æœ&quot;</span>, <span class="string">&quot;çº¢è‰²&quot;</span>),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Fruit</span>(<span class="string">&quot;æ ¸æ¡ƒ&quot;</span>, <span class="string">&quot;Walnut&quot;</span>, <span class="string">&quot;åšæœ&quot;</span>, <span class="string">&quot;æ£•è‰²&quot;</span>),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Fruit</span>(<span class="string">&quot;è‰è“&quot;</span>, <span class="string">&quot;Peanut&quot;</span>, <span class="string">&quot;åšæœ&quot;</span>, <span class="string">&quot;æ£•è‰²&quot;</span>),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Fruit</span>(<span class="string">&quot;è“è“&quot;</span>, <span class="string">&quot;Blueberry&quot;</span>, <span class="string">&quot;æµ†æœ&quot;</span>, <span class="string">&quot;è“è‰²&quot;</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><img src="https://muyoukule-blog-pics.oss-cn-chengdu.aliyuncs.com/JavaIMG/Stream%E6%B5%81%E8%BF%87%E6%BB%A4.png" alt="Streamæµè¿‡æ»¤"></p>
<p>æ‰¾åˆ°æ‰€æœ‰æµ†æœï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.filter(f -&gt; f.category.equals(<span class="string">&quot;æµ†æœ&quot;</span>))</span><br></pre></td></tr></table></figure>

<p>æ‰¾åˆ°è“è‰²çš„æµ†æœï¼š</p>
<p>æ–¹æ³•1ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.filter(f -&gt; f.category().equals(<span class="string">&quot;æµ†æœ&quot;</span>) &amp;&amp; f.color().equals(<span class="string">&quot;è“è‰²&quot;</span>))</span><br></pre></td></tr></table></figure>

<p>æ–¹æ³•2ï¼šè®©æ¯ä¸ª lambda åªåšä¸€ä»¶äº‹ï¼Œä¸¤æ¬¡ filter ç›¸å¯¹äºå¹¶ä¸”å…³ç³»</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">.filter(f -&gt; f.category.equals(<span class="string">&quot;æµ†æœ&quot;</span>))</span><br><span class="line">.filter(f -&gt; f.color().equals(<span class="string">&quot;è“è‰²&quot;</span>))</span><br></pre></td></tr></table></figure>

<p>æ–¹æ³•3ï¼šè®©æ¯ä¸ª lambda åªåšä¸€ä»¶äº‹ï¼Œä¸è¿‡æ¯”æ–¹æ³•2å¼ºçš„åœ°æ–¹å¯ä»¥ orï¼Œandï¼Œnagate è¿ç®—</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.filter(((Predicate&lt;Fruit&gt;) f -&gt; f.category.equals(<span class="string">&quot;æµ†æœ&quot;</span>)).and(f -&gt; f.color().equals(<span class="string">&quot;è“è‰²&quot;</span>)))</span><br></pre></td></tr></table></figure>

<h2 id="3-6-æ˜ å°„"><a href="#3-6-æ˜ å°„" class="headerlink" title="3.6 æ˜ å°„"></a>3.6 æ˜ å°„</h2><p><img src="https://muyoukule-blog-pics.oss-cn-chengdu.aliyuncs.com/JavaIMG/Stream%E6%B5%81%E6%98%A0%E5%B0%84.png" alt="Streamæµæ˜ å°„"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.map(f -&gt; f.cname() + <span class="string">&quot;é…±&quot;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="3-7-é™ç»´"><a href="#3-7-é™ç»´" class="headerlink" title="3.7 é™ç»´"></a>3.7 é™ç»´</h2><p>ä¾‹1ï¼š</p>
<img src="https://muyoukule-blog-pics.oss-cn-chengdu.aliyuncs.com/JavaIMG/Stream%E6%B5%81%E9%99%8D%E7%BB%B4.png" alt="Streamæµé™ç»´" style="zoom: 67%;">

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">record</span> <span class="title class_">Fruit</span><span class="params">(String cname, String name, String category, String color)</span> &#123; &#125;</span><br><span class="line"></span><br><span class="line">Stream.of(</span><br><span class="line">        List.of(</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">Fruit</span>(<span class="string">&quot;è‰è“&quot;</span>, <span class="string">&quot;Strawberry&quot;</span>, <span class="string">&quot;æµ†æœ&quot;</span>, <span class="string">&quot;çº¢è‰²&quot;</span>),</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">Fruit</span>(<span class="string">&quot;æ¡‘è‘š&quot;</span>, <span class="string">&quot;Mulberry&quot;</span>, <span class="string">&quot;æµ†æœ&quot;</span>, <span class="string">&quot;ç´«è‰²&quot;</span>),</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">Fruit</span>(<span class="string">&quot;æ¨æ¢…&quot;</span>, <span class="string">&quot;Waxberry&quot;</span>, <span class="string">&quot;æµ†æœ&quot;</span>, <span class="string">&quot;çº¢è‰²&quot;</span>),</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">Fruit</span>(<span class="string">&quot;è“è“&quot;</span>, <span class="string">&quot;Blueberry&quot;</span>, <span class="string">&quot;æµ†æœ&quot;</span>, <span class="string">&quot;è“è‰²&quot;</span>)</span><br><span class="line">        ),</span><br><span class="line">        List.of(</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">Fruit</span>(<span class="string">&quot;æ ¸æ¡ƒ&quot;</span>, <span class="string">&quot;Walnut&quot;</span>, <span class="string">&quot;åšæœ&quot;</span>, <span class="string">&quot;æ£•è‰²&quot;</span>),</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">Fruit</span>(<span class="string">&quot;è‰è“&quot;</span>, <span class="string">&quot;Peanut&quot;</span>, <span class="string">&quot;åšæœ&quot;</span>, <span class="string">&quot;æ£•è‰²&quot;</span>)</span><br><span class="line">        )</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">.flatMap(Collection::stream)</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·æŠŠåšæœå’Œæµ†æœä¸¤ä¸ªé›†åˆå˜æˆäº†å«å…­ä¸ªå…ƒç´ çš„æ°´æœæµã€‚</p>
<p>ä¾‹2ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Stream.of(</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Order</span>(<span class="number">1</span>, List.of(</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">Item</span>(<span class="number">6499</span>, <span class="number">1</span>, <span class="string">&quot;HUAWEI MateBook 14s&quot;</span>),</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">Item</span>(<span class="number">6999</span>, <span class="number">1</span>, <span class="string">&quot;HUAWEI Mate 60 Pro&quot;</span>),</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">Item</span>(<span class="number">1488</span>, <span class="number">1</span>, <span class="string">&quot;HUAWEI WATCH GT 4&quot;</span>)</span><br><span class="line">        )),</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Order</span>(<span class="number">1</span>, List.of(</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">Item</span>(<span class="number">8999</span>, <span class="number">1</span>, <span class="string">&quot;Apple MacBook Air 13&quot;</span>),</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">Item</span>(<span class="number">7999</span>, <span class="number">1</span>, <span class="string">&quot;Apple iPhone 15 Pro&quot;</span>),</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">Item</span>(<span class="number">2999</span>, <span class="number">1</span>, <span class="string">&quot;Apple Watch Series 9&quot;</span>)</span><br><span class="line">        ))</span><br><span class="line">)</span><br><span class="line">    </span><br><span class="line"><span class="comment">// é€ä¸€å¤„ç†æ¯ä¸ªè®¢å•ä¸­çš„å•†å“</span></span><br><span class="line">.flatMap(order -&gt; order.items().stream())</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·æŠŠä¸€ä¸ªæœ‰ä¸¤ä¸ªå…ƒç´ çš„è®¢å•æµï¼Œå˜æˆäº†ä¸€ä¸ªæœ‰å…­ä¸ªå…ƒç´ çš„å•†å“æµã€‚</p>
<h2 id="3-8-æ„å»º"><a href="#3-8-æ„å»º" class="headerlink" title="3.8 æ„å»º"></a>3.8 æ„å»º</h2><p>æ ¹æ®å·²æœ‰çš„æ•°ç»„æ„å»ºæµ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Arrays.stream(array)</span><br></pre></td></tr></table></figure>

<p>æ ¹æ®å·²æœ‰çš„ Collection æ„å»ºæµï¼ˆåŒ…æ‹¬ Listï¼ŒSet ç­‰ï¼‰</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List.of(<span class="string">&quot;a&quot;</span>,<span class="string">&quot;b&quot;</span>,<span class="string">&quot;c&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>æŠŠä¸€ä¸ªå¯¹è±¡å˜æˆæµ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Stream.of(<span class="string">&quot;d&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>æŠŠå¤šä¸ªå¯¹è±¡å˜æˆæµ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Stream.of(<span class="string">&quot;x&quot;</span>, <span class="string">&quot;y&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæ˜¯å¤šä¸ªæ•°ç»„å¯¹è±¡å˜æˆæµï¼š</p>
<p>æ•°ç»„<strong>å¿…é¡»</strong>æ˜¯<font color="red"><strong>å¼•ç”¨æ•°æ®ç±»å‹</strong></font>çš„ï¼Œå¦‚æœä¼ é€’åŸºæœ¬æ•°æ®ç±»å‹ï¼Œæ˜¯ä¼šæŠŠæ•´ä¸ªæ•°ç»„å½“åšä¸€ä¸ªå…ƒç´ ï¼Œæ”¾åˆ°Streamå½“ä¸­ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span>[] arr1 = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>&#125;;</span><br><span class="line">String[] arr2 = &#123;<span class="string">&quot;a&quot;</span>,<span class="string">&quot;b&quot;</span>,<span class="string">&quot;c&quot;</span>&#125;;</span><br><span class="line"></span><br><span class="line">Stream.of(arr1).forEach(System.out::println);</span><br><span class="line">System.out.println(<span class="string">&quot;-----------&quot;</span>);</span><br><span class="line">Stream.of(arr2).forEach(System.out::println);</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°ï¼Œå¦‚æœä¼ é€’åŸºæœ¬æ•°æ®ç±»å‹ï¼Œæ˜¯ä¼šæŠŠæ•´ä¸ªæ•°ç»„å½“åšä¸€ä¸ªå…ƒç´ ï¼Œæ”¾åˆ°Streamå½“ä¸­ï¼Œæ‰“å°å‡ºæ¥çš„æ˜¯ä¸€ä¸ªåœ°å€å€¼ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[I@446cdf90</span><br><span class="line">-----------</span><br><span class="line">a</span><br><span class="line">b</span><br><span class="line">c</span><br></pre></td></tr></table></figure>

<h2 id="3-9-æ‹¼æ¥"><a href="#3-9-æ‹¼æ¥" class="headerlink" title="3.9 æ‹¼æ¥"></a>3.9 æ‹¼æ¥</h2><p>ä¸¤ä¸ªæµæ‹¼æ¥</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Stream.concat(Stream.of(<span class="string">&quot;a&quot;</span>,<span class="string">&quot;b&quot;</span>,<span class="string">&quot;c&quot;</span>), Stream.of(<span class="string">&quot;d&quot;</span>))</span><br></pre></td></tr></table></figure>

<h2 id="3-10-æˆªå–"><a href="#3-10-æˆªå–" class="headerlink" title="3.10 æˆªå–"></a>3.10 æˆªå–</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Stream.concat(Stream.of(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>), Stream.of(<span class="string">&quot;d&quot;</span>))</span><br><span class="line">    .skip(<span class="number">1</span>)</span><br><span class="line">    .limit(<span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">b</span><br><span class="line">c</span><br></pre></td></tr></table></figure>

<ul>
<li>skip æ˜¯è·³è¿‡å‡ ä¸ªå…ƒç´ </li>
<li>limit æ˜¯é™åˆ¶å¤„ç†çš„å…ƒç´ ä¸ªæ•°</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Stream.concat(Stream.of(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>), Stream.of(<span class="number">4</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">2</span>))</span><br><span class="line">    .takeWhile(x -&gt; x &lt; <span class="number">3</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Stream.concat(Stream.of(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>), Stream.of(<span class="number">4</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">2</span>))</span><br><span class="line">	.dropWhile(x -&gt; x &lt; <span class="number">3</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">1</span><br><span class="line">2</span><br></pre></td></tr></table></figure>

<ul>
<li><p>dropWhile æ˜¯ drop æµä¸­å…ƒç´ ï¼Œç›´åˆ°æ¡ä»¶ä¸æˆç«‹ï¼Œç•™ä¸‹å‰©ä½™å…ƒç´ </p>
</li>
<li><p>takeWhile æ˜¯ take æµä¸­å…ƒç´ ï¼Œç›´åˆ°æ¡ä»¶ä¸æˆç«‹ï¼Œèˆå¼ƒå‰©ä½™å…ƒç´ </p>
</li>
</ul>
<h2 id="3-11-ç”Ÿæˆ"><a href="#3-11-ç”Ÿæˆ" class="headerlink" title="3.11 ç”Ÿæˆ"></a>3.11 ç”Ÿæˆ</h2><p>ç”Ÿæˆä» 0 ~ 9 çš„æ•°å­—</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">IntStream.range(<span class="number">0</span>, <span class="number">10</span>)</span><br><span class="line"><span class="comment">//æˆ–è€…</span></span><br><span class="line">IntStream.rangeClosed(<span class="number">0</span>, <span class="number">9</span>)</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæƒ³è®¢åˆ¶ï¼Œå¯ä»¥ç”¨ <code>iterate</code> æ–¹æ³•ï¼Œä¾‹å¦‚ä¸‹é¢ç”Ÿæˆå¥‡æ•°åºåˆ—ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">IntStream.iterate(<span class="number">1</span>, x -&gt; x + <span class="number">2</span>)</span><br><span class="line">IntStream.iterate(<span class="number">1</span>, x -&gt; x + <span class="number">2</span>).limit(<span class="number">10</span>)	<span class="comment">//é™åˆ¶å…ƒç´ ä¸ªæ•°</span></span><br></pre></td></tr></table></figure>

<ul>
<li>å‚æ•°1 æ˜¯åˆå§‹å€¼</li>
<li>å‚æ•°2 æ˜¯ä¸€ä¸ªç‰¹æ®Š Functionï¼Œå³å‚æ•°ç±»å‹ä¸è¿”å›å€¼ç›¸åŒï¼Œå®ƒä¼šæ ¹æ®ä¸Šä¸€ä¸ªå…ƒç´  x çš„å€¼è®¡ç®—å‡ºå½“å‰å…ƒç´ </li>
<li>éœ€è¦ç”¨ limit é™åˆ¶å…ƒç´ ä¸ªæ•°</li>
</ul>
<p>ä¹Ÿå¯ä»¥ç”¨ <code>iterate</code> çš„é‡è½½æ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">IntStream.iterate(<span class="number">1</span>, x -&gt; x &lt; <span class="number">10</span>, x -&gt; x + <span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>å‚æ•°1 æ˜¯åˆå§‹å€¼</li>
<li>å‚æ•°2 ç”¨æ¥é™åˆ¶å…ƒç´ ä¸ªæ•°ï¼Œä¸€æ—¦ä¸æ»¡è¶³æ­¤æ¡ä»¶ï¼Œæµå°±ç»“æŸ</li>
<li>å‚æ•°3 ç›¸å½“äºä¸Šä¸ªæ–¹æ³•çš„å‚æ•°2</li>
</ul>
<p><code>iterate</code> çš„ç‰¹ç‚¹æ˜¯æ ¹æ®ä¸Šä¸€ä¸ªå…ƒç´ è®¡ç®—å½“å‰å…ƒç´ ï¼Œå¦‚æœä¸éœ€è¦ä¾èµ–ä¸Šä¸€ä¸ªå…ƒç´ ï¼Œå¯ä»¥æ”¹ç”¨ <code>generate</code> æ–¹æ³•ã€‚</p>
<p>ä¾‹å¦‚ä¸‹é¢æ˜¯ç”Ÿæˆ 5 ä¸ªéšæœº intï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Stream.generate(()-&gt; ThreadLocalRandom.current().nextInt()).limit(<span class="number">5</span>)</span><br></pre></td></tr></table></figure>

<p>ä¸è¿‡å¦‚æœåªæ˜¯ç”Ÿæˆéšæœºæ•°çš„è¯ï¼Œæœ‰æ›´ç®€å•çš„åŠæ³•</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ThreadLocalRandom.current().ints(<span class="number">5</span>)</span><br></pre></td></tr></table></figure>

<p>å¦‚æœè¦æŒ‡å®šä¸Šä¸‹é™ï¼Œä¾‹å¦‚ä¸‹é¢æ˜¯ç”Ÿæˆä» 0~9 çš„100ä¸ªéšæœºæ•°</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ThreadLocalRandom.current().ints(<span class="number">100</span>, <span class="number">0</span>, <span class="number">10</span>)</span><br></pre></td></tr></table></figure>

<h2 id="3-12-æŸ¥æ‰¾ä¸åˆ¤æ–­"><a href="#3-12-æŸ¥æ‰¾ä¸åˆ¤æ–­" class="headerlink" title="3.12 æŸ¥æ‰¾ä¸åˆ¤æ–­"></a>3.12 æŸ¥æ‰¾ä¸åˆ¤æ–­</h2><blockquote>
<p>æŸ¥æ‰¾</p>
</blockquote>
<p>ä¸‹é¢çš„ä»£ç æ‰¾åˆ°æµä¸­ä»»æ„ï¼ˆAnyï¼‰ä¸€ä¸ªå¶æ•°</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span>[] array = &#123;<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">9</span>&#125;;</span><br><span class="line"></span><br><span class="line">Arrays.stream(array)</span><br><span class="line">    .filter(x -&gt; (x &amp; <span class="number">1</span>) == <span class="number">0</span>)</span><br><span class="line">    .findAny()</span><br><span class="line">    .ifPresent(System.out::println);</span><br></pre></td></tr></table></figure>

<ul>
<li>æ³¨æ„ findAny è¿”å›çš„æ˜¯ <code>OptionalInt</code> å¯¹è±¡ï¼Œå› ä¸ºå¯èƒ½æµä¸­ä¸å­˜åœ¨å¶æ•°</li>
<li>å¯¹äº <code>OptionalInt</code> å¯¹è±¡ï¼Œä¸€èˆ¬éœ€è¦ç”¨ <code>ifPresent</code> æˆ– <code>orElse</code>ï¼ˆæä¾›é»˜è®¤å€¼ï¼‰æ¥å¤„ç†</li>
</ul>
<p>ä¸ <code>findAny</code> æ¯”è¾ƒç±»ä¼¼çš„æ˜¯ <code>firstFirst</code>ï¼Œå®ƒä¿©çš„åŒºåˆ«ï¼Ÿ</p>
<ul>
<li>findAny æ˜¯æ‰¾åœ¨æµä¸­ä»»æ„ä½ç½®çš„å…ƒç´ ï¼Œä¸éœ€è¦è€ƒè™‘é¡ºåºï¼Œå¯¹äºä¸Šä¾‹è¿”å› 6 ä¹Ÿæ˜¯å¯ä»¥çš„</li>
<li>findFirst æ˜¯æ‰¾ç¬¬ä¸€ä¸ªå‡ºç°åœ¨å…ƒç´ ï¼Œéœ€è¦è€ƒè™‘é¡ºåºï¼Œå¯¹äºä¸Šä¾‹åªèƒ½è¿”å› 4</li>
<li>findAny åœ¨é¡ºåºæµä¸­ä¸ findFirst è¡¨ç°ç›¸åŒï¼ŒåŒºåˆ«åœ¨äºå¹¶è¡Œæµä¸‹ä¼šæ›´å¿«</li>
</ul>
<blockquote>
<p>åˆ¤æ–­</p>
</blockquote>
<p>åˆ¤æ–­æµä¸­æ˜¯å¦å­˜åœ¨ä»»æ„ä¸€ä¸ªå¶æ•°ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Arrays.stream(array).anyMatch(x -&gt; (x &amp; <span class="number">1</span>) == <span class="number">0</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>å®ƒè¿”å›çš„æ˜¯ boolean å€¼ï¼Œå¯ä»¥ç›´æ¥ç”¨æ¥åˆ¤æ–­</li>
</ul>
<p>åˆ¤æ–­æµæ˜¯å¦å…¨éƒ¨æ˜¯å¶æ•°ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Arrays.stream(array).allMatch(x -&gt; (x &amp; <span class="number">1</span>) == <span class="number">0</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>åŒæ ·ï¼Œå®ƒè¿”å›çš„æ˜¯ boolean å€¼ï¼Œå¯ä»¥ç›´æ¥ç”¨æ¥åˆ¤æ–­</li>
</ul>
<p>åˆ¤æ–­æµæ˜¯å¦å…¨éƒ¨ä¸æ˜¯å¶æ•°ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Arrays.stream(array).noneMatch(x -&gt; (x &amp; <span class="number">1</span>) == <span class="number">0</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>noneMatch ä¸ allMatch å«ä¹‰æ°å¥½ç›¸å</li>
</ul>
<h2 id="3-13-æ’åºä¸å»é‡"><a href="#3-13-æ’åºä¸å»é‡" class="headerlink" title="3.13 æ’åºä¸å»é‡"></a>3.13 æ’åºä¸å»é‡</h2><blockquote>
<p>å»é‡</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">IntStream.of(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">	.distinct()</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ’åº</p>
</blockquote>
<p>å·²çŸ¥æœ‰æ•°æ®</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">record</span> <span class="title class_">Hero</span><span class="params">(String name, <span class="type">int</span> strength)</span> &#123; &#125;</span><br><span class="line"></span><br><span class="line">Stream.of(</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Hero</span>(<span class="string">&quot;ç‹¬å­¤æ±‚è´¥&quot;</span>, <span class="number">100</span>),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Hero</span>(<span class="string">&quot;ä»¤ç‹å†²&quot;</span>, <span class="number">90</span>),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Hero</span>(<span class="string">&quot;é£æ¸…æ‰¬&quot;</span>, <span class="number">98</span>),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Hero</span>(<span class="string">&quot;ä¸œæ–¹ä¸è´¥&quot;</span>, <span class="number">98</span>),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Hero</span>(<span class="string">&quot;æ–¹è¯&quot;</span>, <span class="number">92</span>),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Hero</span>(<span class="string">&quot;ä»»æˆ‘è¡Œ&quot;</span>, <span class="number">92</span>),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Hero</span>(<span class="string">&quot;å†²è™š&quot;</span>, <span class="number">90</span>),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Hero</span>(<span class="string">&quot;å‘é—®å¤©&quot;</span>, <span class="number">88</span>),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Hero</span>(<span class="string">&quot;ä¸æˆ’&quot;</span>, <span class="number">88</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>è¦æ±‚ï¼Œé¦–å…ˆæŒ‰ strength æ­¦åŠ›æ’åºï¼ˆé€†åºï¼‰ï¼Œæ­¦åŠ›ç›¸åŒçš„ï¼ŒæŒ‰å§“åé•¿åº¦æ’åºï¼ˆæ­£åºï¼‰</p>
<p>ä»…ç”¨ lambda æ¥è§£</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.sorted((a,b)-&gt; &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> Integer.compare(b.strength(), a.strength());</span><br><span class="line">    <span class="keyword">return</span> (res == <span class="number">0</span>) ? Integer.compare(a.nameLength(), b.nameLength()) : res; </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>æ–¹æ³•å¼•ç”¨æ”¹å†™</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">.sorted(</span><br><span class="line">    Comparator.comparingInt(Hero::strength)</span><br><span class="line">      .reversed()</span><br><span class="line">      .thenComparingInt(Hero::nameLength)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>å…¶ä¸­ï¼š</p>
<ul>
<li><code>comparingInt</code> æ¥æ”¶ä¸€ä¸ª key æå–å™¨ï¼ˆè¯´æ˜æŒ‰å¯¹è±¡ä¸­å“ªéƒ¨åˆ†æ¥æ¯”è¾ƒï¼‰ï¼Œè¿”å›ä¸€ä¸ªæ¯”è¾ƒå™¨</li>
<li><code>reversed</code> è¿”å›ä¸€ä¸ªé¡ºåºç›¸åçš„æ¯”è¾ƒå™¨</li>
<li><code>thenComparingInt</code> æ¥æ”¶ä¸€ä¸ª key æå–å™¨ï¼Œè¿”å›ä¸€ä¸ªæ–°æ¯”è¾ƒå™¨ï¼Œæ–°æ¯”è¾ƒå™¨åœ¨åŸæœ‰æ¯”è¾ƒå™¨ç»“æœç›¸ç­‰æ—¶æ‰§è¡Œæ–°çš„æ¯”è¾ƒé€»è¾‘</li>
</ul>
<p>å¢åŠ ä¸€ä¸ªè¾…åŠ©æ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">record</span> <span class="title class_">Hero</span><span class="params">(String name, <span class="type">int</span> strength)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="title function_">nameLength</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.name.length();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åŸç†ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.sorted((e, f) -&gt; &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span></span><br><span class="line">        ((Comparator&lt;Hero&gt;) (c, d) -&gt;</span><br><span class="line">            ((Comparator&lt;Hero&gt;) (a, b) -&gt; Integer.compare(a.strength(), b.strength()))</span><br><span class="line">                .compare(d, c))</span><br><span class="line">            .compare(e, f);</span><br><span class="line">    <span class="keyword">return</span> (res == <span class="number">0</span>) ? Integer.compare(e.nameLength(), f.nameLength()) : res;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>å¦‚æœä¸å¥½çœ‹ï¼Œæ”¹æˆä¸‹é¢çš„ä»£ç </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">.sorted(step3(step2(step1())))</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> Comparator&lt;Hero&gt; <span class="title function_">step1</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (a, b) -&gt; Integer.compare(a.strength(), b.strength());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> Comparator&lt;Hero&gt; <span class="title function_">step2</span><span class="params">(Comparator&lt;Hero&gt; step1)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (c, d) -&gt; step1.compare(d, c);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> Comparator&lt;Hero&gt; <span class="title function_">step3</span><span class="params">(Comparator&lt;Hero&gt; step2)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (e, f) -&gt; &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> step2.compare(e, f);</span><br><span class="line">        <span class="keyword">return</span> (res == <span class="number">0</span>) ? Integer.compare(e.nameLength(), f.nameLength()) : res;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3-14-åŒ–ç®€"><a href="#3-14-åŒ–ç®€" class="headerlink" title="3.14 åŒ–ç®€"></a>3.14 åŒ–ç®€</h2><p>åŒ–ç®€ï¼šä¸¤ä¸¤åˆå¹¶ï¼Œåªå‰©ä¸€ä¸ª</p>
<p>é€‚åˆï¼šæœ€å¤§å€¼ã€æœ€å°å€¼ã€æ±‚å’Œã€æ±‚ä¸ªæ•°â€¦</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.reduce(init, (p,x) -&gt; r);</span><br></pre></td></tr></table></figure>

<ul>
<li><code>init</code> ä»£è¡¨åˆå§‹å€¼ï¼Œè¿”å›å€¼æ˜¯ä¸€ä¸ª<code>Optional</code>å¯¹è±¡ï¼Œå½“ä¸ç»™åˆå§‹å€¼æ—¶ï¼Œæµä¸­æ²¡æœ‰å…ƒç´ å¯¹è±¡çš„æ—¶å€™è¿”å›ä¸€ä¸ª<code>Optional.empty</code></li>
<li><code>(p,x) -&gt; r</code> æ˜¯ä¸€ä¸ª BinaryOperatorï¼Œä½œç”¨æ˜¯æ ¹æ®ä¸Šæ¬¡åŒ–ç®€ç»“æœ p å’Œå½“å‰å…ƒç´  xï¼Œå¾—åˆ°æœ¬æ¬¡åŒ–ç®€ç»“æœ r</li>
</ul>
<p>è¿™æ ·ä¸¤ä¸¤åŒ–ç®€ï¼Œå¯ä»¥å°†æµä¸­çš„æ‰€æœ‰å…ƒç´ åˆå¹¶æˆä¸€ä¸ªç»“æœã€‚</p>
<h2 id="3-15-æ”¶é›†"><a href="#3-15-æ”¶é›†" class="headerlink" title="3.15 æ”¶é›†"></a>3.15 æ”¶é›†</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.collect( supplier, accumulator, combiner);</span><br></pre></td></tr></table></figure>

<ul>
<li>supplier æ˜¯æè¿°å¦‚ä½•åˆ›å»ºæ”¶é›†å®¹å™¨ c ï¼š<code>()-&gt; c</code></li>
<li>accumulator æ˜¯æè¿°å¦‚ä½•å‘å®¹å™¨ c æ·»åŠ å…ƒç´  xï¼š<code>(c, x) -&gt; void</code></li>
<li>combiner æ˜¯æè¿°å¦‚ä½•åˆå¹¶ä¸¤ä¸ªå®¹å™¨ï¼š<code>(c1, c2) -&gt; void</code><ul>
<li>ä¸²è¡Œæµä¸‹ä¸éœ€è¦åˆå¹¶å®¹å™¨</li>
<li>å¹¶è¡Œæµå¦‚æœç”¨çš„æ˜¯å¹¶å‘å®¹å™¨ï¼Œä¹Ÿä¸éœ€è¦åˆå¹¶</li>
</ul>
</li>
</ul>
<h2 id="3-16-æ”¶é›†å™¨"><a href="#3-16-æ”¶é›†å™¨" class="headerlink" title="3.16 æ”¶é›†å™¨"></a>3.16 æ”¶é›†å™¨</h2><p>é€šè¿‡ä¸Šé¢çš„æ”¶é›†å¯ä»¥çœ‹å‡ºï¼Œä¸ç®¡æ”¶é›†å®¹å™¨çš„ç§ç±»æœ‰å¤šå°‘ç§ï¼Œåœ¨æ”¶é›†æ—¶éƒ½éœ€è¦ä¸‰ä¸ªå‚æ•°ï¼Œå¯ä»¥å°†è¿™ä¸‰ä¸ªå‚æ•°ç”¨ä¸€ä¸ªæ•´ä½“æ¥è¡¨ç¤ºï¼Œè¿™ä¸ªæ•´ä½“å°±å«<code>Collectoræ”¶é›†å™¨</code>ã€‚JDKç»™æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªæ”¶é›†å™¨å·¥å…·ç±»<code>Collectors</code>ï¼Œå·¥å…·ç±»ä¸­çš„é™æ€æ–¹æ³•å°±æ˜¯ç”¨æ¥åˆ›å»ºå„ç§ä¸åŒç±»å‹çš„æ”¶é›†å™¨ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.collect(Collectors.toList());	<span class="comment">//æ”¶é›†åˆ° List é›†åˆä¸­</span></span><br></pre></td></tr></table></figure>

<p>ç±»ä¼¼ï¼ŒCollectors ç±»ä¸­è¿˜æä¾›äº†å¾ˆå¤šç°æˆçš„æ”¶é›†å™¨ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Collectors.toSet()	<span class="comment">//æ”¶é›†åˆ° Set</span></span><br><span class="line">Collectors.joining()	<span class="comment">//æ”¶é›†åˆ° StringBuilder</span></span><br><span class="line">Collectors.joining(<span class="string">&quot;,&quot;</span>)	<span class="comment">//æ”¶é›†åˆ° StringJoiner</span></span><br><span class="line">Collectors.toMap(x -&gt; x, x -&gt; <span class="number">1</span>)	<span class="comment">//æ”¶é›†åˆ° Map</span></span><br></pre></td></tr></table></figure>

<h2 id="3-17-ä¸‹æ¸¸æ”¶é›†å™¨"><a href="#3-17-ä¸‹æ¸¸æ”¶é›†å™¨" class="headerlink" title="3.17 ä¸‹æ¸¸æ”¶é›†å™¨"></a>3.17 ä¸‹æ¸¸æ”¶é›†å™¨</h2><p>åš <code>groupingBy</code> åˆ†ç»„æ”¶é›†æ—¶ï¼Œç»„å†…å¯èƒ½éœ€è¦è¿›ä¸€æ­¥çš„æ•°æ®æ”¶é›†ï¼Œç§°ä¸ºä¸‹æ¸¸æ”¶é›†å™¨ã€‚</p>
<p>ä¸€äº›ä¸“é—¨å’Œ groupingBy  é…åˆä½¿ç”¨çš„ä¸‹æ¸¸å¤„ç†å™¨ï¼š</p>
<table>
<thead>
<tr>
<th align="center">ä¸‹æ¸¸æ”¶é›†å™¨</th>
<th align="center">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="center">mapping(x-&gt;y, dc)</td>
<td align="center">å°† x è½¬æ¢ä¸º y ï¼Œç”¨ä¸‹æ¸¸æ”¶é›†å™¨ dc æ”¶é›†</td>
</tr>
<tr>
<td align="center">flatMapping(x-&gt;substream, dc)</td>
<td align="center">å°† x è½¬æ¢ä¸º substream ï¼Œç”¨ä¸‹æ¸¸æ”¶é›†å™¨ dc æ”¶é›†</td>
</tr>
<tr>
<td align="center">filtering(x-&gt;boolean, dc)</td>
<td align="center">è¿‡æ»¤åï¼Œç”¨ä¸‹æ¸¸æ”¶é›†å™¨ dc æ”¶é›†</td>
</tr>
<tr>
<td align="center">counting()</td>
<td align="center">æ±‚ä¸ªæ•°</td>
</tr>
<tr>
<td align="center">minBy((a,b)-&gt;int)</td>
<td align="center">æ±‚æœ€å°</td>
</tr>
<tr>
<td align="center">maxBy((a,b)-&gt;int)</td>
<td align="center">æ±‚æœ€å¤§</td>
</tr>
<tr>
<td align="center">summingInt(x-&gt;int)</td>
<td align="center">è½¬ int åæ±‚å’Œ</td>
</tr>
<tr>
<td align="center">averagingDouble(x-&gt;double)</td>
<td align="center">è½¬ double åæ±‚å¹³å‡</td>
</tr>
<tr>
<td align="center">reducing(init,(p,x)-&gt;r)</td>
<td align="center">init åˆå§‹å€¼ï¼Œç”¨ä¸Šæ¬¡ç»“æœ p å’Œå½“å‰å…ƒç´  x ç”Ÿæˆæœ¬æ¬¡ç»“æœ r</td>
</tr>
</tbody></table>
<p><font color="red"><strong>PSï¼šè°ƒç”¨é™æ€æ–¹æ³•å¯ä»¥ä½¿ç”¨ <code>import static</code> è¯­æ³•çœç•¥ç±»å</strong></font></p>
<p>æœªçœç•¥ <code>Collectors</code>ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stream.collect(Collectors.groupingBy(h -&gt; h.name().length(), Collectors.mapping(h -&gt; h.strength(), Collectors.toList())));</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨ <code>import static</code> è¯­æ³•çœç•¥ <code>Collectors</code>ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.util.stream.Collectors.groupingBy;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.util.stream.Collectors.mapping;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.util.stream.Collectors.toList;</span><br><span class="line"><span class="comment">//æˆ–è€…ä½¿ç”¨é€šé…ç¬¦ä¸€æ¬¡æ€§å¯¼å…¥</span></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.util.stream.Collectors.*;</span><br><span class="line"></span><br><span class="line">stream.collect(groupingBy(h -&gt; h.name().length(), mapping(h -&gt; h.strength(), toList())));</span><br></pre></td></tr></table></figure>

<h2 id="3-18-åŸºæœ¬æµ"><a href="#3-18-åŸºæœ¬æµ" class="headerlink" title="3.18 åŸºæœ¬æµ"></a>3.18 åŸºæœ¬æµ</h2><p>åŸºæœ¬ç±»å‹æµæŒ‡ IntStreamã€LongStream å’Œ DoubleStreamï¼Œå®ƒä»¬åœ¨åšæ•°å€¼è®¡ç®—æ—¶æœ‰æ›´å¥½çš„æ€§èƒ½ã€‚</p>
<p>è½¬æ¢æˆåŸºæœ¬æµï¼š</p>
<ul>
<li>mapToInt</li>
<li>mapToLong</li>
<li>mapToDouble</li>
<li>flatMapToInt</li>
<li>flatMapToLong</li>
<li>flatMapToDouble</li>
<li>mapMultiToInt</li>
<li>mapMultiToLong</li>
<li>mapMultiToDouble</li>
</ul>
<p>åŸºæœ¬æµè½¬å¯¹è±¡æµï¼š</p>
<ul>
<li>mapToObj</li>
<li>boxed</li>
</ul>
<h2 id="3-19-å¹¶è¡Œ"><a href="#3-19-å¹¶è¡Œ" class="headerlink" title="3.19 å¹¶è¡Œ"></a>3.19 å¹¶è¡Œ</h2><p>åœ¨ Java ä¸­ï¼Œ<strong>ä¸²è¡Œæµ</strong>å’Œ<strong>å¹¶è¡Œæµ</strong>æ˜¯é’ˆå¯¹æµæ“ä½œçš„ä¸¤ç§ä¸åŒå¤„ç†æ–¹å¼ï¼š</p>
<p>ä¸²è¡Œæµï¼ˆSequential Streamï¼‰ï¼š</p>
<ul>
<li>ä¸²è¡Œæµæ˜¯æµå…ƒç´ æŒ‰é¡ºåºä¾æ¬¡å¤„ç†çš„æµã€‚</li>
<li>åœ¨ä¸²è¡Œæµä¸­ï¼Œæ“ä½œæ˜¯å•çº¿ç¨‹æ‰§è¡Œçš„ï¼Œæ¯ä¸ªå…ƒç´ ä¾æ¬¡ç»è¿‡æµæ°´çº¿ä¸Šçš„å„ä¸ªé˜¶æ®µå¤„ç†ã€‚</li>
<li>é€‚ç”¨äºç®€å•çš„æ•°æ®å¤„ç†åœºæ™¯ï¼Œæ•°æ®é‡ä¸å¤§ä¸”å¤„ç†æ—¶é—´çŸ­çš„æƒ…å†µä¸‹ã€‚</li>
</ul>
<p>å¹¶è¡Œæµï¼ˆParallel Streamï¼‰ï¼š</p>
<ul>
<li>å¹¶è¡Œæµæ˜¯æµå…ƒç´ å¹¶è¡Œå¤„ç†çš„æµã€‚</li>
<li>åœ¨å¹¶è¡Œæµä¸­ï¼Œæ“ä½œä¼šå¹¶å‘æ‰§è¡Œï¼Œæµä¼šè¢«æ‹†åˆ†ä¸ºå¤šä¸ªå­ä»»åŠ¡ï¼Œè¿™äº›å­ä»»åŠ¡å¯ä»¥åœ¨å¤šä¸ªçº¿ç¨‹ä¸ŠåŒæ—¶å¤„ç†ã€‚</li>
<li>é€‚ç”¨äºå¤§è§„æ¨¡æ•°æ®å¤„ç†ã€å¤æ‚è®¡ç®—æˆ–éœ€è¦å¹¶è¡Œå¤„ç†çš„åœºæ™¯ã€‚</li>
</ul>
<p>å¹¶è¡Œæµä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">Stream.of(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line">    .parallel()</span><br><span class="line">    .collect(Collector.of(</span><br><span class="line">            () -&gt; &#123;</span><br><span class="line">                System.out.printf(<span class="string">&quot;%-12s %s%n&quot;</span>,simple(),<span class="string">&quot;create&quot;</span>);</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Integer&gt;();</span><br><span class="line">            &#125;,</span><br><span class="line">            (list, x) -&gt; &#123;</span><br><span class="line">                List&lt;Integer&gt; old = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(list);</span><br><span class="line">                list.add(x);</span><br><span class="line">                System.out.printf(<span class="string">&quot;%-12s %s.add(%d)=&gt;%s%n&quot;</span>,simple(), old, x, list);</span><br><span class="line">            &#125;,</span><br><span class="line">            (list1, list2) -&gt; &#123;</span><br><span class="line">                List&lt;Integer&gt; old = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(list1);</span><br><span class="line">                list1.addAll(list2);</span><br><span class="line">                System.out.printf(<span class="string">&quot;%-12s %s.add(%s)=&gt;%s%n&quot;</span>, simple(),old, list2, list1);</span><br><span class="line">                <span class="keyword">return</span> list1;</span><br><span class="line">            &#125;,</span><br><span class="line">            list -&gt; list,</span><br><span class="line">            Collector.Characteristics.IDENTITY_FINISH</span><br><span class="line">    ));</span><br></pre></td></tr></table></figure>

<h2 id="3-20-æ•ˆç‡"><a href="#3-20-æ•ˆç‡" class="headerlink" title="3.20 æ•ˆç‡"></a>3.20 æ•ˆç‡</h2><blockquote>
<p>æ•°ç»„æ±‚å’Œ</p>
</blockquote>
<p>å…¶ä¸­</p>
<ul>
<li>primitive ç”¨ loop å¾ªç¯å¯¹ int æ±‚å’Œ</li>
<li>intStream ç”¨ IntStream å¯¹ int æ±‚å’Œ</li>
<li>boxed ç”¨ loop å¾ªç¯å¯¹ Integer æ±‚å’Œ</li>
<li>stream ç”¨ Stream å¯¹ Integer æ±‚å’Œ</li>
</ul>
<p>å…ƒç´ ä¸ªæ•° 100</p>
<table>
<thead>
<tr>
<th align="center">Benchmark</th>
<th align="center">Mode</th>
<th align="center">Cnt</th>
<th align="center">Score (ns&#x2F;op)</th>
<th align="center">Error (ns&#x2F;op)</th>
<th align="center">Units</th>
</tr>
</thead>
<tbody><tr>
<td align="center">T01Sum.primitive</td>
<td align="center">avgt</td>
<td align="center">5</td>
<td align="center">25.424</td>
<td align="center">Â± 0.782</td>
<td align="center">ns&#x2F;op</td>
</tr>
<tr>
<td align="center">T01Sum.intStream</td>
<td align="center">avgt</td>
<td align="center">5</td>
<td align="center">47.482</td>
<td align="center">Â± 1.145</td>
<td align="center">ns&#x2F;op</td>
</tr>
<tr>
<td align="center">T01Sum.boxed</td>
<td align="center">avgt</td>
<td align="center">5</td>
<td align="center">72.457</td>
<td align="center">Â± 4.136</td>
<td align="center">ns&#x2F;op</td>
</tr>
<tr>
<td align="center">T01Sum.stream</td>
<td align="center">avgt</td>
<td align="center">5</td>
<td align="center">465.141</td>
<td align="center">Â± 4.891</td>
<td align="center">ns&#x2F;op</td>
</tr>
</tbody></table>
<p>å…ƒç´ ä¸ªæ•° 1000</p>
<table>
<thead>
<tr>
<th align="center">Benchmark</th>
<th align="center">Mode</th>
<th align="center">Cnt</th>
<th align="center">Score (ns&#x2F;op)</th>
<th align="center">Error (ns&#x2F;op)</th>
<th align="center">Units</th>
</tr>
</thead>
<tbody><tr>
<td align="center">T01Sum.primitive</td>
<td align="center">avgt</td>
<td align="center">5</td>
<td align="center">270.556</td>
<td align="center">Â± 1.277</td>
<td align="center">ns&#x2F;op</td>
</tr>
<tr>
<td align="center">T01Sum.intStream</td>
<td align="center">avgt</td>
<td align="center">5</td>
<td align="center">292.467</td>
<td align="center">Â± 10.987</td>
<td align="center">ns&#x2F;op</td>
</tr>
<tr>
<td align="center">T01Sum.boxed</td>
<td align="center">avgt</td>
<td align="center">5</td>
<td align="center">583.929</td>
<td align="center">Â± 57.338</td>
<td align="center">ns&#x2F;op</td>
</tr>
<tr>
<td align="center">T01Sum.stream</td>
<td align="center">avgt</td>
<td align="center">5</td>
<td align="center">5948.294</td>
<td align="center">Â± 2209.211</td>
<td align="center">ns&#x2F;op</td>
</tr>
</tbody></table>
<p>å…ƒç´ ä¸ªæ•° 10000</p>
<table>
<thead>
<tr>
<th align="center">Benchmark</th>
<th align="center">Mode</th>
<th align="center">Cnt</th>
<th align="center">Score (ns&#x2F;op)</th>
<th align="center">Error (ns&#x2F;op)</th>
<th align="center">Units</th>
</tr>
</thead>
<tbody><tr>
<td align="center">T01Sum.primitive</td>
<td align="center">avgt</td>
<td align="center">5</td>
<td align="center">2681.651</td>
<td align="center">Â± 12.614</td>
<td align="center">ns&#x2F;op</td>
</tr>
<tr>
<td align="center">T01Sum.intStream</td>
<td align="center">avgt</td>
<td align="center">5</td>
<td align="center">2718.408</td>
<td align="center">Â± 52.418</td>
<td align="center">ns&#x2F;op</td>
</tr>
<tr>
<td align="center">T01Sum.boxed</td>
<td align="center">avgt</td>
<td align="center">5</td>
<td align="center">6391.285</td>
<td align="center">Â± 358.154</td>
<td align="center">ns&#x2F;op</td>
</tr>
<tr>
<td align="center">T01Sum.stream</td>
<td align="center">avgt</td>
<td align="center">5</td>
<td align="center">44414.884</td>
<td align="center">Â± 3213.055</td>
<td align="center">ns&#x2F;op</td>
</tr>
</tbody></table>
<p>ç»“è®ºï¼š</p>
<ul>
<li>åšæ•°å€¼è®¡ç®—ï¼Œä¼˜å…ˆæŒ‘é€‰åŸºæœ¬æµï¼ˆIntStream ç­‰ï¼‰åœ¨æ•°æ®é‡è¾ƒå¤§æ—¶ï¼Œå®ƒçš„æ€§èƒ½å·²ç»éå¸¸æ¥è¿‘æ™®é€š for å¾ªç¯</li>
<li>åšæ•°å€¼è®¡ç®—ï¼Œåº”å½“é¿å…æ™®é€šæµï¼ˆStreamï¼‰æ€§èƒ½ä¸å…¶å®ƒå‡ ç§ç›¸æ¯”ï¼Œæ…¢ä¸€ä¸ªæ•°é‡çº§</li>
</ul>
<blockquote>
<p>æ±‚æœ€å¤§å€¼</p>
</blockquote>
<p>å…¶ä¸­ï¼ˆåŸå§‹æ•°æ®éƒ½æ˜¯ intï¼Œæ²¡æœ‰åŒ…è£…ç±»ï¼‰</p>
<ul>
<li>custom è‡ªå®šä¹‰å¤šçº¿ç¨‹å¹¶è¡Œæ±‚æœ€å¤§å€¼</li>
<li>parallel å¹¶è¡Œæµæ±‚æœ€å¤§å€¼</li>
<li>sequence ä¸²è¡Œæµæ±‚æœ€å¤§å€¼</li>
<li>primitive loop å¾ªç¯æ±‚æœ€å¤§å€¼</li>
</ul>
<p>å…ƒç´ ä¸ªæ•° 100</p>
<table>
<thead>
<tr>
<th align="center">Benchmark</th>
<th align="center">Mode</th>
<th align="center">Cnt</th>
<th align="center">Score (ns&#x2F;op)</th>
<th align="center">Error (ns&#x2F;op)</th>
<th align="center">Units</th>
</tr>
</thead>
<tbody><tr>
<td align="center">T02Parallel.custom</td>
<td align="center">avgt</td>
<td align="center">5</td>
<td align="center">39619.796</td>
<td align="center">Â± 1263.036</td>
<td align="center">ns&#x2F;op</td>
</tr>
<tr>
<td align="center">T02Parallel.parallel</td>
<td align="center">avgt</td>
<td align="center">5</td>
<td align="center">6754.239</td>
<td align="center">Â± 79.894</td>
<td align="center">ns&#x2F;op</td>
</tr>
<tr>
<td align="center">T02Parallel.primitive</td>
<td align="center">avgt</td>
<td align="center">5</td>
<td align="center">29.538</td>
<td align="center">Â± 3.056</td>
<td align="center">ns&#x2F;op</td>
</tr>
<tr>
<td align="center">T02Parallel.sequence</td>
<td align="center">avgt</td>
<td align="center">5</td>
<td align="center">80.170</td>
<td align="center">Â± 1.940</td>
<td align="center">ns&#x2F;op</td>
</tr>
</tbody></table>
<p>å…ƒç´ ä¸ªæ•° 10000</p>
<table>
<thead>
<tr>
<th align="center">Benchmark</th>
<th align="center">Mode</th>
<th align="center">Cnt</th>
<th align="center">Score (ns&#x2F;op)</th>
<th align="center">Error (ns&#x2F;op)</th>
<th align="center">Units</th>
</tr>
</thead>
<tbody><tr>
<td align="center">T02Parallel.custom</td>
<td align="center">avgt</td>
<td align="center">5</td>
<td align="center">41656.093</td>
<td align="center">Â± 1537.237</td>
<td align="center">ns&#x2F;op</td>
</tr>
<tr>
<td align="center">T02Parallel.parallel</td>
<td align="center">avgt</td>
<td align="center">5</td>
<td align="center">11218.573</td>
<td align="center">Â± 1994.863</td>
<td align="center">ns&#x2F;op</td>
</tr>
<tr>
<td align="center">T02Parallel.primitive</td>
<td align="center">avgt</td>
<td align="center">5</td>
<td align="center">2217.562</td>
<td align="center">Â± 80.981</td>
<td align="center">ns&#x2F;op</td>
</tr>
<tr>
<td align="center">T02Parallel.sequence</td>
<td align="center">avgt</td>
<td align="center">5</td>
<td align="center">5682.482</td>
<td align="center">Â± 264.645</td>
<td align="center">ns&#x2F;op</td>
</tr>
</tbody></table>
<p>å…ƒç´ ä¸ªæ•° 1000000</p>
<table>
<thead>
<tr>
<th align="center">Benchmark</th>
<th align="center">Mode</th>
<th align="center">Cnt</th>
<th align="center">Score (ns&#x2F;op)</th>
<th align="center">Error (ns&#x2F;op)</th>
<th align="center">Units</th>
</tr>
</thead>
<tbody><tr>
<td align="center">T02Parallel.custom</td>
<td align="center">avgt</td>
<td align="center">5</td>
<td align="center">194984.564</td>
<td align="center">Â± 25794.484</td>
<td align="center">ns&#x2F;op</td>
</tr>
<tr>
<td align="center">T02Parallel.parallel</td>
<td align="center">avgt</td>
<td align="center">5</td>
<td align="center">298940.794</td>
<td align="center">Â± 31944.959</td>
<td align="center">ns&#x2F;op</td>
</tr>
<tr>
<td align="center">T02Parallel.primitive</td>
<td align="center">avgt</td>
<td align="center">5</td>
<td align="center">325178.873</td>
<td align="center">Â± 81314.981</td>
<td align="center">ns&#x2F;op</td>
</tr>
<tr>
<td align="center">T02Parallel.sequence</td>
<td align="center">avgt</td>
<td align="center">5</td>
<td align="center">618274.062</td>
<td align="center">Â± 5867.812</td>
<td align="center">ns&#x2F;op</td>
</tr>
</tbody></table>
<p>ç»“è®ºï¼š</p>
<ul>
<li>å¹¶è¡Œæµç›¸å¯¹è‡ªå·±ç”¨å¤šçº¿ç¨‹å®ç°åˆ†è€Œæ²»ä¹‹æ›´ç®€æ´</li>
<li>å¹¶è¡Œæµåªæœ‰åœ¨æ•°æ®é‡éå¸¸å¤§æ—¶ï¼Œæ‰èƒ½å……åˆ†å‘åŠ›ï¼Œæ•°æ®é‡å°‘ï¼Œè¿˜ä¸å¦‚ç”¨ä¸²è¡Œæµ</li>
</ul>
<blockquote>
<p>å¹¶è¡Œ(å‘)æ”¶é›†</p>
</blockquote>
<p>å…ƒç´ ä¸ªæ•° 100</p>
<table>
<thead>
<tr>
<th align="center">Benchmark</th>
<th align="center">Mode</th>
<th align="center">Cnt</th>
<th align="center">Score (ns&#x2F;op)</th>
<th align="center">Error (ns&#x2F;op)</th>
<th align="center">Units</th>
</tr>
</thead>
<tbody><tr>
<td align="center">loop1</td>
<td align="center">avgt</td>
<td align="center">5</td>
<td align="center">1312.389</td>
<td align="center">Â±  90.683</td>
<td align="center">ns&#x2F;op</td>
</tr>
<tr>
<td align="center">loop2</td>
<td align="center">avgt</td>
<td align="center">5</td>
<td align="center">1776.391</td>
<td align="center">Â± 255.271</td>
<td align="center">ns&#x2F;op</td>
</tr>
<tr>
<td align="center">sequence</td>
<td align="center">avgt</td>
<td align="center">5</td>
<td align="center">1727.739</td>
<td align="center">Â±  28.821</td>
<td align="center">ns&#x2F;op</td>
</tr>
<tr>
<td align="center">parallelNoConcurrent</td>
<td align="center">avgt</td>
<td align="center">5</td>
<td align="center">27654.004</td>
<td align="center">Â± 496.970</td>
<td align="center">ns&#x2F;op</td>
</tr>
<tr>
<td align="center">parallelConcurrent</td>
<td align="center">avgt</td>
<td align="center">5</td>
<td align="center">16320.113</td>
<td align="center">Â± 344.766</td>
<td align="center">ns&#x2F;op</td>
</tr>
</tbody></table>
<p>å…ƒç´ ä¸ªæ•° 10000</p>
<table>
<thead>
<tr>
<th align="center">Benchmark</th>
<th align="center">Mode</th>
<th align="center">Cnt</th>
<th align="center">Score (ns&#x2F;op)</th>
<th align="center">Error (ns&#x2F;op)</th>
<th align="center">Units</th>
</tr>
</thead>
<tbody><tr>
<td align="center">loop1</td>
<td align="center">avgt</td>
<td align="center">5</td>
<td align="center">211526.546</td>
<td align="center">Â± 13549.703</td>
<td align="center">ns&#x2F;op</td>
</tr>
<tr>
<td align="center">loop2</td>
<td align="center">avgt</td>
<td align="center">5</td>
<td align="center">203794.146</td>
<td align="center">Â± 3525.972</td>
<td align="center">ns&#x2F;op</td>
</tr>
<tr>
<td align="center">sequence</td>
<td align="center">avgt</td>
<td align="center">5</td>
<td align="center">237688.651</td>
<td align="center">Â±  7593.483</td>
<td align="center">ns&#x2F;op</td>
</tr>
<tr>
<td align="center">parallelNoConcurrent</td>
<td align="center">avgt</td>
<td align="center">5</td>
<td align="center">527203.976</td>
<td align="center">Â±  3496.107</td>
<td align="center">ns&#x2F;op</td>
</tr>
<tr>
<td align="center">parallelConcurrent</td>
<td align="center">avgt</td>
<td align="center">5</td>
<td align="center">369630.728</td>
<td align="center">Â± 20549.731</td>
<td align="center">ns&#x2F;op</td>
</tr>
</tbody></table>
<p>å…ƒç´ ä¸ªæ•° 1000000</p>
<table>
<thead>
<tr>
<th align="center">Benchmark</th>
<th align="center">Mode</th>
<th align="center">Cnt</th>
<th align="center">Score (ms&#x2F;op)</th>
<th align="center">Error (ms&#x2F;op)</th>
<th align="center">Units</th>
</tr>
</thead>
<tbody><tr>
<td align="center">loop1</td>
<td align="center">avgt</td>
<td align="center">5</td>
<td align="center">69.154</td>
<td align="center">Â± 3.456</td>
<td align="center">ms&#x2F;op</td>
</tr>
<tr>
<td align="center">loop2</td>
<td align="center">avgt</td>
<td align="center">5</td>
<td align="center">83.815</td>
<td align="center">Â± 2.307</td>
<td align="center">ms&#x2F;op</td>
</tr>
<tr>
<td align="center">sequence</td>
<td align="center">avgt</td>
<td align="center">5</td>
<td align="center">103.585</td>
<td align="center">Â± 0.834</td>
<td align="center">ns&#x2F;op</td>
</tr>
<tr>
<td align="center">parallelNoConcurrent</td>
<td align="center">avgt</td>
<td align="center">5</td>
<td align="center">167.032</td>
<td align="center">Â± 15.406</td>
<td align="center">ms&#x2F;op</td>
</tr>
<tr>
<td align="center">parallelConcurrent</td>
<td align="center">avgt</td>
<td align="center">5</td>
<td align="center">52.326</td>
<td align="center">Â± 1.501</td>
<td align="center">ms&#x2F;op</td>
</tr>
</tbody></table>
<p>ç»“è®ºï¼š</p>
<ul>
<li>sequence æ˜¯ä¸€ä¸ªå®¹å™¨å•çº¿ç¨‹æ”¶é›†ï¼Œæ•°æ®é‡å°‘æ—¶æ€§èƒ½å ä¼˜</li>
<li>parallelNoConcurrent æ˜¯å¤šä¸ªå®¹å™¨å¤šçº¿ç¨‹å¹¶è¡Œæ”¶é›†ï¼Œæ—¶é—´åº”è¯¥èŠ±è´¹åœ¨åˆå¹¶å®¹å™¨ä¸Šï¼Œæ€§èƒ½æœ€å·®</li>
<li>parallelConcurrent æ˜¯ä¸€ä¸ªå®¹å™¨å¤šçº¿ç¨‹å¹¶å‘æ”¶é›†ï¼Œåœ¨æ•°æ®é‡å¤§æ—¶æ€§èƒ½è¾ƒä¼˜</li>
</ul>
<blockquote>
<p>MethodHandle æ€§èƒ½</p>
</blockquote>
<p>æ­£å¸¸æ–¹æ³•è°ƒç”¨ã€åå°„ã€MethodHandleã€Lambda çš„æ€§èƒ½å¯¹æ¯”</p>
<table>
<thead>
<tr>
<th align="center">Benchmark</th>
<th align="center">Mode</th>
<th align="center">Cnt</th>
<th align="center">Score</th>
<th align="center">Error</th>
<th align="center">Units</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Sample2.lambda</td>
<td align="center">thrpt</td>
<td align="center">5</td>
<td align="center">389307532.881</td>
<td align="center">Â± 332213073.039</td>
<td align="center">ops&#x2F;s</td>
</tr>
<tr>
<td align="center">Sample2.method</td>
<td align="center">thrpt</td>
<td align="center">5</td>
<td align="center">157556577.611</td>
<td align="center">Â± 4048306.620</td>
<td align="center">ops&#x2F;s</td>
</tr>
<tr>
<td align="center">Sample2.origin</td>
<td align="center">thrpt</td>
<td align="center">5</td>
<td align="center">413287866.949</td>
<td align="center">Â± 65182730.966</td>
<td align="center">ops&#x2F;s</td>
</tr>
<tr>
<td align="center">Sample2.reflection</td>
<td align="center">thrpt</td>
<td align="center">5</td>
<td align="center">91640751.456</td>
<td align="center">Â± 37969233.369</td>
<td align="center">ops&#x2F;s</td>
</tr>
</tbody></table>
<h1 id="4-å®é™…åº”ç”¨"><a href="#4-å®é™…åº”ç”¨" class="headerlink" title="4. å®é™…åº”ç”¨"></a>4. å®é™…åº”ç”¨</h1><h2 id="4-1-æ•°æ®ç»Ÿè®¡åˆ†æ"><a href="#4-1-æ•°æ®ç»Ÿè®¡åˆ†æ" class="headerlink" title="4.1 æ•°æ®ç»Ÿè®¡åˆ†æ"></a>4.1 æ•°æ®ç»Ÿè®¡åˆ†æ</h2><blockquote>
<p>æ¯æœˆçš„é”€å”®é‡</p>
</blockquote>
<p>ç»“æœåº”ä¸º</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">1970-01 è®¢å•æ•°1307</span><br><span class="line">2020-01 è®¢å•æ•°14270</span><br><span class="line">2020-02 è®¢å•æ•°17995</span><br><span class="line">2020-03 è®¢å•æ•°18688</span><br><span class="line">2020-04 è®¢å•æ•°11868</span><br><span class="line">2020-05 è®¢å•æ•°40334</span><br><span class="line">2020-06 è®¢å•æ•°41364</span><br><span class="line">2020-07 è®¢å•æ•°76418</span><br><span class="line">2020-08 è®¢å•æ•°100007</span><br><span class="line">2020-09 è®¢å•æ•°70484</span><br><span class="line">2020-10 è®¢å•æ•°104063</span><br><span class="line">2020-11 è®¢å•æ•°66060</span><br></pre></td></tr></table></figure>

<ul>
<li>å…¶ä¸­ 1970-01 åº”è¯¥æ˜¯æ•°æ®çš„é—®é¢˜</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">lines.skip(<span class="number">1</span>)</span><br><span class="line">    .map(l -&gt; l.split(<span class="string">&quot;,&quot;</span>))</span><br><span class="line">    .collect(groupingBy(a -&gt; YearMonth.from(formatter.parse(a[TIME])), </span><br><span class="line">                        TreeMap::<span class="keyword">new</span>, counting()))</span><br><span class="line">    .forEach((k, v) -&gt; &#123;</span><br><span class="line">        System.out.println(k + <span class="string">&quot; è®¢å•æ•° &quot;</span> + v);</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>é”€é‡æœ€é«˜çš„æœˆä»½</p>
</blockquote>
<p>ç»“æœåº”ä¸º</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">1970-01 è®¢å•æ•°1307</span><br><span class="line">2020-01 è®¢å•æ•°14270</span><br><span class="line">2020-02 è®¢å•æ•°17995</span><br><span class="line">2020-03 è®¢å•æ•°18688</span><br><span class="line">2020-04 è®¢å•æ•°11868</span><br><span class="line">2020-05 è®¢å•æ•°40334</span><br><span class="line">2020-06 è®¢å•æ•°41364</span><br><span class="line">2020-07 è®¢å•æ•°76418</span><br><span class="line">2020-08 è®¢å•æ•°100007</span><br><span class="line">2020-09 è®¢å•æ•°70484</span><br><span class="line">2020-10 è®¢å•æ•°104063  *</span><br><span class="line">2020-11 è®¢å•æ•°66060</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">lines.skip(<span class="number">1</span>)</span><br><span class="line">    .map(l -&gt; l.split(<span class="string">&quot;,&quot;</span>))</span><br><span class="line">    .collect(groupingBy(a -&gt; YearMonth.from(formatter.parse(a[TIME])), counting()))</span><br><span class="line">    .entrySet()</span><br><span class="line">    .stream()</span><br><span class="line">    .max(Comparator.comparingLong(Map.Entry::getValue))</span><br><span class="line">    <span class="comment">// ä¹Ÿå¯ä»¥ç”¨ Map.Entry.comparingByValue()</span></span><br><span class="line">    .orElse(<span class="literal">null</span>);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ±‚é”€é‡æœ€é«˜çš„å•†å“</p>
</blockquote>
<p>ç»“æœåº”ä¸º</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1515966223517846928=2746</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">lines.skip(<span class="number">1</span>)</span><br><span class="line">    .map(l -&gt; l.split(<span class="string">&quot;,&quot;</span>))</span><br><span class="line">    .collect(groupingBy(a -&gt; a[PRODUCT_ID], counting()))</span><br><span class="line">    .entrySet()</span><br><span class="line">    .stream()</span><br><span class="line">    .max(Comparator.comparingLong(Map.Entry::getValue))</span><br><span class="line">    .orElse(<span class="literal">null</span>);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä¸‹å•æœ€å¤šçš„å‰10ç”¨æˆ·</p>
</blockquote>
<p>ç»“æœåº”ä¸º</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">1.515915625512423e+18 è®¢å•æ•°1092</span><br><span class="line">1.5159156255121183e+18 è®¢å•æ•°1073</span><br><span class="line">1.515915625512378e+18 è®¢å•æ•°1040</span><br><span class="line">1.515915625512377e+18 è®¢å•æ•°1028</span><br><span class="line">1.5159156255136955e+18 è®¢å•æ•°1002</span><br><span class="line">1.515915625512422e+18 è®¢å•æ•°957</span><br><span class="line">1.515915625513446e+18 è®¢å•æ•°957</span><br><span class="line">1.515915625513447e+18 è®¢å•æ•°928</span><br><span class="line">1.515915625514598e+18 è®¢å•æ•°885</span><br><span class="line">1.5159156255147195e+18 è®¢å•æ•°869</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">lines.skip(<span class="number">1</span>)</span><br><span class="line">    .map(l -&gt; l.split(<span class="string">&quot;,&quot;</span>))</span><br><span class="line">    .collect(groupingBy(a -&gt; a[USER_ID], counting()))</span><br><span class="line">    .entrySet()</span><br><span class="line">    .stream()</span><br><span class="line">    .sorted(Map.Entry.&lt;String, Long&gt;comparingByValue().reversed())</span><br><span class="line">    .limit(<span class="number">10</span>).forEach(e -&gt; &#123;</span><br><span class="line">        System.out.println(e.getKey() + <span class="string">&quot; è®¢å•æ•° &quot;</span> + e.getValue());</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure>

<p>æˆ–è€…</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">MyQueue</span>&lt;E&gt; <span class="keyword">extends</span> <span class="title class_">PriorityQueue</span>&lt;E&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> max;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyQueue</span><span class="params">(Comparator&lt;? <span class="built_in">super</span> E&gt; comparator, <span class="type">int</span> max)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(comparator);</span><br><span class="line">        <span class="built_in">this</span>.max = max;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">offer</span><span class="params">(E e)</span> &#123;</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">r</span> <span class="operator">=</span> <span class="built_in">super</span>.offer(e);</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.size() &gt; max) &#123;</span><br><span class="line">            <span class="built_in">this</span>.poll();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">lines.skip(<span class="number">1</span>)</span><br><span class="line">    .map(l -&gt; l.split(<span class="string">&quot;,&quot;</span>))</span><br><span class="line">    .collect(groupingBy(a -&gt; a[USER_ID], counting()))</span><br><span class="line">    .entrySet()</span><br><span class="line">    .stream()</span><br><span class="line">    .parallel()</span><br><span class="line">    .collect(</span><br><span class="line">            () -&gt; <span class="keyword">new</span> <span class="title class_">MyQueue</span>&lt;&gt;(Map.Entry.comparingByValue(), <span class="number">10</span>),</span><br><span class="line">            MyQueue::offer,</span><br><span class="line">            AbstractQueue::addAll</span><br><span class="line">    );</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ¯ä¸ªåœ°åŒºä¸‹å•æœ€å¤šçš„ç”¨æˆ·</p>
</blockquote>
<p>ç»“æœåº”ä¸ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">ä¸Šæµ·=Optional[1.5159156255127636e+18=634]</span><br><span class="line">å¹¿ä¸œ=Optional[1.515915625512377e+18=1028]</span><br><span class="line">å¤©æ´¥=Optional[1.5159156255120858e+18=530]</span><br><span class="line">å››å·=Optional[1.5159156255121551e+18=572]</span><br><span class="line">æµ™æ±Ÿ=Optional[1.5159156255121183e+18=564]</span><br><span class="line">é‡åº†=Optional[1.515915625512764e+18=632]</span><br><span class="line">æ¹–åŒ—=Optional[1.5159156255121183e+18=509]</span><br><span class="line">æ¹–å—=Optional[1.5159156255120548e+18=545]</span><br><span class="line">æ±Ÿè‹=Optional[1.5159156255122386e+18=551]</span><br><span class="line">æµ·å—=Optional[1.5159156255121178e+18=556]</span><br><span class="line">åŒ—äº¬=Optional[1.5159156255128172e+18=584]</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">lines.skip(<span class="number">1</span>)</span><br><span class="line">    .map(line -&gt; line.split(<span class="string">&quot;,&quot;</span>))</span><br><span class="line">    .collect(groupingBy(array -&gt; array[USER_REGION], </span><br><span class="line">                        groupingBy(array -&gt; array[USER_ID], counting())))</span><br><span class="line">    .entrySet().stream()</span><br><span class="line">    .map(e -&gt; Map.entry(</span><br><span class="line">            e.getKey(),</span><br><span class="line">            e.getValue().entrySet().stream().max(Map.Entry.comparingByValue())</span><br><span class="line">    ))</span><br><span class="line">    .forEach(System.out::println);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ¯ä¸ªåœ°åŒºä¸‹å•æœ€å¤šçš„å‰3ç”¨æˆ·</p>
</blockquote>
<p>ç»“æœåº”ä¸º</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">ä¸Šæµ·</span><br><span class="line">--------------------------</span><br><span class="line">1.5159156255127636e+18=634</span><br><span class="line">1.515915625512118e+18=583</span><br><span class="line">1.515915625512422e+18=561</span><br><span class="line">å¹¿ä¸œ</span><br><span class="line">--------------------------</span><br><span class="line">1.515915625512377e+18=1028</span><br><span class="line">1.5159156255121544e+18=572</span><br><span class="line">1.5159156255120845e+18=571</span><br><span class="line">å¤©æ´¥</span><br><span class="line">--------------------------</span><br><span class="line">1.5159156255120858e+18=530</span><br><span class="line">1.5159156255122383e+18=504</span><br><span class="line">1.5159156255123333e+18=481</span><br><span class="line">å››å·</span><br><span class="line">--------------------------</span><br><span class="line">1.5159156255121551e+18=572</span><br><span class="line">1.5159156255123768e+18=568</span><br><span class="line">1.515915625512055e+18=552</span><br><span class="line">æµ™æ±Ÿ</span><br><span class="line">--------------------------</span><br><span class="line">1.5159156255121183e+18=564</span><br><span class="line">1.515915625513058e+18=520</span><br><span class="line">1.515915625512423e+18=513</span><br><span class="line">é‡åº†</span><br><span class="line">--------------------------</span><br><span class="line">1.515915625512764e+18=632</span><br><span class="line">1.5159156255121188e+18=572</span><br><span class="line">1.515915625512085e+18=562</span><br><span class="line">æ¹–åŒ—</span><br><span class="line">--------------------------</span><br><span class="line">1.5159156255121183e+18=509</span><br><span class="line">1.515915625512818e+18=508</span><br><span class="line">1.5159156255148017e+18=386</span><br><span class="line">æ¹–å—</span><br><span class="line">--------------------------</span><br><span class="line">1.5159156255120548e+18=545</span><br><span class="line">1.5159156255120855e+18=543</span><br><span class="line">1.5159156255134449e+18=511</span><br><span class="line">æ±Ÿè‹</span><br><span class="line">--------------------------</span><br><span class="line">1.5159156255122386e+18=551</span><br><span class="line">1.5159156255122842e+18=541</span><br><span class="line">1.5159156255120842e+18=499</span><br><span class="line">æµ·å—</span><br><span class="line">--------------------------</span><br><span class="line">1.5159156255121178e+18=556</span><br><span class="line">1.5159156255128174e+18=547</span><br><span class="line">1.5159156255122022e+18=545</span><br><span class="line">åŒ—äº¬</span><br><span class="line">--------------------------</span><br><span class="line">1.5159156255128172e+18=584</span><br><span class="line">1.515915625512423e+18=579</span><br><span class="line">1.5159156255123786e+18=558</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">lines.skip(<span class="number">1</span>)</span><br><span class="line">    .map(l -&gt; l.split(<span class="string">&quot;,&quot;</span>))</span><br><span class="line">    .collect(groupingBy(a -&gt; a[USER_REGION], groupingBy(a -&gt; a[USER_ID], counting())))</span><br><span class="line">    <span class="comment">/*.forEach((k,v)-&gt;&#123;</span></span><br><span class="line"><span class="comment">        System.out.println(k);</span></span><br><span class="line"><span class="comment">        System.out.println(&quot;---------------&quot;);</span></span><br><span class="line"><span class="comment">        v.forEach((x,y)-&gt;&#123;</span></span><br><span class="line"><span class="comment">            System.out.println(x + &quot;:&quot; + y);</span></span><br><span class="line"><span class="comment">        &#125;);</span></span><br><span class="line"><span class="comment">    &#125;);*/</span></span><br><span class="line">    .entrySet()</span><br><span class="line">    .stream()</span><br><span class="line">    .map(e -&gt;</span><br><span class="line">        Map.entry(</span><br><span class="line">            e.getKey(),</span><br><span class="line">            e.getValue().entrySet().stream()</span><br><span class="line">                .sorted(Map.Entry.&lt;String, Long&gt;comparingByValue().reversed())</span><br><span class="line">            	.limit(<span class="number">3</span>)</span><br><span class="line">            	.toList()</span><br><span class="line">        )</span><br><span class="line">    ).forEach(e -&gt; &#123;</span><br><span class="line">        System.out.println(e.getKey());</span><br><span class="line">        System.out.println(<span class="string">&quot;--------------------------&quot;</span>);</span><br><span class="line">        e.getValue().forEach(System.out::println);</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æŒ‰ç±»åˆ«ç»Ÿè®¡é”€é‡</p>
</blockquote>
<p>ç»“æœåº”ä¸º</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line">accessories.bag è®¢å•æ•° 3063</span><br><span class="line">accessories.umbrella è®¢å•æ•° 33</span><br><span class="line">apparel.costume è®¢å•æ•° 2</span><br><span class="line">apparel.glove è®¢å•æ•° 1942</span><br><span class="line">apparel.shirt è®¢å•æ•° 235</span><br><span class="line">apparel.shoes è®¢å•æ•° 2</span><br><span class="line">apparel.sock è®¢å•æ•° 21</span><br><span class="line">apparel.trousers è®¢å•æ•° 99</span><br><span class="line">apparel.tshirt è®¢å•æ•° 372</span><br><span class="line">appliances.environment.air_conditioner è®¢å•æ•° 7379</span><br><span class="line">appliances.environment.air_heater è®¢å•æ•° 2599</span><br><span class="line">appliances.environment.climate è®¢å•æ•° 101</span><br><span class="line">appliances.environment.fan è®¢å•æ•° 3855</span><br><span class="line">appliances.environment.vacuum è®¢å•æ•° 15971</span><br><span class="line">appliances.environment.water_heater è®¢å•æ•° 3644</span><br><span class="line">appliances.iron è®¢å•æ•° 8249</span><br><span class="line">appliances.ironing_board è®¢å•æ•° 2128</span><br><span class="line">appliances.kitchen.blender è®¢å•æ•° 8672</span><br><span class="line">appliances.kitchen.coffee_grinder è®¢å•æ•° 811</span><br><span class="line">appliances.kitchen.coffee_machine è®¢å•æ•° 1250</span><br><span class="line">appliances.kitchen.dishwasher è®¢å•æ•° 2663</span><br><span class="line">appliances.kitchen.fryer è®¢å•æ•° 97</span><br><span class="line">appliances.kitchen.grill è®¢å•æ•° 1579</span><br><span class="line">appliances.kitchen.hood è®¢å•æ•° 9045</span><br><span class="line">appliances.kitchen.juicer è®¢å•æ•° 1187</span><br><span class="line">appliances.kitchen.kettle è®¢å•æ•° 12740</span><br><span class="line">appliances.kitchen.meat_grinder è®¢å•æ•° 4520</span><br><span class="line">appliances.kitchen.microwave è®¢å•æ•° 7615</span><br><span class="line">appliances.kitchen.mixer è®¢å•æ•° 2610</span><br><span class="line">appliances.kitchen.oven è®¢å•æ•° 4000</span><br><span class="line">appliances.kitchen.refrigerators è®¢å•æ•° 20259</span><br><span class="line">appliances.kitchen.steam_cooker è®¢å•æ•° 464</span><br><span class="line">appliances.kitchen.toster è®¢å•æ•° 1381</span><br><span class="line">appliances.kitchen.washer è®¢å•æ•° 14563</span><br><span class="line">appliances.personal.hair_cutter è®¢å•æ•° 2716</span><br><span class="line">appliances.personal.massager è®¢å•æ•° 1724</span><br><span class="line">appliances.personal.scales è®¢å•æ•° 6727</span><br><span class="line">appliances.sewing_machine è®¢å•æ•° 1576</span><br><span class="line">appliances.steam_cleaner è®¢å•æ•° 119</span><br><span class="line">auto.accessories.alarm è®¢å•æ•° 252</span><br><span class="line">auto.accessories.anti_freeze è®¢å•æ•° 109</span><br><span class="line">auto.accessories.compressor è®¢å•æ•° 276</span><br><span class="line">auto.accessories.player è®¢å•æ•° 117</span><br><span class="line">auto.accessories.radar è®¢å•æ•° 80</span><br><span class="line">auto.accessories.videoregister è®¢å•æ•° 533</span><br><span class="line">computers.components.cdrw è®¢å•æ•° 158</span><br><span class="line">computers.components.cooler è®¢å•æ•° 3377</span><br><span class="line">computers.components.cpu è®¢å•æ•° 4147</span><br><span class="line">computers.components.hdd è®¢å•æ•° 5054</span><br><span class="line">computers.components.memory è®¢å•æ•° 1597</span><br><span class="line">computers.components.motherboard è®¢å•æ•° 860</span><br><span class="line">computers.components.power_supply è®¢å•æ•° 986</span><br><span class="line">computers.components.sound_card è®¢å•æ•° 26</span><br><span class="line">computers.components.videocards è®¢å•æ•° 1190</span><br><span class="line">computers.desktop è®¢å•æ•° 1041</span><br><span class="line">computers.ebooks è®¢å•æ•° 397</span><br><span class="line">computers.gaming è®¢å•æ•° 164</span><br><span class="line">computers.network.router è®¢å•æ•° 6473</span><br><span class="line">computers.notebook è®¢å•æ•° 25866</span><br><span class="line">computers.peripherals.camera è®¢å•æ•° 1041</span><br><span class="line">computers.peripherals.joystick è®¢å•æ•° 1192</span><br><span class="line">computers.peripherals.keyboard è®¢å•æ•° 3803</span><br><span class="line">computers.peripherals.monitor è®¢å•æ•° 3272</span><br><span class="line">computers.peripherals.mouse è®¢å•æ•° 12664</span><br><span class="line">computers.peripherals.printer è®¢å•æ•° 3458</span><br><span class="line">computers.peripherals.scanner è®¢å•æ•° 74</span><br><span class="line">construction.components.faucet è®¢å•æ•° 133</span><br><span class="line">construction.tools.drill è®¢å•æ•° 622</span><br><span class="line">construction.tools.generator è®¢å•æ•° 46</span><br><span class="line">construction.tools.heater è®¢å•æ•° 348</span><br><span class="line">construction.tools.light è®¢å•æ•° 10</span><br><span class="line">construction.tools.pump è®¢å•æ•° 65</span><br><span class="line">construction.tools.saw è®¢å•æ•° 169</span><br><span class="line">construction.tools.screw è®¢å•æ•° 2408</span><br><span class="line">construction.tools.welding è®¢å•æ•° 183</span><br><span class="line">country_yard.cultivator è®¢å•æ•° 33</span><br><span class="line">country_yard.lawn_mower è®¢å•æ•° 111</span><br><span class="line">country_yard.watering è®¢å•æ•° 5</span><br><span class="line">country_yard.weather_station è®¢å•æ•° 53</span><br><span class="line">electronics.audio.acoustic è®¢å•æ•° 438</span><br><span class="line">electronics.audio.dictaphone è®¢å•æ•° 12</span><br><span class="line">electronics.audio.headphone è®¢å•æ•° 20084</span><br><span class="line">electronics.audio.microphone è®¢å•æ•° 1062</span><br><span class="line">electronics.audio.subwoofer è®¢å•æ•° 70</span><br><span class="line">electronics.calculator è®¢å•æ•° 35</span><br><span class="line">electronics.camera.photo è®¢å•æ•° 348</span><br><span class="line">electronics.camera.video è®¢å•æ•° 133</span><br><span class="line">electronics.clocks è®¢å•æ•° 6474</span><br><span class="line">electronics.smartphone è®¢å•æ•° 102365</span><br><span class="line">electronics.tablet è®¢å•æ•° 6395</span><br><span class="line">electronics.telephone è®¢å•æ•° 2437</span><br><span class="line">electronics.video.projector è®¢å•æ•° 114</span><br><span class="line">electronics.video.tv è®¢å•æ•° 17618</span><br><span class="line">furniture.bathroom.bath è®¢å•æ•° 232</span><br><span class="line">furniture.bathroom.toilet è®¢å•æ•° 44</span><br><span class="line">furniture.bedroom.bed è®¢å•æ•° 451</span><br><span class="line">furniture.bedroom.blanket è®¢å•æ•° 68</span><br><span class="line">furniture.bedroom.pillow è®¢å•æ•° 1882</span><br><span class="line">furniture.kitchen.chair è®¢å•æ•° 3084</span><br><span class="line">furniture.kitchen.table è®¢å•æ•° 11260</span><br><span class="line">furniture.living_room.cabinet è®¢å•æ•° 3117</span><br><span class="line">furniture.living_room.chair è®¢å•æ•° 1439</span><br><span class="line">furniture.living_room.shelving è®¢å•æ•° 2572</span><br><span class="line">furniture.living_room.sofa è®¢å•æ•° 401</span><br><span class="line">furniture.universal.light è®¢å•æ•° 22</span><br><span class="line">kids.bottles è®¢å•æ•° 63</span><br><span class="line">kids.carriage è®¢å•æ•° 41</span><br><span class="line">kids.dolls è®¢å•æ•° 379</span><br><span class="line">kids.fmcg.diapers è®¢å•æ•° 11</span><br><span class="line">kids.skates è®¢å•æ•° 1159</span><br><span class="line">kids.swing è®¢å•æ•° 8</span><br><span class="line">kids.toys è®¢å•æ•° 643</span><br><span class="line">medicine.tools.tonometer è®¢å•æ•° 1106</span><br><span class="line">sport.bicycle è®¢å•æ•° 569</span><br><span class="line">sport.diving è®¢å•æ•° 10</span><br><span class="line">sport.ski è®¢å•æ•° 17</span><br><span class="line">sport.snowboard è®¢å•æ•° 3</span><br><span class="line">sport.tennis è®¢å•æ•° 87</span><br><span class="line">sport.trainer è®¢å•æ•° 210</span><br><span class="line">stationery.battery è®¢å•æ•° 5210</span><br><span class="line">stationery.cartrige è®¢å•æ•° 2473</span><br><span class="line">stationery.paper è®¢å•æ•° 1085</span><br><span class="line">stationery.stapler è®¢å•æ•° 97</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">lines.skip(<span class="number">1</span>)</span><br><span class="line">       .map(l -&gt; l.split(<span class="string">&quot;,&quot;</span>))</span><br><span class="line">       .filter(a -&gt; !a[CATEGORY_CODE].isEmpty())</span><br><span class="line">       .collect(groupingBy(a -&gt; a[CATEGORY_CODE], TreeMap::<span class="keyword">new</span>, counting()))</span><br><span class="line">       .forEach((k, v) -&gt; &#123;</span><br><span class="line">           System.out.println(k + <span class="string">&quot; è®¢å•æ•° &quot;</span> + v);</span><br><span class="line">       &#125;);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æŒ‰ä¸€çº§ç±»åˆ«ç»Ÿè®¡é”€é‡</p>
</blockquote>
<p>ç»“æœåº”ä¸º</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">accessories è®¢å•æ•° 3096</span><br><span class="line">apparel è®¢å•æ•° 2673</span><br><span class="line">appliances è®¢å•æ•° 150244</span><br><span class="line">auto è®¢å•æ•° 1367</span><br><span class="line">computers è®¢å•æ•° 76840</span><br><span class="line">construction è®¢å•æ•° 3984</span><br><span class="line">country_yard è®¢å•æ•° 202</span><br><span class="line">electronics è®¢å•æ•° 157585</span><br><span class="line">furniture è®¢å•æ•° 24572</span><br><span class="line">kids è®¢å•æ•° 2304</span><br><span class="line">medicine è®¢å•æ•° 1106</span><br><span class="line">sport è®¢å•æ•° 896</span><br><span class="line">stationery è®¢å•æ•° 8865</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">lines.skip(<span class="number">1</span>)</span><br><span class="line">    .map(l -&gt; l.split(<span class="string">&quot;,&quot;</span>))</span><br><span class="line">    .filter(a -&gt; !a[CATEGORY_CODE].isEmpty())</span><br><span class="line">    .collect(groupingBy(TestData::firstCategory, TreeMap::<span class="keyword">new</span>, counting()))</span><br><span class="line">    .forEach((k, v) -&gt; &#123;</span><br><span class="line">        System.out.println(k + <span class="string">&quot; è®¢å•æ•° &quot;</span> + v);</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> String <span class="title function_">firstCategory</span><span class="params">(String[] a)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">category</span> <span class="operator">=</span> a[CATEGORY_CODE];</span><br><span class="line">    <span class="type">int</span> <span class="variable">dot</span> <span class="operator">=</span> category.indexOf(<span class="string">&quot;.&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> category.substring(<span class="number">0</span>, dot);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æŒ‰ä»·æ ¼åŒºé—´ç»Ÿè®¡é”€é‡</p>
</blockquote>
<ul>
<li>p &lt;100</li>
<li>100&lt;&#x3D; p &lt;500</li>
<li>500&lt;&#x3D;p&lt;1000</li>
<li>1000&lt;&#x3D;p</li>
</ul>
<p>ç»“æœåº”ä¸º</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[0,100)=291624</span><br><span class="line">[1000,âˆ)=14514</span><br><span class="line">[500,1000)=52857</span><br><span class="line">[100,500)=203863</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> String <span class="title function_">priceRange</span><span class="params">(Double price)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (price &lt; <span class="number">100</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;[0,100)&quot;</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (price &gt;= <span class="number">100</span> &amp;&amp; price &lt; <span class="number">500</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;[100,500)&quot;</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (price &gt;= <span class="number">500</span> &amp;&amp; price &lt; <span class="number">1000</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;[500,1000)&quot;</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;[1000,âˆ)&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">lines.skip(<span class="number">1</span>)</span><br><span class="line">    .map(line -&gt; line.split(<span class="string">&quot;,&quot;</span>))</span><br><span class="line">    .map(array -&gt; Double.parseDouble(array[PRICE]))</span><br><span class="line">    .collect(groupingBy(TestData::priceRange, counting()))</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä¸åŒå¹´é¾„æ®µå¥³æ€§æ‰€ä¸‹ä¸åŒç±»åˆ«è®¢å•</p>
</blockquote>
<ul>
<li>a &lt; 18</li>
<li>18 &lt;&#x3D; a &lt; 30</li>
<li>30 &lt;&#x3D; a &lt; 50</li>
<li>50 &lt;&#x3D; a</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[0,18)       accessories      81</span><br><span class="line">[0,18)       apparel          60</span><br><span class="line">[0,18)       appliances       4326</span><br><span class="line">[0,18)       computers        1984</span><br><span class="line">...</span><br><span class="line">[18,30)      accessories      491</span><br><span class="line">[18,30)      apparel          488</span><br><span class="line">[18,30)      appliances       25240</span><br><span class="line">[18,30)      computers        13076</span><br><span class="line">...</span><br><span class="line">[30,50)      accessories      890</span><br><span class="line">[30,50)      apparel          893</span><br><span class="line">[30,50)      appliances       42755</span><br><span class="line">[30,50)      computers        21490</span><br><span class="line">...</span><br><span class="line">[50,âˆ)       accessories      41</span><br><span class="line">[50,âˆ)       apparel          41</span><br><span class="line">[50,âˆ)       appliances       2255</span><br><span class="line">[50,âˆ)       computers        1109</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> String <span class="title function_">ageRange</span><span class="params">(String[] array)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">age</span> <span class="operator">=</span> Double.valueOf(array[USER_AGE]).intValue();</span><br><span class="line">    <span class="keyword">if</span> (age &lt; <span class="number">18</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;[0,18)&quot;</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (age &lt; <span class="number">30</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;[18,30)&quot;</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (age &lt; <span class="number">50</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;[30,50)&quot;</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;[50,âˆ)&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">lines.skip(<span class="number">1</span>)</span><br><span class="line">    .map(line -&gt; line.split(<span class="string">&quot;,&quot;</span>))</span><br><span class="line">    .filter(array -&gt; !array[CATEGORY_CODE].isEmpty())</span><br><span class="line">    .filter(array -&gt; array[USER_SEX].equals(<span class="string">&quot;å¥³&quot;</span>))</span><br><span class="line">    .collect(groupingBy(TestData::ageRange, </span><br><span class="line">                        groupingBy(TestData::firstCategory, TreeMap::<span class="keyword">new</span>, counting())))</span><br></pre></td></tr></table></figure>

<h2 id="4-2-å¼‚æ­¥å¤„ç†"><a href="#4-2-å¼‚æ­¥å¤„ç†" class="headerlink" title="4.2 å¼‚æ­¥å¤„ç†"></a>4.2 å¼‚æ­¥å¤„ç†</h2><p>è¦è®©ä¸€æ®µé€»è¾‘å¼‚æ­¥ï¼š</p>
<ul>
<li>éœ€è¦æœ‰ç‹¬ç«‹çº¿ç¨‹</li>
<li>é€»è¾‘éœ€è¦å°è£…è‡³å‡½æ•°å¯¹è±¡ï¼Œæ‰èƒ½è®©æ­¤é€»è¾‘ä¸æ˜¯ç«‹åˆ»æ‰§è¡Œï¼Œè€Œæ˜¯åœ¨æ–°çº¿ç¨‹ä¸­çš„æœªæ¥æŸåˆ»æ‰§è¡Œ</li>
</ul>
<p>ä¾‹ 1: ä½¿ç”¨<code>ExecutorService</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="type">Logger</span> <span class="variable">logger</span> <span class="operator">=</span> LoggerFactory.getLogger(<span class="string">&quot;Test&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> (<span class="type">ExecutorService</span> <span class="variable">service</span> <span class="operator">=</span> Executors.newFixedThreadPool(<span class="number">2</span>)) &#123;</span><br><span class="line">        logger.info(<span class="string">&quot;å¼€å§‹ç»Ÿè®¡&quot;</span>);</span><br><span class="line">        service.submit(() -&gt; monthlySalesReport(map-&gt;map.entrySet().forEach(e-&gt;logger.info(e.toString()))));</span><br><span class="line">        logger.info(<span class="string">&quot;æ‰§è¡Œå…¶å®ƒæ“ä½œ&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">monthlySalesReport</span><span class="params">(Consumer&lt;Map&lt;YearMonth, Long&gt;&gt; consumer)</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> (Stream&lt;String&gt; lines = Files.lines(Path.of(<span class="string">&quot;./data.txt&quot;</span>))) &#123;</span><br><span class="line">        Map&lt;YearMonth, Long&gt; collect = lines.skip(<span class="number">1</span>)</span><br><span class="line">                .map(line -&gt; line.split(<span class="string">&quot;,&quot;</span>))</span><br><span class="line">                .collect(groupingBy(array -&gt; YearMonth.from(formatter.parse(array[TIME])), TreeMap::<span class="keyword">new</span>, counting()));</span><br><span class="line">        consumer.accept(collect);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç¼ºç‚¹ï¼š</p>
<ul>
<li>æ˜¾å¼ä½¿ç”¨äº†çº¿ç¨‹æ± </li>
<li>å‡½æ•°å¯¹è±¡åµŒå¥—ä½¿ç”¨ï¼Œå¯è¯»æ€§å·®</li>
</ul>
<p>ä¾‹ 2: ä½¿ç”¨<code>CompletableFuture</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="type">Logger</span> <span class="variable">logger</span> <span class="operator">=</span> LoggerFactory.getLogger(<span class="string">&quot;Test&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">    logger.info(<span class="string">&quot;å¼€å§‹ç»Ÿè®¡&quot;</span>);</span><br><span class="line">    CompletableFuture</span><br><span class="line">        	.supplyAsync(() -&gt; monthlySalesReport())</span><br><span class="line">            .thenAccept(map -&gt; map.entrySet().forEach(e -&gt; logger.info(e.toString())));</span><br><span class="line">    logger.info(<span class="string">&quot;æ‰§è¡Œå…¶å®ƒæ“ä½œ&quot;</span>);</span><br><span class="line">    Thread.sleep(<span class="number">10000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> Map&lt;YearMonth, Long&gt; <span class="title function_">monthlySalesReport</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> (Stream&lt;String&gt; lines = Files.lines(Path.of(<span class="string">&quot;./data.txt&quot;</span>))) &#123;</span><br><span class="line">        Map&lt;YearMonth, Long&gt; collect = lines.skip(<span class="number">1</span>)</span><br><span class="line">                .map(line -&gt; line.split(<span class="string">&quot;,&quot;</span>))</span><br><span class="line">                .collect(groupingBy(array -&gt; YearMonth.from(formatter.parse(array[TIME])), TreeMap::<span class="keyword">new</span>, counting()));</span><br><span class="line">        <span class="keyword">return</span> collect;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4-3-æ¡†æ¶è®¾è®¡"><a href="#4-3-æ¡†æ¶è®¾è®¡" class="headerlink" title="4.3 æ¡†æ¶è®¾è®¡"></a>4.3 æ¡†æ¶è®¾è®¡</h2><ul>
<li>ä»€ä¹ˆæ˜¯æ¡†æ¶ï¼Ÿ<ul>
<li>åŠæˆå“è½¯ä»¶ï¼Œå¸®åŠ©å¼€å‘è€…å¿«é€Ÿæ„å»ºåº”ç”¨ç¨‹åº</li>
<li>æ¡†æ¶æä¾›çš„éƒ½æ˜¯å›ºå®š<strong>ä¸å˜çš„</strong>ã€<strong>å·²çŸ¥çš„</strong>ã€å¯ä»¥é‡ç”¨çš„ä»£ç </li>
<li>è€Œé‚£äº›æ¯ä¸ªåº”ç”¨ä¸åŒçš„ä¸šåŠ¡é€»è¾‘ï¼Œ<strong>å˜åŒ–çš„</strong>ã€<strong>æœªçŸ¥çš„</strong>éƒ¨åˆ†ï¼Œåˆ™åœ¨æ¡†æ¶å¤–ç”±å¼€å‘è€…è‡ªå·±å®ç°</li>
</ul>
</li>
</ul>
<h3 id="4-3-1-å°†æœªçŸ¥äº¤ç»™å­ç±»"><a href="#4-3-1-å°†æœªçŸ¥äº¤ç»™å­ç±»" class="headerlink" title="4.3.1 å°†æœªçŸ¥äº¤ç»™å­ç±»"></a>4.3.1 å°†æœªçŸ¥äº¤ç»™å­ç±»</h3><p>Spring å»¶è¿Ÿåˆ›å»º bean</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">classDiagram</span><br><span class="line"></span><br><span class="line">class DefaultSingletonBeanRegistry &#123;</span><br><span class="line">   - singletonObjects: Map</span><br><span class="line">   + getSingleton(name, factory)</span><br><span class="line">&#125;</span><br><span class="line">class AbstractAutowireCapableBeanFactory &#123;</span><br><span class="line">   # createBean(name, definition, args)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">DefaultSingletonBeanRegistry &lt;|-- AbstractAutowireCapableBeanFactory</span><br></pre></td></tr></table></figure>

<p>Spring ä¸­çš„å¾ˆå¤šç±»æœ‰éå¸¸å¤æ‚çš„ç»§æ‰¿å…³ç³»ï¼Œå¹¶ä¸”å®ƒä»¬åˆ†å·¥æ˜ç¡®ï¼ŒèŒè´£æ˜¯åˆ’åˆ†å¥½çš„ã€‚ä¾‹å¦‚ï¼š</p>
<p><code>DefaultSingletonBeanRegistry</code> æ˜¯çˆ¶ç±»ï¼Œå®ƒæœ‰ä¸ªèŒè´£æ˜¯ç¼“å­˜å•ä¾‹ beanï¼Œç”¨ä¸‹é¢æ–¹æ³•å®ç°</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> Object <span class="title function_">getSingleton</span><span class="params">(String beanName, ObjectFactory&lt;?&gt; factory)</span></span><br></pre></td></tr></table></figure>

<p>ä½†å¦‚ä½•åˆ›å»º <code>bean</code>ï¼Œè¿™ä¸ªçˆ¶ç±»æ˜¯ä¸çŸ¥é“çš„ï¼Œåˆ›å»º <code>bean</code> æ˜¯å­ç±» <code>AbstractAutowireCapableBeanFactory</code> çš„èŒè´£</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Object <span class="title function_">createBean</span><span class="params">(String beanName, RootBeanDefinition mbd, <span class="meta">@Nullable</span> Object[] args)</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>çˆ¶ç±»ä¸­ <code>getSingleton</code> çš„å†…éƒ¨å°±è¦ä½¿ç”¨ <code>singletonFactory</code> å‡½æ•°å¯¹è±¡æ¥è·å¾—åˆ›å»ºå¥½çš„å¯¹è±¡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> Object <span class="title function_">getSingleton</span><span class="params">(String beanName, ObjectFactory&lt;?&gt; singletonFactory)</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="type">Object</span> <span class="variable">singletonObject</span> <span class="operator">=</span> <span class="built_in">this</span>.singletonObjects.get(beanName);</span><br><span class="line">    <span class="keyword">if</span>(singletonObject == <span class="literal">null</span>) &#123;</span><br><span class="line">        ...</span><br><span class="line">        singletonObject = singletonFactory.getObject();</span><br><span class="line">        addSingleton(beanName, singletonObject);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æœ€åå­ç±»åˆ›å»ºå•ä¾‹ <code>bean</code> æ—¶ï¼Œä¼šæŠŠ <code>ObjectFactory</code> è¿™ä¸ªå‡½æ•°å¯¹è±¡ä¼ è¿›å»ï¼Œåˆ›å»ºå…¶å®ƒ <code>scope bean</code>ï¼Œä¸éœ€è¦ç”¨ <code>getSingleton</code> ç¼“å­˜</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> &lt;T&gt; T <span class="title function_">doGetBean</span><span class="params">(...)</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">if</span> (mbd.isSingleton()) &#123;</span><br><span class="line">        sharedInstance = getSingleton(beanName, () -&gt; &#123;</span><br><span class="line">            ...</span><br><span class="line">            <span class="keyword">return</span> createBean(beanName, mbd, args);</span><br><span class="line">        &#125;); </span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-3-2-å°†æœªçŸ¥äº¤ç»™ç”¨æˆ·"><a href="#4-3-2-å°†æœªçŸ¥äº¤ç»™ç”¨æˆ·" class="headerlink" title="4.3.2 å°†æœªçŸ¥äº¤ç»™ç”¨æˆ·"></a>4.3.2 å°†æœªçŸ¥äº¤ç»™ç”¨æˆ·</h3><blockquote>
<p>JdbcTemplate</p>
</blockquote>
<p>æ•°æ®è¡¨ï¼š</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student (</span><br><span class="line">   id <span class="type">int</span> <span class="keyword">primary</span> key auto_increment,</span><br><span class="line">   name <span class="type">varchar</span>(<span class="number">16</span>),</span><br><span class="line">   sex <span class="type">char</span>(<span class="number">1</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student <span class="keyword">values</span></span><br><span class="line">	(<span class="number">1</span>, <span class="string">&#x27;èµµä¸€ä¼¤&#x27;</span>, <span class="string">&#x27;ç”·&#x27;</span>),</span><br><span class="line">	(<span class="number">2</span>, <span class="string">&#x27;é’±äºŒè´¥&#x27;</span>, <span class="string">&#x27;ç”·&#x27;</span>),</span><br><span class="line">	(<span class="number">3</span>, <span class="string">&#x27;å­™ä¸‰æ¯&#x27;</span>, <span class="string">&#x27;ç”·&#x27;</span>),</span><br><span class="line">	(<span class="number">4</span>, <span class="string">&#x27;æå››æ‘§&#x27;</span>, <span class="string">&#x27;ç”·&#x27;</span>),</span><br><span class="line">	(<span class="number">5</span>, <span class="string">&#x27;å‘¨äº”è¾“&#x27;</span>, <span class="string">&#x27;ç”·&#x27;</span>),</span><br><span class="line">	(<span class="number">6</span>, <span class="string">&#x27;å´å…­ç ´&#x27;</span>, <span class="string">&#x27;ç”·&#x27;</span>),</span><br><span class="line">	(<span class="number">7</span>, <span class="string">&#x27;éƒ‘ä¸ƒç­&#x27;</span>, <span class="string">&#x27;ç”·&#x27;</span>),</span><br><span class="line">	(<span class="number">8</span>, <span class="string">&#x27;ç‹å…«è¡°&#x27;</span>, <span class="string">&#x27;ç”·&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>spring ä¸­ JdbcTemplate ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestJdbc</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">HikariDataSource</span> <span class="variable">dataSource</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HikariDataSource</span>();</span><br><span class="line">        dataSource.setJdbcUrl(<span class="string">&quot;jdbc:mysql://localhost:3306/test&quot;</span>);</span><br><span class="line">        dataSource.setUsername(<span class="string">&quot;root&quot;</span>);</span><br><span class="line">        dataSource.setPassword(<span class="string">&quot;root&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">JdbcTemplate</span> <span class="variable">template</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JdbcTemplate</span>(dataSource);</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select id,name,sex from student&quot;</span>;</span><br><span class="line">        template.query(sql, (rs, index) -&gt; &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">id</span> <span class="operator">=</span> rs.getInt(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">sex</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;sex&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Student</span>(id, name, sex);</span><br><span class="line">        &#125;).forEach(System.out::println);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">record</span> <span class="title class_">Student</span><span class="params">(<span class="type">int</span> id, String name, String sex)</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>å¯¹ query æ¥è®²ï¼Œå»ºç«‹æ•°æ®åº“è¿æ¥ï¼Œåˆ›å»º Statement å¯¹è±¡ï¼Œæ‰§è¡ŒæŸ¥è¯¢è¿™äº›æ­¥éª¤éƒ½æ˜¯å›ºå®šçš„</li>
<li>è€Œç»“æœè¦å¦‚ä½•ç”¨ java å¯¹è±¡å°è£…ï¼Œè¿™å¯¹æ¡†æ¶ä»£ç æ˜¯æœªçŸ¥çš„ï¼Œç”¨ <code>RowMapper</code> æ¥å£ä»£è¡¨ï¼Œå°†æ¥å®ƒçš„ lambda å®ç°å°†ç»“æœè½¬æ¢æˆéœ€è¦çš„ java å¯¹è±¡</li>
</ul>
<blockquote>
<p>ApplicationListener</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyEvent</span> <span class="keyword">extends</span> <span class="title class_">ApplicationEvent</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyEvent</span><span class="params">(Object source)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(source);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestExtend</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ConfigurableApplicationContext</span> <span class="variable">context</span> </span><br><span class="line">            <span class="operator">=</span> SpringApplication.run(TestExtend.class, args);</span><br><span class="line">        context.publishEvent(<span class="keyword">new</span> <span class="title class_">MyEvent</span>(<span class="string">&quot;context&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> ApplicationListener&lt;MyEvent&gt; <span class="title function_">myListener</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (event -&gt; System.out.println(<span class="string">&quot;æ”¶åˆ°äº‹ä»¶:&quot;</span> + event));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RestController</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">MyController</span> &#123;</span><br><span class="line">        <span class="meta">@Autowired</span></span><br><span class="line">        <span class="keyword">private</span> ApplicationContext context;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@GetMapping(&quot;/hello&quot;)</span></span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">()</span> &#123;</span><br><span class="line">            context.publishEvent(<span class="keyword">new</span> <span class="title class_">MyEvent</span>(<span class="string">&quot;controller&quot;</span>));</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>å¯¹ spring æ¥è®²ï¼Œå®ƒå¹¶ä¸çŸ¥é“å¦‚ä½•å¤„ç†äº‹ä»¶</li>
<li>å› æ­¤å¯ä»¥æä¾›ä¸€ä¸ªç±»å‹ä¸º ApplicationListener çš„ lambda å¯¹è±¡</li>
</ul>
<h3 id="4-3-3-å»¶è¿Ÿæ‹¼æ¥æ¡ä»¶"><a href="#4-3-3-å»¶è¿Ÿæ‹¼æ¥æ¡ä»¶" class="headerlink" title="4.3.3 å»¶è¿Ÿæ‹¼æ¥æ¡ä»¶"></a>4.3.3 å»¶è¿Ÿæ‹¼æ¥æ¡ä»¶</h3><blockquote>
<p>MybatisPlus</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@MapperScan</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestMyBatisPlus</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ConfigurableApplicationContext</span> <span class="variable">context</span> </span><br><span class="line">            <span class="operator">=</span> SpringApplication.run(TestMyBatisPlus.class, args);</span><br><span class="line">        <span class="type">StudentMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> context.getBean(StudentMapper.class);</span><br><span class="line"></span><br><span class="line">        test(mapper, List.of(<span class="string">&quot;èµµä¸€ä¼¤&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">(StudentMapper mapper, List&lt;String&gt; names)</span> &#123;</span><br><span class="line">        LambdaQueryWrapper&lt;Student&gt; query = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;&gt;();</span><br><span class="line">        query.in(!names.isEmpty(), Student::getName, names);</span><br><span class="line">        System.out.println(mapper.selectList(query));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ¯”è¾ƒå…¸å‹çš„ç”¨æ³•æœ‰ä¸¤å¤„ï¼š</p>
<p>ç¬¬ä¸€ï¼Œåœ¨è°ƒç”¨ in ç­‰æ–¹æ³•æ·»åŠ æ¡ä»¶æ—¶ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ boolean ä¸º true æ‰ä¼šæ‹¼æ¥ SQL æ¡ä»¶ï¼Œå¦åˆ™ä¸æ‹¼æ¥ã€‚</p>
<p>å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿç”¨ <code>DoSomething</code> ç±»å‹çš„ lambda å¯¹è±¡æ¥å»¶è¿Ÿæ‹¼æ¥æ“ä½œï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">DoSomething</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">doIt</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">final</span> Children <span class="title function_">maybeDo</span><span class="params">(<span class="type">boolean</span> condition, DoSomething something)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (condition) &#123;</span><br><span class="line">        something.doIt();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> typedThis;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç„¶è€Œï¼Œå®ƒåœ¨å®ç° <code>()-&gt;appendSqlSegments(...)</code> æ‹¼æ¥æ—¶ï¼Œæ˜¯ä¸æ–­ä¿®æ”¹ä¸€ä¸ª expression çŠ¶æ€å˜é‡ï¼Œä¸ºå‡½æ•°ç¼–ç¨‹æ‰€ä¸é½¿ã€‚</p>
<h3 id="4-3-4-åé—¨ç”¨æ³•"><a href="#4-3-4-åé—¨ç”¨æ³•" class="headerlink" title="4.3.4 åé—¨ç”¨æ³•"></a>4.3.4 åé—¨ç”¨æ³•</h3><p>ç¬¬äºŒï¼Œå¦‚æœç”¨ <code>LambdaQueryWrapper</code> æ‹¼æ¥ sql æ¡ä»¶æ—¶ï¼Œ<strong>ä¸ºäº†å–å¾—åˆ—å</strong>ï¼Œé‡‡ç”¨äº†è¿™ä¸ªåŠæ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Student::getName</span><br></pre></td></tr></table></figure>

<p>å®ƒè¦åšçš„äº‹å¾ˆç®€å•ï¼Œä½†å†…éƒ¨å®ç°å´æ¯”è¾ƒå¤æ‚ï¼š</p>
<ol>
<li><font color="red"><strong>å¿…é¡»ç”¨ <code>Student::getName</code> æ–¹æ³•å¼•ç”¨ï¼Œè€Œä¸èƒ½ç”¨å…¶å®ƒ Lambda å¯¹è±¡</strong></font></li>
<li><code>Student::getName</code> ä¼šå®ç° Serializable æ¥å£ï¼Œåºåˆ—åŒ–æ—¶ä¼šæŠŠå®ƒå˜æˆ SerializedLambda</li>
<li>æƒ³åŠæ³•æ‹¿åˆ° SerializedLambda å¯¹è±¡ï¼ˆåå°„è°ƒç”¨ writeReplaceï¼‰</li>
<li>é€šè¿‡ SerializedLambda èƒ½å¤Ÿè·å¾—å®ƒå¯¹åº”çš„å®é™…æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯ String getName() å’Œæ‰€åœ¨ç±» Student</li>
<li>å†é€šè¿‡æ–¹æ³•åæ¨å¯¼å¾—åˆ°å±æ€§åï¼ˆå»æ‰ isï¼Œgetï¼‰å³ name</li>
<li>æ‰€åœ¨ç±» Student çŸ¥é“äº†ï¼Œå±æ€§å name ä¹Ÿæœ‰äº†ï¼Œå°±å¯ä»¥è¿›ä¸€æ­¥ç¡®å®šåˆ—å</li>
</ol>
<ul>
<li>å±æ€§ä¸Šçš„ <code>@TableField</code> æŒ‡å®šçš„åˆ—åä¼˜å…ˆ</li>
<li>æ²¡æœ‰ <code>@TableField</code>ï¼ŒæŠŠå±æ€§åå½“ä½œåˆ—å</li>
</ul>
<p><strong>PSï¼š</strong></p>
<ul>
<li>ä¸æ˜¯å¾ˆå–œæ¬¢è¿™ç§åšæ³•ï¼Œæ¯”è¾ƒæ¶å¿ƒ</li>
<li>ä½†å®ƒç¡®å®æ˜¯æƒ³åšè¿™ä¹ˆä¸€ä»¶äº‹ï¼šåœ¨ä»£ç ä¸­å…¨é¢ä½¿ç”¨ java çš„å­—æ®µåï¼Œé¿å…å‡ºç°æ•°æ®åº“çš„åˆ—å</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">	<span class="comment">//(Type1 &amp; Serializable) å®ç° Type1 æ¥å£çš„åŒæ—¶å®ç° Serializable æ¥å£</span></span><br><span class="line">    <span class="comment">//Type1 lambda = (Type1 &amp; Serializable) (a, b) -&gt; a + b;</span></span><br><span class="line">    </span><br><span class="line">    <span class="type">Type2</span> <span class="variable">lambda</span> <span class="operator">=</span> (Type2 &amp; Serializable) Student::getName;</span><br><span class="line">    <span class="comment">// å°† lambda å¯¹è±¡åºåˆ—åŒ–</span></span><br><span class="line">    <span class="type">Method</span> <span class="variable">writeReplace</span> <span class="operator">=</span> lambda.getClass().getDeclaredMethod(<span class="string">&quot;writeReplace&quot;</span>);</span><br><span class="line">    <span class="type">SerializedLambda</span> <span class="variable">serializedLambda</span> <span class="operator">=</span> (SerializedLambda) writeReplace.invoke(lambda);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¾—åˆ° lambda å¯¹è±¡ä½¿ç”¨ç±»ã€æ‰€å±ç±»å’Œå®ç°æ–¹æ³•å</span></span><br><span class="line">    System.out.println(serializedLambda.getCapturingClass());</span><br><span class="line">    System.out.println(serializedLambda.getImplClass());</span><br><span class="line">    System.out.println(serializedLambda.getImplMethodName());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Type2</span> &#123;</span><br><span class="line">    String <span class="title function_">get</span><span class="params">(Student student)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Type1</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4-4-å¹¶è¡Œè®¡ç®—"><a href="#4-4-å¹¶è¡Œè®¡ç®—" class="headerlink" title="4.4 å¹¶è¡Œè®¡ç®—"></a>4.4 å¹¶è¡Œè®¡ç®—</h2><p>ç»Ÿè®¡é¡µé¢çš„è®¿é—®æ¬¡æ•°ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ParallelTest</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="type">Pattern</span> <span class="variable">reg</span> <span class="operator">=</span> Pattern.compile(<span class="string">&quot;(\\S+) - \\[(.+)] (.+) (.+)&quot;</span>);</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">FILES</span> <span class="operator">=</span> <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ExecutionException, InterruptedException &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">            sequence();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sequence</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException, ExecutionException &#123;</span><br><span class="line">        <span class="type">long</span> <span class="variable">start</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        Map&lt;String, Long&gt; m0 = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; FILES; i++) &#123;</span><br><span class="line">            Map&lt;String, Long&gt; mi = one(i);</span><br><span class="line">            m0 = Stream.of(m0, mi)</span><br><span class="line">                    .flatMap(m -&gt; m.entrySet().stream())</span><br><span class="line">                    .collect(toMap(Map.Entry::getKey, Map.Entry::getValue, Long::sum));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">long</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (Map.Entry&lt;String, Long&gt; e : m0.entrySet()) &#123;</span><br><span class="line"><span class="comment">//            System.out.println(e);</span></span><br><span class="line">            sum += e.getValue();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(sum);</span><br><span class="line">        System.out.println(<span class="string">&quot;cost: &quot;</span> + (System.currentTimeMillis() - start));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Map&lt;String, Long&gt; <span class="title function_">one</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> (Stream&lt;String&gt; lines = Files.lines(Path.of(String.format(<span class="string">&quot;web_server_access_%d.log&quot;</span>, i)))) &#123;</span><br><span class="line">            <span class="keyword">return</span> lines</span><br><span class="line"><span class="comment">//                            .limit(10)</span></span><br><span class="line">                    .map(reg::matcher)</span><br><span class="line">                    .filter(Matcher::find)</span><br><span class="line">                    .map(matcher -&gt; matcher.group(<span class="number">3</span>))</span><br><span class="line">                    .collect(groupingBy(identity(), counting()));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">parallel</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException, ExecutionException &#123;</span><br><span class="line">        <span class="type">long</span> <span class="variable">start</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        List&lt;CompletableFuture&lt;Map&lt;String, Long&gt;&gt;&gt; futures = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; FILES; i++) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> i;</span><br><span class="line">            CompletableFuture&lt;Map&lt;String, Long&gt;&gt; future = CompletableFuture.supplyAsync(() -&gt; one(k));</span><br><span class="line">            futures.add(future);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        CompletableFuture&lt;Map&lt;String, Long&gt;&gt; f0 = futures.getFirst();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; futures.size(); i++) &#123;</span><br><span class="line">            f0 = f0.thenCombine(futures.get(i), (m1, m2) -&gt;</span><br><span class="line">                    Stream.of(m1, m2)</span><br><span class="line">                            .flatMap(m -&gt; m.entrySet().stream())</span><br><span class="line">                            .collect(toMap(Map.Entry::getKey, Map.Entry::getValue, Long::sum))</span><br><span class="line">            );</span><br><span class="line">        &#125;</span><br><span class="line">        Map&lt;String, Long&gt; map = f0.get();</span><br><span class="line">        <span class="type">long</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (Map.Entry&lt;String, Long&gt; e : map.entrySet()) &#123;</span><br><span class="line"><span class="comment">//            System.out.println(e);</span></span><br><span class="line">            sum += e.getValue();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(sum);</span><br><span class="line">        System.out.println(<span class="string">&quot;cost: &quot;</span> + (System.currentTimeMillis() - start));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4-5-UI-äº‹ä»¶"><a href="#4-5-UI-äº‹ä»¶" class="headerlink" title="4.5 UI äº‹ä»¶"></a>4.5 UI äº‹ä»¶</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestUIEvent</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">JFrame</span> <span class="variable">frame</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JFrame</span>(<span class="string">&quot;Lambda Example&quot;</span>);</span><br><span class="line">        <span class="type">JButton</span> <span class="variable">button</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JButton</span>(<span class="string">&quot;Click me&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä½¿ç”¨Lambdaè¡¨è¾¾å¼å®šä¹‰æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶å¤„ç†ç¨‹åº</span></span><br><span class="line">        button.addActionListener(e -&gt; &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Button clicked!&quot;</span>);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        frame.add(button);</span><br><span class="line">        frame.setSize(<span class="number">300</span>, <span class="number">200</span>);</span><br><span class="line">        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">        frame.setVisible(<span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="5-å®ç°åŸç†"><a href="#5-å®ç°åŸç†" class="headerlink" title="5. å®ç°åŸç†"></a>5. å®ç°åŸç†</h1><h2 id="5-1-lambda-åŸç†"><a href="#5-1-lambda-åŸç†" class="headerlink" title="5.1 lambda åŸç†"></a>5.1 lambda åŸç†</h2><p>ä»¥ä¸‹é¢ä»£ç ä¸ºä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestLambda</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        test((a, b) -&gt; a + b);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">(BinaryOperator&lt;Integer&gt; lambda)</span> &#123;</span><br><span class="line">        System.out.println(lambda.apply(<span class="number">1</span>, <span class="number">2</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ‰§è¡Œç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">3</span><br></pre></td></tr></table></figure>

<h3 id="5-1-1-ç¬¬ä¸€æ­¥ï¼Œç”Ÿæˆé™æ€æ–¹æ³•"><a href="#5-1-1-ç¬¬ä¸€æ­¥ï¼Œç”Ÿæˆé™æ€æ–¹æ³•" class="headerlink" title="5.1.1 ç¬¬ä¸€æ­¥ï¼Œç”Ÿæˆé™æ€æ–¹æ³•"></a>5.1.1 ç¬¬ä¸€æ­¥ï¼Œç”Ÿæˆé™æ€æ–¹æ³•</h3><p>å¦‚ä½•è¯æ˜ï¼Ÿç”¨åå°„</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (Method method : TestLambda.class.getDeclaredMethods()) &#123;</span><br><span class="line">    System.out.println(method);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºä¸ºï¼ˆå»æ‰äº†åŒ…åï¼Œå®¹æ˜“é˜…è¯»ï¼‰ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> TestLambda.main(java.lang.String[])</span><br><span class="line"><span class="keyword">static</span> <span class="keyword">void</span> TestLambda.test(BinaryOperator)</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> java.lang.Integer TestLambda.lambda$main$<span class="number">0</span>(Integer,Integer)</span><br></pre></td></tr></table></figure>

<ul>
<li><p>å¯ä»¥çœ‹åˆ°é™¤äº†æˆ‘ä»¬è‡ªå·±å†™çš„ main å’Œ test ä»¥å¤–ï¼Œå¤šå‡ºä¸€ä¸ªåä¸º <code>lambda$main$0</code> çš„æ–¹æ³•</p>
</li>
<li><p>è¿™ä¸ªæ–¹æ³•æ˜¯åœ¨ç¼–è¯‘æœŸé—´ç”±ç¼–è¯‘å™¨ç”Ÿæˆçš„æ–¹æ³•ï¼Œæ˜¯ syntheticï¼ˆåˆæˆï¼‰æ–¹æ³•</p>
</li>
<li><p>å®ƒçš„å‚æ•°ã€å†…å®¹å°±æ˜¯ lambda è¡¨è¾¾å¼æä¾›çš„å‚æ•°å’Œå†…å®¹ï¼Œå¦‚ä¸‹é¢ä»£ç ç‰‡æ®µæ‰€ç¤º</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> Integer lambda$main$<span class="number">0</span>(Integer a, Integer b) &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="5-1-2-ç¬¬äºŒæ­¥ï¼Œç”Ÿæˆå®ç°ç±»å­—èŠ‚ç "><a href="#5-1-2-ç¬¬äºŒæ­¥ï¼Œç”Ÿæˆå®ç°ç±»å­—èŠ‚ç " class="headerlink" title="5.1.2 ç¬¬äºŒæ­¥ï¼Œç”Ÿæˆå®ç°ç±»å­—èŠ‚ç "></a>5.1.2 ç¬¬äºŒæ­¥ï¼Œç”Ÿæˆå®ç°ç±»å­—èŠ‚ç </h3><p>å¦‚æœæ˜¯æˆ‘è‡ªå·±é€ ä¸€ä¸ªå¯¹è±¡åŒ…å«æ­¤æ–¹æ³•ï¼Œå¯ä»¥è¿™ä¹ˆåšã€‚</p>
<p>å…ˆåˆ›å»ºä¸€ä¸ªç±»ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">LambdaObject</span> <span class="keyword">implements</span> <span class="title class_">BinaryOperator</span>&lt;Integer&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">apply</span><span class="params">(Integer a, Integer b)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> TestLambda.lambda$main$<span class="number">0</span>(a, b);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å°†æ¥ä½¿ç”¨æ—¶ï¼Œåˆ›å»ºå¯¹è±¡ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">test(<span class="keyword">new</span> <span class="title class_">LambdaObject</span>());</span><br></pre></td></tr></table></figure>

<p>åªä¸è¿‡ï¼Œjvm æ˜¯åœ¨è¿è¡ŒæœŸé—´é€ å‡ºçš„è¿™ä¸ªç±»ä»¥åŠå¯¹è±¡è€Œå·²ï¼Œè¦æƒ³æŸ¥çœ‹è¿™ä¸ªç±»</p>
<p>åœ¨ jdk 21 ä¸­è¿è¡Œæ—¶æ·»åŠ è™šæ‹Ÿæœºå‚æ•°ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-Djdk.invoke.LambdaMetafactory.dumpProxyClassFiles</span><br></pre></td></tr></table></figure>

<p>æ—©æœŸ jdk æ·»åŠ çš„å‚æ•°æ˜¯ï¼ˆæ²¡æœ‰å»è¿›è¡Œç‰ˆæœ¬æ¯”å¯¹äº†ï¼‰ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-Djdk.internal.lambda.dumpProxyClasses</span><br></pre></td></tr></table></figure>

<p>è‹¥æƒ³å®ç°åœ¨è¿è¡ŒæœŸé—´ç”Ÿæˆä¸Šè¿° class å­—èŠ‚ç ï¼Œæœ‰ä¸¤ç§æ‰‹æ®µï¼š</p>
<ul>
<li>ä¸€æ˜¯åŠ¨æ€ä»£ç†ï¼Œjdk å¹¶æ²¡æœ‰é‡‡ç”¨è¿™ç§åŠæ³•æ¥ç”Ÿæˆ Lambda ç±»</li>
<li>äºŒæ˜¯ç”¨ <code>LambdaMetaFactory</code>ï¼Œå®ƒé…åˆ MethodHandle API åœ¨æ‰§è¡Œæ—¶æ›´å…·æ€§èƒ½ä¼˜åŠ¿</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestLambda1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        test((a, b) -&gt; a + b);</span><br><span class="line"></span><br><span class="line">        MethodHandles.<span class="type">Lookup</span> <span class="variable">lookup</span> <span class="operator">=</span> MethodHandles.lookup();</span><br><span class="line">        <span class="type">MethodType</span> <span class="variable">factoryType</span> <span class="operator">=</span> MethodType.methodType(BinaryOperator.class);</span><br><span class="line">        <span class="type">MethodType</span> <span class="variable">interfaceMethodType</span> <span class="operator">=</span> MethodType.methodType(Object.class, Object.class, Object.class);</span><br><span class="line">        <span class="type">MethodType</span> <span class="variable">implementsMethodType</span> <span class="operator">=</span> MethodType.methodType(Integer.class, Integer.class, Integer.class);</span><br><span class="line"></span><br><span class="line">        <span class="type">MethodHandle</span> <span class="variable">implementsMethod</span> <span class="operator">=</span> lookup.findStatic(TestLambda1.class, <span class="string">&quot;lambda$main$1&quot;</span>, implementsMethodType);</span><br><span class="line"></span><br><span class="line">        <span class="type">MethodType</span> <span class="variable">lambdaType</span> <span class="operator">=</span> MethodType.methodType(Integer.class, Integer.class, Integer.class);</span><br><span class="line">        <span class="type">CallSite</span> <span class="variable">callSite</span> <span class="operator">=</span> LambdaMetafactory.metafactory(lookup,</span><br><span class="line">                <span class="string">&quot;apply&quot;</span>, factoryType, interfaceMethodType,</span><br><span class="line">                implementsMethod,</span><br><span class="line">                lambdaType);</span><br><span class="line"></span><br><span class="line">        BinaryOperator&lt;Integer&gt; lambda = (BinaryOperator) callSite.getTarget().invoke();</span><br><span class="line">        test(lambda);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> Integer lambda$main$<span class="number">1</span>(Integer a, Integer b) &#123;</span><br><span class="line">        <span class="keyword">return</span> a + b;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">(BinaryOperator&lt;Integer&gt; lambda)</span> &#123;</span><br><span class="line">        System.out.println(lambda.apply(<span class="number">1</span>, <span class="number">2</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å…¶ä¸­ï¼š</p>
<ul>
<li><p>â€œapplyâ€ æ˜¯æ¥å£æ–¹æ³•å</p>
</li>
<li><p>factoryType æ˜¯å·¥å‚æ–¹æ³•é•¿ç›¸</p>
</li>
<li><p>interfaceMethodType æ˜¯æ¥å£æ–¹æ³•é•¿ç›¸</p>
</li>
<li><p>implementsMethod æ˜¯å®ç°æ–¹æ³•</p>
<ul>
<li>implementsMethodType æ˜¯å®ç°æ–¹æ³•é•¿ç›¸</li>
</ul>
</li>
<li><p>lambdaType æ˜¯å®é™…å‡½æ•°å¯¹è±¡é•¿ç›¸</p>
</li>
<li><p>callSite.getTarget() å®é™…æ˜¯è°ƒç”¨å®ç°ç±»çš„æ„é€ æ–¹æ³•å¯¹åº”çš„ mhï¼Œæœ€å invoke è¿”å›å‡½æ•°å¯¹è±¡</p>
</li>
</ul>
<h2 id="5-2-æ–¹æ³•å¼•ç”¨åŸç†"><a href="#5-2-æ–¹æ³•å¼•ç”¨åŸç†" class="headerlink" title="5.2 æ–¹æ³•å¼•ç”¨åŸç†"></a>5.2 æ–¹æ³•å¼•ç”¨åŸç†</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestLambda3</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">		test(String::toLowerCase);</span><br><span class="line">        </span><br><span class="line">        MethodHandles.<span class="type">Lookup</span> <span class="variable">lookup</span> <span class="operator">=</span> MethodHandles.lookup();</span><br><span class="line">        <span class="type">MethodType</span> <span class="variable">factoryType</span> <span class="operator">=</span> MethodType.methodType(Function.class);</span><br><span class="line">        <span class="type">MethodType</span> <span class="variable">interfaceMethodType</span> <span class="operator">=</span> MethodType.methodType(Object.class, Object.class);</span><br><span class="line">        <span class="type">MethodHandle</span> <span class="variable">implementsMethod</span> <span class="operator">=</span> lookup.findVirtual(String.class, <span class="string">&quot;toLowerCase&quot;</span>, MethodType.methodType(String.class));</span><br><span class="line">        <span class="type">MethodType</span> <span class="variable">lambdaType</span> <span class="operator">=</span> MethodType.methodType(String.class, String.class);</span><br><span class="line">        <span class="type">CallSite</span> <span class="variable">callSite</span> <span class="operator">=</span> LambdaMetafactory.metafactory(lookup,</span><br><span class="line">                <span class="string">&quot;apply&quot;</span>, factoryType, interfaceMethodType,</span><br><span class="line">                implementsMethod,</span><br><span class="line">                lambdaType);</span><br><span class="line"></span><br><span class="line">        Function&lt;String, String&gt; lambda = (Function&lt;String, String&gt;) callSite.getTarget().invoke();</span><br><span class="line">        System.out.println(lambda.apply(<span class="string">&quot;Tom&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">(Function&lt;String,String&gt; lambda)</span> &#123;</span><br><span class="line">        System.out.println(lambda.apply(<span class="string">&quot;Tom&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="5-3-é—­åŒ…åŸç†"><a href="#5-3-é—­åŒ…åŸç†" class="headerlink" title="5.3 é—­åŒ…åŸç†"></a>5.3 é—­åŒ…åŸç†</h2><p>æ•è·åŸºæœ¬ç±»å‹å˜é‡ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">c</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line">test((a, b) -&gt; a + b + c);</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">(BinaryOperator&lt;Integer&gt; lambda)</span> &#123;</span><br><span class="line">    System.out.println(lambda.apply(<span class="number">1</span>, <span class="number">2</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç”Ÿæˆä¸€ä¸ªå¸¦ 3 ä¸ªå‚æ•°çš„æ–¹æ³•ï¼Œä½†å®ƒå’Œ BinaryOperator è¿˜å·®ä¸€ä¸ª int å‚æ•°ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> Integer lambda$main$<span class="number">1</span>(<span class="type">int</span> c, Integer a, Integer b) &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b + c;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestLambda2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line"><span class="comment">//        int c = 10;</span></span><br><span class="line"><span class="comment">//        test((a, b) -&gt; a + b + c);</span></span><br><span class="line"></span><br><span class="line">        MethodHandles.<span class="type">Lookup</span> <span class="variable">lookup</span> <span class="operator">=</span> MethodHandles.lookup();</span><br><span class="line">        <span class="type">MethodType</span> <span class="variable">factoryType</span> <span class="operator">=</span> MethodType.methodType(BinaryOperator.class, <span class="type">int</span>.class);</span><br><span class="line">        <span class="type">MethodType</span> <span class="variable">interfaceMethodType</span> <span class="operator">=</span> MethodType.methodType(Object.class, Object.class, Object.class);</span><br><span class="line">        <span class="type">MethodType</span> <span class="variable">implementsMethodType</span> <span class="operator">=</span> MethodType.methodType(Integer.class, <span class="type">int</span>.class, Integer.class, Integer.class);</span><br><span class="line"></span><br><span class="line">        <span class="type">MethodHandle</span> <span class="variable">implementsMethod</span> <span class="operator">=</span> lookup.findStatic(TestLambda2.class, <span class="string">&quot;lambda$main$1&quot;</span>, implementsMethodType);</span><br><span class="line"></span><br><span class="line">        <span class="type">MethodType</span> <span class="variable">lambdaType</span> <span class="operator">=</span> MethodType.methodType(Integer.class, Integer.class, Integer.class);</span><br><span class="line">        <span class="type">CallSite</span> <span class="variable">callSite</span> <span class="operator">=</span> LambdaMetafactory.metafactory(lookup,</span><br><span class="line">                <span class="string">&quot;apply&quot;</span>, factoryType, interfaceMethodType,</span><br><span class="line">                implementsMethod,</span><br><span class="line">                lambdaType);</span><br><span class="line"></span><br><span class="line">        BinaryOperator&lt;Integer&gt; lambda = (BinaryOperator) callSite.getTarget().invoke(<span class="number">10</span>);</span><br><span class="line">        test(lambda);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> Integer lambda$main$<span class="number">1</span>(<span class="type">int</span> c, Integer a, Integer b) &#123;</span><br><span class="line">        <span class="keyword">return</span> a + b + c;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">(BinaryOperator&lt;Integer&gt; lambda)</span> &#123;</span><br><span class="line">        System.out.println(lambda.apply(<span class="number">1</span>, <span class="number">2</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸åŒä¹‹å¤„ï¼š</p>
<ul>
<li>factoryTypeï¼Œé™¤äº†åŸæœ¬çš„æ¥å£ç±»å‹ä¹‹å¤–ï¼Œå¤šäº†å®ç°æ–¹æ³•ç¬¬ä¸€ä¸ªå‚æ•°çš„ç±»å‹</li>
<li>äº§ç”Ÿ lambda å¯¹è±¡çš„æ—¶å€™ï¼Œé€šè¿‡ invoke æŠŠè¿™ä¸ªå‚æ•°çš„å®é™…å€¼ä¼ è¿›å»</li>
</ul>
<p>è¿™æ ·äº§ç”Ÿçš„ LambdaType å°±æ˜¯è¿™æ ·ï¼Œå¹¶ä¸”ç”Ÿæˆ Lambda å¯¹è±¡æ—¶ï¼Œc çš„å€¼è¢«å›ºå®šä¸º 10</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">LambdaType</span> <span class="keyword">implements</span> <span class="title class_">BinaryOperator</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> c;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> TestLambda2$$Lambda(<span class="type">int</span> c) &#123;</span><br><span class="line">        <span class="built_in">this</span>.c = c;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">apply</span><span class="params">(Object a, Object b)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> TestLambda2.lambda$main$<span class="number">1</span>(<span class="built_in">this</span>.c, (Integer)a, (Integer)b);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ•è·å¼•ç”¨ç±»å‹å˜é‡ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestLambda4</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">MyRef</span> &#123;</span><br><span class="line">        <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">MyRef</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.age = age;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        <span class="comment">/*MyRef ref = new MyRef(10);</span></span><br><span class="line"><span class="comment">        test((a, b) -&gt; a + b + ref.age);*/</span></span><br><span class="line"></span><br><span class="line">        MethodHandles.<span class="type">Lookup</span> <span class="variable">lookup</span> <span class="operator">=</span> MethodHandles.lookup();</span><br><span class="line">        <span class="type">MethodType</span> <span class="variable">factoryType</span> <span class="operator">=</span> MethodType.methodType(BinaryOperator.class, MyRef.class);</span><br><span class="line">        <span class="type">MethodType</span> <span class="variable">interfaceMethodType</span> <span class="operator">=</span> MethodType.methodType(Object.class, Object.class, Object.class);</span><br><span class="line">        <span class="type">MethodType</span> <span class="variable">implementsMethodType</span> <span class="operator">=</span> MethodType.methodType(Integer.class, MyRef.class, Integer.class, Integer.class);</span><br><span class="line"></span><br><span class="line">        <span class="type">MethodHandle</span> <span class="variable">implementsMethod</span> <span class="operator">=</span> lookup.findStatic(TestLambda4.class, <span class="string">&quot;lambda$main$1&quot;</span>, implementsMethodType);</span><br><span class="line"></span><br><span class="line">        <span class="type">MethodType</span> <span class="variable">lambdaType</span> <span class="operator">=</span> MethodType.methodType(Integer.class, Integer.class, Integer.class);</span><br><span class="line">        <span class="type">CallSite</span> <span class="variable">callSite</span> <span class="operator">=</span> LambdaMetafactory.metafactory(lookup,</span><br><span class="line">                <span class="string">&quot;apply&quot;</span>, factoryType, interfaceMethodType,</span><br><span class="line">                implementsMethod,</span><br><span class="line">                lambdaType);</span><br><span class="line"></span><br><span class="line">        BinaryOperator&lt;Integer&gt; lambda = (BinaryOperator) callSite.getTarget().bindTo(<span class="keyword">new</span> <span class="title class_">MyRef</span>(<span class="number">20</span>)).invoke();</span><br><span class="line">        test(lambda);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> Integer lambda$main$<span class="number">1</span>(MyRef c, Integer a, Integer b) &#123;</span><br><span class="line">        <span class="keyword">return</span> a + b + c.age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">(BinaryOperator&lt;Integer&gt; lambda)</span> &#123;</span><br><span class="line">        System.out.println(lambda.apply(<span class="number">1</span>, <span class="number">2</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸æ•è·åŸºæœ¬ç±»å‹å˜é‡ç±»ä¼¼ï¼Œä¸è¿‡ï¼š</p>
<p>é™¤äº†</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">callSite.getTarget().invoke(<span class="keyword">new</span> <span class="title class_">MyRef</span>(<span class="number">20</span>));</span><br></pre></td></tr></table></figure>

<p>è¿˜å¯ä»¥</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">callSite.getTarget().bindTo(<span class="keyword">new</span> <span class="title class_">MyRef</span>(<span class="number">20</span>)).invoke();</span><br></pre></td></tr></table></figure>

<h2 id="5-4-Stream-æ„å»º"><a href="#5-4-Stream-æ„å»º" class="headerlink" title="5.4 Stream æ„å»º"></a>5.4 Stream æ„å»º</h2><p>è‡ªå®šä¹‰å¯åˆ‡åˆ†è¿­ä»£å™¨ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestSpliterator</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">MySpliterator</span>&lt;T&gt; <span class="keyword">implements</span> <span class="title class_">Spliterator</span>&lt;T&gt; &#123;</span><br><span class="line">        T[] array;</span><br><span class="line">        <span class="type">int</span> begin;</span><br><span class="line">        <span class="type">int</span> end;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">MySpliterator</span><span class="params">(T[] array, <span class="type">int</span> begin, <span class="type">int</span> end)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.array = array;</span><br><span class="line">            <span class="built_in">this</span>.begin = begin;</span><br><span class="line">            <span class="built_in">this</span>.end = end;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">tryAdvance</span><span class="params">(Consumer&lt;? <span class="built_in">super</span> T&gt; action)</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (begin &gt; end) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            action.accept(array[begin++]);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> Spliterator&lt;T&gt; <span class="title function_">trySplit</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (estimateSize() &gt; <span class="number">5</span>) &#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> (begin + end) &gt;&gt;&gt; <span class="number">1</span>;</span><br><span class="line">                MySpliterator&lt;T&gt; res = <span class="keyword">new</span> <span class="title class_">MySpliterator</span>&lt;&gt;(array, begin, mid);</span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">&quot;=&gt;&quot;</span> + res);</span><br><span class="line">                begin = mid + <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">return</span> res;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> Arrays.toString(Arrays.copyOfRange(array, begin, end + <span class="number">1</span>));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">estimateSize</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> end - begin + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">characteristics</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> Spliterator.SUBSIZED | Spliterator.ORDERED;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Integer[] all = <span class="keyword">new</span> <span class="title class_">Integer</span>[]&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>&#125;;</span><br><span class="line">        MySpliterator&lt;Integer&gt; spliterator = <span class="keyword">new</span> <span class="title class_">MySpliterator</span>&lt;&gt;(all, <span class="number">0</span>, <span class="number">9</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        StreamSupport.stream(spliterator, <span class="literal">false</span>)</span><br><span class="line">                .parallel()</span><br><span class="line">                .forEach(x -&gt; System.out.println(Thread.currentThread().getName() + <span class="string">&quot;:&quot;</span> + x));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç»ƒä¹ ï¼šæŒ‰æ¯æ¬¡åˆ‡åˆ†å›ºå®šå¤§å°æ¥å®ç°</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="https://zz.muyoukule.cn">æœ¨åˆæ¯äº†</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="https://zz.muyoukule.cn/posts/60243/">https://zz.muyoukule.cn/posts/60243/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="https://zz.muyoukule.cn" target="_blank">muyoukule</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Java/">Java</a></div><div class="post_share"></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/3759/" title="IDEAå¯åŠ¨ï¼ï¼"><img class="cover" src="https://muyoukule-blog-pics.oss-cn-chengdu.aliyuncs.com/Source/CoverIMG/cover11.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">IDEAå¯åŠ¨ï¼ï¼</div></div></a></div><div class="next-post pull-right"><a href="/posts/42613/" title="Javaæ³›å‹"><img class="cover" src="https://muyoukule-blog-pics.oss-cn-chengdu.aliyuncs.com/Source/CoverIMG/cover14.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">Javaæ³›å‹</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><div><a href="/posts/5340/" title="å®‰å…¨æ¡†æ¶SpringSecurity"><img class="cover" src="https://muyoukule-blog-pics.oss-cn-chengdu.aliyuncs.com/Source/CoverIMG/cover41.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-05-11</div><div class="title">å®‰å…¨æ¡†æ¶SpringSecurity</div></div></a></div><div><a href="/posts/62439/" title="Javaç”ŸæˆäºŒç»´ç "><img class="cover" src="https://muyoukule-blog-pics.oss-cn-chengdu.aliyuncs.com/Source/CoverIMG/cover35.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-05-02</div><div class="title">Javaç”ŸæˆäºŒç»´ç </div></div></a></div><div><a href="/posts/42613/" title="Javaæ³›å‹"><img class="cover" src="https://muyoukule-blog-pics.oss-cn-chengdu.aliyuncs.com/Source/CoverIMG/cover14.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-04-23</div><div class="title">Javaæ³›å‹</div></div></a></div><div><a href="/posts/65497/" title="ã€ç¬¬14ç« ã€‘ SSMæ•´åˆ"><img class="cover" src="https://muyoukule-blog-pics.oss-cn-chengdu.aliyuncs.com/Source/CoverIMG/cover26.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-04-13</div><div class="title">ã€ç¬¬14ç« ã€‘ SSMæ•´åˆ</div></div></a></div><div><a href="/posts/51421/" title="ã€ç¬¬13ç« ã€‘ å…¨æ³¨è§£å¼€å‘"><img class="cover" src="https://muyoukule-blog-pics.oss-cn-chengdu.aliyuncs.com/Source/CoverIMG/cover30.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-04-13</div><div class="title">ã€ç¬¬13ç« ã€‘ å…¨æ³¨è§£å¼€å‘</div></div></a></div><div><a href="/posts/61153/" title="ã€ç¬¬11ç« ã€‘ SpringMVCæ‰§è¡Œæµç¨‹"><img class="cover" src="https://muyoukule-blog-pics.oss-cn-chengdu.aliyuncs.com/Source/CoverIMG/cover23.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-04-11</div><div class="title">ã€ç¬¬11ç« ã€‘ SpringMVCæ‰§è¡Œæµç¨‹</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="card-info-avatar"><div class="avatar-img"><img src="/img/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-status-box"><div class="author-status"><g-emoji class="g-emoji" alias="palm_tree" fallback-src="https://lskypro.acozycotage.net/LightPicture/2022/12/fe1dc0402e623096.jpg">ğŸ¯</g-emoji><span>ä¸“æ³¨å­¦ä¹ ä¸­</span></div></div></div><div class="author-info__name">æœ¨åˆæ¯äº†</div><div class="author-info__description">è«é“æ¡‘æ¦†æ™šï¼Œä¸ºéœå°šæ»¡å¤©</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">49</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">24</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">10</div></a></div><a id="card-info-btn" href="mailto:muyoukule@gmail.com"><i class="far fa-envelope"></i><span>Follow Me</span></a></div><div class="card-widget" id="card-tuijian"><div id="tj-box"><div id="tj-box1"><div id="tj-left"><p>æ‰«ä¸€æ‰«</p>
<span>å¿«é€Ÿæ‰“å¼€ç§»åŠ¨ç«¯â¤</span></div><div id="tj-right"><div id="tj-img-box"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAN4AAADeCAAAAAB3DOFrAAACHUlEQVR42u3bQXLDIBAEQP3/084DXFJmF4Gw3Zx8SMQ2B9gaoeP11ePAw8PDw8PDw8PDw8PDw8PDw8PD+2HeEY/3/zp72tnvs2f2asDDw8N7lvfPthtjegs0UgMeHh7es7zrjftsmioj/5t8CfDw8PD25yXgsyUYrwEPDw/vE3m9pry6fHh4eHj78/IliKbMQ9h9shY8PDy8CS/A5v3e4v0eHh4eXsCrjuqlgesFva0qPDw8vIW8fIOulpvHCr158fDw8HbgJeXmTXBvxuTgwcPDw3uWd116desfuaI60mrj4eHhreT1rgIkjfXIFYTyZwB4eHh4m/GqV1RHYoXeIYGHh4e3klcljUe9yZMnhhF4eHh4N8W41Wv3+eZ+XVwSc9xw7uHh4eFN6znzYKIaNIyEIENhBB4eHt5kXi+cTZryHn5iGIGHh4c3IcbNAdWyxj/BwsPDw9uZNyOorUYVEw8GPDw8vGFe9XOmPJ7ohbw3hBF4eHh4k3m9qKJ6SOTHT+FYwsPDw1vIq45eLJsHFs2GHg8PD28h74hHL9KtLlDvmhceHh7eel7eUuetcK/0fJnw8PDwduDl5VYvTo2EEVNegOHh4eE9xKt+HpC8QstnwcPDw/tEXq/5rrbpG7XUeHh4eK0wIokb8jA3X3Q8PDy83Xj51jx+mbUaZCx9v4eHh4cX8L5j4OHh4eHh4eHh4eHh4eHh4eHh4f0A7w8RjTkj6D/1bgAAAABJRU5ErkJggg=="/></div></div></div><div id="tj-box2"><div id="tj-left"><p>æ‰«ä¸€æ‰«</p>
<span>å¿«é€Ÿæ‰“å¼€ç§»åŠ¨ç«¯â¤</span></div><div id="tj-right"><div id="tj-img-box"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAN4AAADeCAAAAAB3DOFrAAACHUlEQVR42u3bQXLDIBAEQP3/084DXFJmF4Gw3Zx8SMQ2B9gaoeP11ePAw8PDw8PDw8PDw8PDw8PDw8PD+2HeEY/3/zp72tnvs2f2asDDw8N7lvfPthtjegs0UgMeHh7es7zrjftsmioj/5t8CfDw8PD25yXgsyUYrwEPDw/vE3m9pry6fHh4eHj78/IliKbMQ9h9shY8PDy8CS/A5v3e4v0eHh4eXsCrjuqlgesFva0qPDw8vIW8fIOulpvHCr158fDw8HbgJeXmTXBvxuTgwcPDw3uWd116desfuaI60mrj4eHhreT1rgIkjfXIFYTyZwB4eHh4m/GqV1RHYoXeIYGHh4e3klcljUe9yZMnhhF4eHh4N8W41Wv3+eZ+XVwSc9xw7uHh4eFN6znzYKIaNIyEIENhBB4eHt5kXi+cTZryHn5iGIGHh4c3IcbNAdWyxj/BwsPDw9uZNyOorUYVEw8GPDw8vGFe9XOmPJ7ohbw3hBF4eHh4k3m9qKJ6SOTHT+FYwsPDw1vIq45eLJsHFs2GHg8PD28h74hHL9KtLlDvmhceHh7eel7eUuetcK/0fJnw8PDwduDl5VYvTo2EEVNegOHh4eE9xKt+HpC8QstnwcPDw/tEXq/5rrbpG7XUeHh4eK0wIokb8jA3X3Q8PDy83Xj51jx+mbUaZCx9v4eHh4cX8L5j4OHh4eHh4eHh4eHh4eHh4eHh4f0A7w8RjTkj6D/1bgAAAABJRU5ErkJggg=="/></div></div></div></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>å…¬å‘Š</span></div><div class="announcement_content"><center>èœå°±å¤šç»ƒ</center></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#0-%E5%89%8D%E8%A8%80"><span class="toc-text">0. å‰è¨€</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#1-%E9%81%93%E4%B9%8B%E4%BC%8A%E5%A7%8B"><span class="toc-text">1. é“ä¹‹ä¼Šå§‹</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-%E4%BB%80%E4%B9%88%E6%98%AF%E5%87%BD%E6%95%B0"><span class="toc-text">1.1 ä»€ä¹ˆæ˜¯å‡½æ•°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-%E5%A4%A7%E9%81%93%E6%97%A0%E6%83%85"><span class="toc-text">1.2 å¤§é“æ— æƒ…</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-1-%E6%97%A0%E6%83%85"><span class="toc-text">1.2.1 æ— æƒ…</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-2-%E4%BD%9B%E7%A5%96%E6%88%90%E9%81%93"><span class="toc-text">1.2.2 ä½›ç¥–æˆé“</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-3-%E5%87%BD%E6%95%B0%E4%B8%8E%E6%96%B9%E6%B3%95"><span class="toc-text">1.2.3 å‡½æ•°ä¸æ–¹æ³•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-4-%E4%B8%8D%E5%8F%98%E7%9A%84%E5%A5%BD%E5%A4%84"><span class="toc-text">1.2.4 ä¸å˜çš„å¥½å¤„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-5-%E5%90%88%E6%A0%BC%E7%9A%84%E5%87%BD%E6%95%B0%E6%97%A0%E7%8A%B6%E6%80%81"><span class="toc-text">1.2.5 åˆæ ¼çš„å‡½æ•°æ— çŠ¶æ€</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-%E5%A4%A7%E9%81%93%E6%97%A0%E5%BD%A2"><span class="toc-text">1.3 å¤§é“æ— å½¢</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-1-%E5%87%BD%E6%95%B0%E5%8C%96%E5%AF%B9%E8%B1%A1"><span class="toc-text">1.3.1 å‡½æ•°åŒ–å¯¹è±¡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-2-%E8%A1%8C%E4%B8%BA%E5%8F%82%E6%95%B0%E5%8C%96"><span class="toc-text">1.3.2 è¡Œä¸ºå‚æ•°åŒ–</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-3-%E5%BB%B6%E8%BF%9F%E6%89%A7%E8%A1%8C"><span class="toc-text">1.3.3 å»¶è¿Ÿæ‰§è¡Œ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-4-%E5%87%BD%E6%95%B0%E5%AF%B9%E8%B1%A1%E7%9A%84%E4%B8%8D%E5%90%8C%E7%B1%BB%E5%9E%8B"><span class="toc-text">1.3.4 å‡½æ•°å¯¹è±¡çš„ä¸åŒç±»å‹</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-%E5%87%BD%E6%95%B0%E7%BC%96%E7%A8%8B%E8%AF%AD%E6%B3%95"><span class="toc-text">2. å‡½æ•°ç¼–ç¨‹è¯­æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-%E8%A1%A8%E7%8E%B0%E5%BD%A2%E5%BC%8F"><span class="toc-text">2.1 è¡¨ç°å½¢å¼</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-1-%E5%8C%BF%E5%90%8D%E5%86%85%E9%83%A8%E7%B1%BB"><span class="toc-text">2.1.1 åŒ¿åå†…éƒ¨ç±»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-2-Lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-text">2.1.2 Lambdaè¡¨è¾¾å¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-3-%E6%96%B9%E6%B3%95%E5%BC%95%E7%94%A8"><span class="toc-text">2.1.3 æ–¹æ³•å¼•ç”¨</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-%E5%87%BD%E6%95%B0%E7%B1%BB%E5%9E%8B"><span class="toc-text">2.2 å‡½æ•°ç±»å‹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-%E5%87%A0%E7%A7%8D%E6%96%B9%E6%B3%95%E5%BC%95%E7%94%A8"><span class="toc-text">2.3 å‡ ç§æ–¹æ³•å¼•ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-1-%E7%B1%BB%E5%90%8D-%E9%9D%99%E6%80%81%E6%96%B9%E6%B3%95%E5%90%8D"><span class="toc-text">2.3.1 ç±»å::é™æ€æ–¹æ³•å</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-2-%E7%B1%BB%E5%90%8D-%E9%9D%9E%E9%9D%99%E6%80%81%E6%96%B9%E6%B3%95%E5%90%8D"><span class="toc-text">2.3.2 ç±»å::éé™æ€æ–¹æ³•å</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-3-%E5%AF%B9%E8%B1%A1-%E9%9D%9E%E9%9D%99%E6%80%81%E6%96%B9%E6%B3%95%E5%90%8D"><span class="toc-text">2.3.3 å¯¹è±¡::éé™æ€æ–¹æ³•å</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-4-%E7%B1%BB%E5%90%8D-new"><span class="toc-text">2.3.4 ç±»å::new</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-5-this-%E9%9D%9E%E9%9D%99%E6%80%81%E6%96%B9%E6%B3%95%E5%90%8D"><span class="toc-text">2.3.5 this::éé™æ€æ–¹æ³•å</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-6-super-%E9%9D%9E%E9%9D%99%E6%80%81%E6%96%B9%E6%B3%95%E5%90%8D"><span class="toc-text">2.3.6 super::éé™æ€æ–¹æ³•å</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-7-%E7%89%B9%E4%BE%8B"><span class="toc-text">2.3.7 ç‰¹ä¾‹</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-4-%E9%97%AD%E5%8C%85%EF%BC%88Closure%EF%BC%89"><span class="toc-text">2.4 é—­åŒ…ï¼ˆClosureï¼‰</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-5-%E6%9F%AF%E9%87%8C%E5%8C%96%EF%BC%88Carrying%EF%BC%89"><span class="toc-text">2.5 æŸ¯é‡ŒåŒ–ï¼ˆCarryingï¼‰</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-6-%E9%AB%98%E9%98%B6%E5%87%BD%E6%95%B0%EF%BC%88Higher-Order-Functions%EF%BC%89"><span class="toc-text">2.6 é«˜é˜¶å‡½æ•°ï¼ˆHigher-Order Functionsï¼‰</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-7-%E7%AD%89%E4%BB%B7%E7%9A%84-lambda-%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-text">2.7 ç­‰ä»·çš„ lambda è¡¨è¾¾å¼</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-Stream-API"><span class="toc-text">3. Stream API</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-Stream%E6%B5%81%E7%9A%84%E6%80%9D%E6%83%B3"><span class="toc-text">3.1 Streamæµçš„æ€æƒ³</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-Stream%E6%B5%81%E4%BD%9C%E7%94%A8"><span class="toc-text">3.2 Streamæµä½œç”¨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3-%E6%B5%81%E7%9A%84%E4%B8%89%E7%B1%BB%E6%96%B9%E6%B3%95"><span class="toc-text">3.3 æµçš„ä¸‰ç±»æ–¹æ³•</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-4-Stream%E4%BD%BF%E7%94%A8%E6%AD%A5%E9%AA%A4"><span class="toc-text">3.4 Streamä½¿ç”¨æ­¥éª¤</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-5-%E8%BF%87%E6%BB%A4"><span class="toc-text">3.5 è¿‡æ»¤</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-6-%E6%98%A0%E5%B0%84"><span class="toc-text">3.6 æ˜ å°„</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-7-%E9%99%8D%E7%BB%B4"><span class="toc-text">3.7 é™ç»´</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-8-%E6%9E%84%E5%BB%BA"><span class="toc-text">3.8 æ„å»º</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-9-%E6%8B%BC%E6%8E%A5"><span class="toc-text">3.9 æ‹¼æ¥</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-10-%E6%88%AA%E5%8F%96"><span class="toc-text">3.10 æˆªå–</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-11-%E7%94%9F%E6%88%90"><span class="toc-text">3.11 ç”Ÿæˆ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-12-%E6%9F%A5%E6%89%BE%E4%B8%8E%E5%88%A4%E6%96%AD"><span class="toc-text">3.12 æŸ¥æ‰¾ä¸åˆ¤æ–­</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-13-%E6%8E%92%E5%BA%8F%E4%B8%8E%E5%8E%BB%E9%87%8D"><span class="toc-text">3.13 æ’åºä¸å»é‡</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-14-%E5%8C%96%E7%AE%80"><span class="toc-text">3.14 åŒ–ç®€</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-15-%E6%94%B6%E9%9B%86"><span class="toc-text">3.15 æ”¶é›†</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-16-%E6%94%B6%E9%9B%86%E5%99%A8"><span class="toc-text">3.16 æ”¶é›†å™¨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-17-%E4%B8%8B%E6%B8%B8%E6%94%B6%E9%9B%86%E5%99%A8"><span class="toc-text">3.17 ä¸‹æ¸¸æ”¶é›†å™¨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-18-%E5%9F%BA%E6%9C%AC%E6%B5%81"><span class="toc-text">3.18 åŸºæœ¬æµ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-19-%E5%B9%B6%E8%A1%8C"><span class="toc-text">3.19 å¹¶è¡Œ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-20-%E6%95%88%E7%8E%87"><span class="toc-text">3.20 æ•ˆç‡</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-%E5%AE%9E%E9%99%85%E5%BA%94%E7%94%A8"><span class="toc-text">4. å®é™…åº”ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-%E6%95%B0%E6%8D%AE%E7%BB%9F%E8%AE%A1%E5%88%86%E6%9E%90"><span class="toc-text">4.1 æ•°æ®ç»Ÿè®¡åˆ†æ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2-%E5%BC%82%E6%AD%A5%E5%A4%84%E7%90%86"><span class="toc-text">4.2 å¼‚æ­¥å¤„ç†</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-3-%E6%A1%86%E6%9E%B6%E8%AE%BE%E8%AE%A1"><span class="toc-text">4.3 æ¡†æ¶è®¾è®¡</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-1-%E5%B0%86%E6%9C%AA%E7%9F%A5%E4%BA%A4%E7%BB%99%E5%AD%90%E7%B1%BB"><span class="toc-text">4.3.1 å°†æœªçŸ¥äº¤ç»™å­ç±»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-2-%E5%B0%86%E6%9C%AA%E7%9F%A5%E4%BA%A4%E7%BB%99%E7%94%A8%E6%88%B7"><span class="toc-text">4.3.2 å°†æœªçŸ¥äº¤ç»™ç”¨æˆ·</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-3-%E5%BB%B6%E8%BF%9F%E6%8B%BC%E6%8E%A5%E6%9D%A1%E4%BB%B6"><span class="toc-text">4.3.3 å»¶è¿Ÿæ‹¼æ¥æ¡ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-4-%E5%81%8F%E9%97%A8%E7%94%A8%E6%B3%95"><span class="toc-text">4.3.4 åé—¨ç”¨æ³•</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-4-%E5%B9%B6%E8%A1%8C%E8%AE%A1%E7%AE%97"><span class="toc-text">4.4 å¹¶è¡Œè®¡ç®—</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-5-UI-%E4%BA%8B%E4%BB%B6"><span class="toc-text">4.5 UI äº‹ä»¶</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86"><span class="toc-text">5. å®ç°åŸç†</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1-lambda-%E5%8E%9F%E7%90%86"><span class="toc-text">5.1 lambda åŸç†</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-1-%E7%AC%AC%E4%B8%80%E6%AD%A5%EF%BC%8C%E7%94%9F%E6%88%90%E9%9D%99%E6%80%81%E6%96%B9%E6%B3%95"><span class="toc-text">5.1.1 ç¬¬ä¸€æ­¥ï¼Œç”Ÿæˆé™æ€æ–¹æ³•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-2-%E7%AC%AC%E4%BA%8C%E6%AD%A5%EF%BC%8C%E7%94%9F%E6%88%90%E5%AE%9E%E7%8E%B0%E7%B1%BB%E5%AD%97%E8%8A%82%E7%A0%81"><span class="toc-text">5.1.2 ç¬¬äºŒæ­¥ï¼Œç”Ÿæˆå®ç°ç±»å­—èŠ‚ç </span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-2-%E6%96%B9%E6%B3%95%E5%BC%95%E7%94%A8%E5%8E%9F%E7%90%86"><span class="toc-text">5.2 æ–¹æ³•å¼•ç”¨åŸç†</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-3-%E9%97%AD%E5%8C%85%E5%8E%9F%E7%90%86"><span class="toc-text">5.3 é—­åŒ…åŸç†</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-4-Stream-%E6%9E%84%E5%BB%BA"><span class="toc-text">5.4 Stream æ„å»º</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/55821/" title="ã€è®¾è®¡æ¨¡å¼ã€‘è§‚å¯Ÿè€…æ¨¡å¼">ã€è®¾è®¡æ¨¡å¼ã€‘è§‚å¯Ÿè€…æ¨¡å¼</a><time datetime="2024-10-16T00:48:00.000Z" title="æ›´æ–°äº 2024-10-16 08:48:00">2024-10-16</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/35945/" title="ã€è®¾è®¡æ¨¡å¼ã€‘ä»£ç†æ¨¡å¼">ã€è®¾è®¡æ¨¡å¼ã€‘ä»£ç†æ¨¡å¼</a><time datetime="2024-10-10T03:12:00.000Z" title="æ›´æ–°äº 2024-10-10 11:12:00">2024-10-10</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/53990/" title="ã€è®¾è®¡æ¨¡å¼ã€‘å•ä¾‹æ¨¡å¼">ã€è®¾è®¡æ¨¡å¼ã€‘å•ä¾‹æ¨¡å¼</a><time datetime="2024-09-24T01:42:00.000Z" title="æ›´æ–°äº 2024-09-24 09:42:00">2024-09-24</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/53989/" title="ã€è®¾è®¡æ¨¡å¼ã€‘ç­–ç•¥æ¨¡å¼">ã€è®¾è®¡æ¨¡å¼ã€‘ç­–ç•¥æ¨¡å¼</a><time datetime="2024-07-28T09:13:00.000Z" title="æ›´æ–°äº 2024-07-28 17:13:00">2024-07-28</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/45112/" title="ã€è®¾è®¡æ¨¡å¼ã€‘å»ºé€ è€…æ¨¡å¼">ã€è®¾è®¡æ¨¡å¼ã€‘å»ºé€ è€…æ¨¡å¼</a><time datetime="2024-07-13T09:16:00.000Z" title="æ›´æ–°äº 2024-07-13 17:16:00">2024-07-13</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright"><span><b>&copy;2024</b></span><span><b>&nbsp;&nbsp;By æœ¨åˆæ¯äº†</b></span></div><div class="footer_custom_text">ã€The future of the past is nowã€‘</div><div id="workboard"></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" title="åšå®¢æ¡†æ¶ä¸ºHexo"><img src="https://img.shields.io/badge/Frame-Hexo-blue?logo=hexo" alt=""/></a><a class="github-badge" target="_blank" href="https://butterfly.js.org/" style="margin-inline:5px" title="ä¸»é¢˜ä¸ºButterfly"><img src="https://img.shields.io/badge/Frame-Butterfly-%237957D5?logo=buefy&amp;logoColor=white" alt=""/></a><a class="github-badge" target="_blank" href="https://vercel.com/" style="margin-inline:5px" title="æœ¬ç«™æ‰˜ç®¡äºVercel"><img src="https://img.shields.io/badge/Hosted-Vercel-green?logo=vercel&amp;logoColor=white" alt=""/></a><a class="github-badge" target="_blank" href="https://www.aliyun.com/" style="margin-inline:5px" title="æœ¬ç½‘ç«™ç”±é˜¿é‡Œäº‘æä¾›å¯¹è±¡å­˜å‚¨æœåŠ¡"><img src="https://img.shields.io/badge/Bucket-é˜¿é‡Œäº‘oss-F0AC11?logo=automattic&amp;logoColor=white" alt=""/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" title="æœ¬ç½‘ç«™æºç ç”±Githubæä¾›å­˜å‚¨ä»“åº“"><img src="https://img.shields.io/badge/Source-Github-%23CC2ED1?logo=github" alt=""/></a></p></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button class="darkmode" type="button" title="åˆ‡æ¢æ¨¡å¼" onclick="darkmode()"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="share" type="button" title="åˆ†äº«é“¾æ¥" onclick="share()"><i class="fas fa-share-nodes"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button><button id="go-down" type="button" title="ç›´è¾¾åº•éƒ¨" onclick="btf.scrollToDest(document.body.scrollHeight, 500)"><i class="fas fa-arrow-down"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.2.0/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"></div><script async src="https://cdn1.tianli0.top/npm/vue@2.6.14/dist/vue.min.js"></script><script async src="https://cdn1.tianli0.top/npm/element-ui@2.15.6/lib/index.js"></script><script src="https://cdn.bootcdn.net/ajax/libs/clipboard.js/2.0.11/clipboard.min.js"></script><script async src="https://fastly.jsdelivr.net/gh/muyoukule/blog-static-resource/js/muyoukule.js"></script><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script><script data-pjax defer src="https://fastly.jsdelivr.net/gh/muyoukule/muyoukule.github.io/js/custom/fixed_card_widget.js"></script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/click-show-text.min.js" data-mobile="true" data-text="Freedom,Enthusiasm,Patience,Love" data-fontsize="20px" data-random="true" async="async"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/metingjs/dist/Meting.min.js"></script><script src="https://lib.baomitu.com/pjax/0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show","#fixedcard-dashboard",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener
  btf.removeGlobalFnEvent('pjax')
  btf.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="fixedcard-dashboard"><button class="fixedcard-activebtn" type="button" title="ç”¨æˆ·ä¿¡æ¯" onclick="FixedCardWidget(&quot;class&quot;,&quot;card-info&quot;,&quot;0&quot;)"><i class="fas fa-address-book"></i></button><button class="fixedcard-activebtn" type="button" title="æœ€æ–°æ–‡ç« " onclick="FixedCardWidget(&quot;class&quot;,&quot;card-recent-post&quot;,&quot;0&quot;)"><i class="fas fa-history"></i></button><div class="fixedcard-user-avatar fixedcard-activebtn" onclick="RemoveFixedCardWidget()"><img class="fixedcard-user-avatar-img" src="/img/avatar.png" title="æœ¨åˆæ¯äº†"></div></div><div class="docsearch-wrap"><div id="docsearch" style="display:none"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3.5.2/dist/style.min.css"/><script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3.5.2/dist/umd/index.min.js"></script><script>(() => {
  docsearch(Object.assign({
    appId: '8Y220YX5OM',
    apiKey: 'e8862f5d2e0ebdce05962b4b98dad983',
    indexName: 'zz-muyoukule',
    container: '#docsearch',
  }, {"placeholder":"Please enter search keywords"}))

  const handleClick = () => {
    document.querySelector('.DocSearch-Button').click()
  }

  const searchClickFn = () => {
    btf.addEventListenerPjax(document.querySelector('#search-button > .search'), 'click', handleClick)
  }

  searchClickFn()
  window.addEventListener('pjax:complete', searchClickFn)
})()</script></div></div><!-- hexo injector body_end start --><div class="js-pjax"><script async="async">var arr = document.getElementsByClassName('recent-post-item');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '2s');
    arr[i].setAttribute('data-wow-delay', '200ms');
    arr[i].setAttribute('data-wow-offset', '50');
    arr[i].setAttribute('data-wow-iteration', '1');
  }</script><script async="async">var arr = document.getElementsByClassName('card-widget');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '');
    arr[i].setAttribute('data-wow-delay', '');
    arr[i].setAttribute('data-wow-offset', '');
    arr[i].setAttribute('data-wow-iteration', '');
  }</script></div><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow.min.js"></script><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow_init.js"></script><!-- hexo injector body_end end --></body></html>