<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>å›½äº§&quot;çŒ›ç”·&quot;â€”â€”MyBatis-Plus | muyoukule</title><meta name="author" content="æœ¨åˆæ¯äº†"><meta name="copyright" content="æœ¨åˆæ¯äº†"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="MyBatis-Pluså®˜ç½‘ 1 ï¼šhttps:&#x2F;&#x2F;baomidou.com&#x2F; MyBatis-Pluså®˜ç½‘ 2ï¼šhttps:&#x2F;&#x2F;mybatis.plus&#x2F; 1. MyBatis-Plus æ¦‚è¿°1.1 ä¸ºä»€ä¹ˆè¦å­¦ï¼ŸMyBatis-Plusåªéœ€ç®€å•é…ç½®å³å¯å¿«é€Ÿè¿›è¡Œå•è¡¨ CRUD æ“ä½œï¼Œç®€å•çš„ CRUD æ“ä½œä¸å†éœ€è¦æˆ‘ä»¬ä¹¦å†™ã€‚ï¼ˆè‚¯å®šä¸æ˜¯å› ä¸ºè¿™ä¸ªï¼‰ MyBatis-Plus ç”±å›½äººå¼€å‘ï¼Œæ–‡æ¡£å¾ˆè¯¦ç»†æ˜“ä¸Šæ‰‹">
<meta property="og:type" content="article">
<meta property="og:title" content="å›½äº§&quot;çŒ›ç”·&quot;â€”â€”MyBatis-Plus">
<meta property="og:url" content="https://zz.muyoukule.cn/posts/Mybatis-Plus/index.html">
<meta property="og:site_name" content="muyoukule">
<meta property="og:description" content="MyBatis-Pluså®˜ç½‘ 1 ï¼šhttps:&#x2F;&#x2F;baomidou.com&#x2F; MyBatis-Pluså®˜ç½‘ 2ï¼šhttps:&#x2F;&#x2F;mybatis.plus&#x2F; 1. MyBatis-Plus æ¦‚è¿°1.1 ä¸ºä»€ä¹ˆè¦å­¦ï¼ŸMyBatis-Plusåªéœ€ç®€å•é…ç½®å³å¯å¿«é€Ÿè¿›è¡Œå•è¡¨ CRUD æ“ä½œï¼Œç®€å•çš„ CRUD æ“ä½œä¸å†éœ€è¦æˆ‘ä»¬ä¹¦å†™ã€‚ï¼ˆè‚¯å®šä¸æ˜¯å› ä¸ºè¿™ä¸ªï¼‰ MyBatis-Plus ç”±å›½äººå¼€å‘ï¼Œæ–‡æ¡£å¾ˆè¯¦ç»†æ˜“ä¸Šæ‰‹">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://zz.muyoukule.cn/img/avatar_muyoukule.jpg">
<meta property="article:published_time" content="2024-04-04T09:00:00.000Z">
<meta property="article:modified_time" content="2024-04-04T09:00:00.000Z">
<meta property="article:author" content="æœ¨åˆæ¯äº†">
<meta property="article:tag" content="MyBatisPlus">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://zz.muyoukule.cn/img/avatar_muyoukule.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://zz.muyoukule.cn/posts/Mybatis-Plus/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: {"appId":"3T0VNEZ7MW","apiKey":"18b3ac6ccf7593531cde30d3383a30f2","indexName":"MyBlog","hits":{"per_page":6},"languages":{"input_placeholder":"æœç´¢æ–‡ç« ","hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}","hits_stats":"æ‰¾åˆ° ${hits} æ¡ç»“æœï¼Œç”¨æ—¶ ${time} æ¯«ç§’"}},
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"ç¹","msgToSimplifiedChinese":"ç°¡"},
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"è·ç¦»æœ¬æ–‡ä¸Šæ¬¡æ›´æ–°å·²ç»è¿‡å»","messageNext":"å¤©ï¼Œè¯·æ³¨æ„æ—¶æ•ˆæ€§ã€‚"},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'å¤©',
  dateSuffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: {"limitCount":20,"languages":{"author":"ä½œè€…: æœ¨åˆæ¯äº†","link":"é“¾æ¥: ","source":"æ¥æº: muyoukule","info":"è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"ä½ å·²åˆ‡æ¢ä¸ºç¹ä½“ä¸­æ–‡","cht_to_chs":"ä½ å·²åˆ‡æ¢ä¸ºç®€ä½“ä¸­æ–‡","day_to_night":"ä½ å·²åˆ‡æ¢ä¸ºæ·±è‰²æ¨¡å¼","night_to_day":"ä½ å·²åˆ‡æ¢ä¸ºæµ…è‰²æ¨¡å¼","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: 'åŠ è½½æ›´å¤š'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'å›½äº§"çŒ›ç”·"â€”â€”MyBatis-Plus',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-04-04 17:00:00'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/custom.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://cdn1.tianli0.top/npm/element-ui@2.15.6/packages/theme-chalk/lib/index.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css"><div id="myscoll"></div><!-- hexo injector head_end start --><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/animate.min.css" media="print" onload="this.media='screen'"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.1.1"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar_muyoukule.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">21</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">15</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">5</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-book"></i><span> æ–‡ç« </span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> å½’æ¡£</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></li></ul></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> å¨±ä¹</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> éŸ³ä¹</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> å‹é“¾</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-heart"></i><span> å…³äº</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/about_website/"><i class="fa-fw fas fa-laptop-house"></i><span> å…³äºæœ¬ç«™</span></a></li><li><a class="site-page child" href="/about_me/"><i class="fa-fw fas fa-address-card"></i><span> å…³äºæˆ‘</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="muyoukule"><span class="site-name">muyoukule</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> æœç´¢</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-book"></i><span> æ–‡ç« </span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> å½’æ¡£</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></li></ul></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> å¨±ä¹</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> éŸ³ä¹</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> å‹é“¾</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-heart"></i><span> å…³äº</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/about_website/"><i class="fa-fw fas fa-laptop-house"></i><span> å…³äºæœ¬ç«™</span></a></li><li><a class="site-page child" href="/about_me/"><i class="fa-fw fas fa-address-card"></i><span> å…³äºæˆ‘</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">å›½äº§&quot;çŒ›ç”·&quot;â€”â€”MyBatis-Plus</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2024-04-04T09:00:00.000Z" title="å‘è¡¨äº 2024-04-04 17:00:00">2024-04-04</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2024-04-04T09:00:00.000Z" title="æ›´æ–°äº 2024-04-04 17:00:00">2024-04-04</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/SSM/">SSM</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">å­—æ•°æ€»è®¡:</span><span class="word-count">10.3k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>42åˆ†é’Ÿ</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="å›½äº§&quot;çŒ›ç”·&quot;â€”â€”MyBatis-Plus"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>MyBatis-Pluså®˜ç½‘ 1 ï¼š<a target="_blank" rel="noopener" href="https://baomidou.com/">https://baomidou.com/</a></p>
<p>MyBatis-Pluså®˜ç½‘ 2ï¼š<a target="_blank" rel="noopener" href="https://mybatis.plus/">https://mybatis.plus/</a></p>
<h1 id="1-MyBatis-Plus-æ¦‚è¿°"><a href="#1-MyBatis-Plus-æ¦‚è¿°" class="headerlink" title="1. MyBatis-Plus æ¦‚è¿°"></a>1. MyBatis-Plus æ¦‚è¿°</h1><h2 id="1-1-ä¸ºä»€ä¹ˆè¦å­¦ï¼Ÿ"><a href="#1-1-ä¸ºä»€ä¹ˆè¦å­¦ï¼Ÿ" class="headerlink" title="1.1 ä¸ºä»€ä¹ˆè¦å­¦ï¼Ÿ"></a>1.1 ä¸ºä»€ä¹ˆè¦å­¦ï¼Ÿ</h2><p><del>MyBatis-Plusåªéœ€ç®€å•é…ç½®å³å¯å¿«é€Ÿè¿›è¡Œå•è¡¨ CRUD æ“ä½œï¼Œç®€å•çš„ CRUD æ“ä½œä¸å†éœ€è¦æˆ‘ä»¬ä¹¦å†™ã€‚ï¼ˆè‚¯å®šä¸æ˜¯å› ä¸ºè¿™ä¸ªï¼‰</del></p>
<p>MyBatis-Plus ç”±å›½äººå¼€å‘ï¼Œæ–‡æ¡£å¾ˆè¯¦ç»†æ˜“ä¸Šæ‰‹ï¼Œç¼–ç ç¬¦åˆå›½äººä¹ æƒ¯ï¼Œå¹¶ä¸”å·²è¿ç»­ 5 å¹´ï¼ˆ2017ã€2018 ã€2019ã€2020ã€2021ï¼‰è·å¾—â€OSC å¹´åº¦æœ€å—æ¬¢è¿ä¸­å›½å¼€æºè½¯ä»¶â€æ®Šè£ã€‚æœ€æœ€æœ€é‡è¦çš„æ˜¯å®˜æ–¹ä¸ºæˆ‘ä»¬æä¾›äº†è‡ªåŠ¨ç”Ÿæˆä»£ç çš„ä»£ç ç”Ÿæˆå™¨â€¦çœŸçš„æ˜¯å¤ªè´´å¿ƒäº†ï¼ï¼ğŸ¤©è¿™ä¸å°±ç›¸å½“äºæ˜¯åˆ«äººéƒ½æŠŠé¥­å–‚ä½ å˜´é‡Œäº†å—ï¼Ÿä½ è¿˜æœ‰ä»€ä¹ˆç†ç”±ä¸åƒå‘¢ï¼ŸğŸ˜‚</p>
<p><strong>PSï¼šæœ¬æ–‡ä¸­ï¼ŒMP æ˜¯ MyBatis-Plus çš„ç®€å†™ã€‚</strong></p>
<h2 id="1-2-ç®€ä»‹"><a href="#1-2-ç®€ä»‹" class="headerlink" title="1.2 ç®€ä»‹"></a>1.2 ç®€ä»‹</h2><p><a target="_blank" rel="noopener" href="https://github.com/baomidou/mybatis-plus">MyBatis-Plus</a>ï¼ˆç®€ç§° MPï¼‰æ˜¯ä¸€ä¸ª <a target="_blank" rel="noopener" href="https://www.mybatis.org/mybatis-3/">MyBatis</a> çš„å¢å¼ºå·¥å…·ï¼Œåœ¨ MyBatis çš„åŸºç¡€ä¸Šåªåšå¢å¼ºä¸åšæ”¹å˜ï¼Œä¸ºç®€åŒ–å¼€å‘ã€æé«˜æ•ˆç‡è€Œç”Ÿã€‚</p>
<p><img src="https://muyoukule-blog-pics.oss-cn-chengdu.aliyuncs.com/SSMIMG/MyBatisPlus/MyBatis-Plus%E7%AE%80%E4%BB%8B.png" alt="MyBatis-Plusç®€ä»‹"></p>
<p>ä»è¿™å¼ å›¾ä¸­æˆ‘ä»¬å¯ä»¥çœ‹å‡º MP æ—¨åœ¨æˆä¸º MyBatis çš„æœ€å¥½æ­æ¡£ï¼Œè€Œä¸æ˜¯æ›¿æ¢ MyBatis ï¼Œæ‰€ä»¥å¯ä»¥ç†è§£ä¸º MP æ˜¯ MyBatis çš„ä¸€å¥—å¢å¼ºå·¥å…·ï¼Œå®ƒæ˜¯åœ¨ MyBatis çš„åŸºç¡€ä¸Šè¿›è¡Œå¼€å‘çš„ï¼Œæˆ‘ä»¬è™½ç„¶ä½¿ç”¨ MP ä½†æ˜¯åº•å±‚ä¾ç„¶æ˜¯ MyBatis çš„ä¸œè¥¿ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨ MP ä¸­å†™ MyBatis çš„å†…å®¹ã€‚</p>
<p><strong>PSï¼šä½¿ç”¨ MP å¯ä»¥èŠ‚çœä»£ç çš„ç¼–å†™ï¼Œå°½é‡ <font color="red">ä¸è¦åŒæ—¶</font> å¯¼å…¥ MP å’Œ MyBatisï¼Œé¿å…å­˜åœ¨ä¾èµ–é”™è¯¯ã€‚</strong></p>
<h2 id="1-3-ç‰¹æ€§"><a href="#1-3-ç‰¹æ€§" class="headerlink" title="1.3 ç‰¹æ€§"></a>1.3 ç‰¹æ€§</h2><ul>
<li><strong>æ— ä¾µå…¥</strong>ï¼šåªåšå¢å¼ºä¸åšæ”¹å˜ï¼Œå¼•å…¥å®ƒä¸ä¼šå¯¹ç°æœ‰å·¥ç¨‹äº§ç”Ÿå½±å“ï¼Œå¦‚ä¸èˆ¬é¡ºæ»‘</li>
<li><strong>æŸè€—å°</strong>ï¼šå¯åŠ¨å³ä¼šè‡ªåŠ¨æ³¨å…¥åŸºæœ¬ CURDï¼Œæ€§èƒ½åŸºæœ¬æ— æŸè€—ï¼Œç›´æ¥é¢å‘å¯¹è±¡æ“ä½œ</li>
<li><strong>å¼ºå¤§çš„ CRUD æ“ä½œ</strong>ï¼šå†…ç½®é€šç”¨ Mapperã€é€šç”¨ Serviceï¼Œä»…ä»…é€šè¿‡å°‘é‡é…ç½®å³å¯å®ç°å•è¡¨å¤§éƒ¨åˆ† CRUD æ“ä½œï¼Œæ›´æœ‰å¼ºå¤§çš„æ¡ä»¶æ„é€ å™¨ï¼Œæ»¡è¶³å„ç±»ä½¿ç”¨éœ€æ±‚ï¼ˆ  <font color="red">è¨€å¤–ä¹‹æ„ï¼Œç®€å•çš„ CRUD æ“ä½œä¸å†éœ€è¦æˆ‘ä»¬ä¹¦å†™</font>  ï¼‰</li>
<li><strong>æ”¯æŒ Lambda å½¢å¼è°ƒç”¨</strong>ï¼šé€šè¿‡ Lambda è¡¨è¾¾å¼ï¼Œæ–¹ä¾¿çš„ç¼–å†™å„ç±»æŸ¥è¯¢æ¡ä»¶ï¼Œæ— éœ€å†æ‹…å¿ƒå­—æ®µå†™é”™</li>
<li><strong>æ”¯æŒä¸»é”®è‡ªåŠ¨ç”Ÿæˆ</strong>ï¼šæ”¯æŒå¤šè¾¾ 4 ç§ä¸»é”®ç­–ç•¥(å†…å«åˆ†å¸ƒå¼å”¯ä¸€ ID ç”Ÿæˆå™¨ - Sequence)ï¼Œå¯è‡ªç”±é…ç½®ï¼Œå®Œç¾è§£å†³ä¸»é”®é—®é¢˜</li>
<li><strong>æ”¯æŒ ActiveRecord æ¨¡å¼</strong>ï¼šæ”¯æŒ ActiveRecord å½¢å¼è°ƒç”¨ï¼Œå®ä½“ç±»åªéœ€ç»§æ‰¿ Model ç±»å³å¯è¿›è¡Œå¼ºå¤§çš„ CRUD æ“ä½œ</li>
<li><strong>æ”¯æŒè‡ªå®šä¹‰å…¨å±€é€šç”¨æ“ä½œ</strong>ï¼šæ”¯æŒå…¨å±€é€šç”¨æ–¹æ³•æ³¨å…¥( Write once, use anywhere )</li>
<li><strong>å†…ç½®ä»£ç ç”Ÿæˆå™¨</strong>ï¼šé‡‡ç”¨ä»£ç æˆ–è€… Maven æ’ä»¶å¯å¿«é€Ÿç”Ÿæˆ Mapper ã€ Model ã€ Service ã€ Controller å±‚ä»£ç ï¼Œæ”¯æŒæ¨¡æ¿å¼•æ“ï¼Œæ›´æœ‰è¶…å¤šè‡ªå®šä¹‰é…ç½®ç­‰æ‚¨æ¥ä½¿ç”¨</li>
<li><strong>å†…ç½®åˆ†é¡µæ’ä»¶</strong>ï¼šåŸºäº MyBatis ç‰©ç†åˆ†é¡µï¼Œå¼€å‘è€…æ— éœ€å…³å¿ƒå…·ä½“æ“ä½œï¼Œé…ç½®å¥½æ’ä»¶ä¹‹åï¼Œå†™åˆ†é¡µç­‰åŒäºæ™®é€š List æŸ¥è¯¢</li>
<li><strong>åˆ†é¡µæ’ä»¶æ”¯æŒå¤šç§æ•°æ®åº“</strong>ï¼šæ”¯æŒ MySQLã€MariaDBã€Oracleã€DB2ã€H2ã€HSQLã€SQLiteã€Postgreã€SQLServer ç­‰å¤šç§æ•°æ®åº“</li>
<li><strong>å†…ç½®æ€§èƒ½åˆ†ææ’ä»¶</strong>ï¼šå¯è¾“å‡º SQL è¯­å¥ä»¥åŠå…¶æ‰§è¡Œæ—¶é—´ï¼Œå»ºè®®å¼€å‘æµ‹è¯•æ—¶å¯ç”¨è¯¥åŠŸèƒ½ï¼Œèƒ½å¿«é€Ÿæªå‡ºæ…¢æŸ¥è¯¢</li>
<li><strong>å†…ç½®å…¨å±€æ‹¦æˆªæ’ä»¶</strong>ï¼šæä¾›å…¨è¡¨ delete ã€ update æ“ä½œæ™ºèƒ½åˆ†æé˜»æ–­ï¼Œä¹Ÿå¯è‡ªå®šä¹‰æ‹¦æˆªè§„åˆ™ï¼Œé¢„é˜²è¯¯æ“ä½œ</li>
</ul>
<h1 id="2-å¿«é€Ÿå¼€å§‹"><a href="#2-å¿«é€Ÿå¼€å§‹" class="headerlink" title="2. å¿«é€Ÿå¼€å§‹"></a>2. å¿«é€Ÿå¼€å§‹</h1><p>æ¥ä¸‹æ¥å°†é€šè¿‡ä¸€ä¸ªç®€å•çš„ Demo æ¥é˜è¿° MP çš„å¼ºå¤§åŠŸèƒ½ï¼Œåœ¨æ­¤ä¹‹å‰ï¼Œå‡è®¾ä½ å·²ç»ï¼š</p>
<ul>
<li>æ‹¥æœ‰ Java å¼€å‘ç¯å¢ƒä»¥åŠç›¸åº” IDE</li>
<li>ç†Ÿæ‚‰ Spring Boot</li>
<li>ç†Ÿæ‚‰ Maven</li>
</ul>
<h2 id="2-1-ç¯å¢ƒå‡†å¤‡"><a href="#2-1-ç¯å¢ƒå‡†å¤‡" class="headerlink" title="2.1 ç¯å¢ƒå‡†å¤‡"></a>2.1 ç¯å¢ƒå‡†å¤‡</h2><p>ç°æœ‰ä¸€å¼  <code>User</code> è¡¨ï¼Œå…¶è¡¨ç»“æ„å¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th align="center">id</th>
<th align="center">name</th>
<th align="center">age</th>
<th align="center">email</th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center">Jone</td>
<td align="center">18</td>
<td align="center"><a href="mailto:&#x74;&#101;&#115;&#x74;&#x31;&#64;&#98;&#x61;&#x6f;&#109;&#x69;&#x64;&#111;&#117;&#46;&#x63;&#111;&#x6d;">&#x74;&#101;&#115;&#x74;&#x31;&#64;&#98;&#x61;&#x6f;&#109;&#x69;&#x64;&#111;&#117;&#46;&#x63;&#111;&#x6d;</a></td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">Jack</td>
<td align="center">20</td>
<td align="center"><a href="mailto:&#116;&#101;&#115;&#x74;&#50;&#64;&#x62;&#x61;&#111;&#x6d;&#x69;&#x64;&#111;&#117;&#x2e;&#99;&#x6f;&#109;">&#116;&#101;&#115;&#x74;&#50;&#64;&#x62;&#x61;&#111;&#x6d;&#x69;&#x64;&#111;&#117;&#x2e;&#99;&#x6f;&#109;</a></td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">Tom</td>
<td align="center">28</td>
<td align="center"><a href="mailto:&#x74;&#101;&#115;&#x74;&#x33;&#x40;&#x62;&#97;&#111;&#x6d;&#105;&#x64;&#x6f;&#x75;&#x2e;&#99;&#111;&#109;">&#x74;&#101;&#115;&#x74;&#x33;&#x40;&#x62;&#97;&#111;&#x6d;&#105;&#x64;&#x6f;&#x75;&#x2e;&#99;&#111;&#109;</a></td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">Sandy</td>
<td align="center">21</td>
<td align="center"><a href="mailto:&#116;&#101;&#115;&#116;&#x34;&#64;&#x62;&#x61;&#111;&#109;&#x69;&#x64;&#x6f;&#x75;&#46;&#99;&#111;&#x6d;">&#116;&#101;&#115;&#116;&#x34;&#64;&#x62;&#x61;&#111;&#109;&#x69;&#x64;&#x6f;&#x75;&#46;&#99;&#111;&#x6d;</a></td>
</tr>
<tr>
<td align="center">5</td>
<td align="center">Billie</td>
<td align="center">24</td>
<td align="center"><a href="mailto:&#116;&#x65;&#x73;&#x74;&#x35;&#64;&#x62;&#x61;&#x6f;&#109;&#105;&#100;&#111;&#x75;&#x2e;&#x63;&#111;&#109;">&#116;&#x65;&#x73;&#x74;&#x35;&#64;&#x62;&#x61;&#x6f;&#109;&#105;&#100;&#111;&#x75;&#x2e;&#x63;&#111;&#109;</a></td>
</tr>
</tbody></table>
<blockquote>
<p>æ­¥éª¤</p>
</blockquote>
<p>1ã€åˆ›å»ºä¸€ä¸ªæ•°æ®åº“ <code>mybatis_plus</code></p>
<p>2ã€åˆ›å»º user è¡¨</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> `<span class="keyword">user</span>`;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `<span class="keyword">user</span>`</span><br><span class="line">(</span><br><span class="line">    id <span class="type">BIGINT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;ä¸»é”®ID&#x27;</span>,</span><br><span class="line">    name <span class="type">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;å§“å&#x27;</span>,</span><br><span class="line">    age <span class="type">INT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;å¹´é¾„&#x27;</span>,</span><br><span class="line">    email <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;é‚®ç®±&#x27;</span>,</span><br><span class="line">    <span class="keyword">PRIMARY</span> KEY (id)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> `<span class="keyword">user</span>`;</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `<span class="keyword">user</span>` (id, name, age, email) <span class="keyword">VALUES</span></span><br><span class="line">(<span class="number">1</span>, <span class="string">&#x27;Jone&#x27;</span>, <span class="number">18</span>, <span class="string">&#x27;test1@baomidou.com&#x27;</span>),</span><br><span class="line">(<span class="number">2</span>, <span class="string">&#x27;Jack&#x27;</span>, <span class="number">20</span>, <span class="string">&#x27;test2@baomidou.com&#x27;</span>),</span><br><span class="line">(<span class="number">3</span>, <span class="string">&#x27;Tom&#x27;</span>, <span class="number">28</span>, <span class="string">&#x27;test3@baomidou.com&#x27;</span>),</span><br><span class="line">(<span class="number">4</span>, <span class="string">&#x27;Sandy&#x27;</span>, <span class="number">21</span>, <span class="string">&#x27;test4@baomidou.com&#x27;</span>),</span><br><span class="line">(<span class="number">5</span>, <span class="string">&#x27;Billie&#x27;</span>, <span class="number">24</span>, <span class="string">&#x27;test5@baomidou.com&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p><img src="https://muyoukule-blog-pics.oss-cn-chengdu.aliyuncs.com/SSMIMG/MyBatisPlus/%E5%88%9B%E5%BB%BAUser%E8%A1%A8.png" alt="åˆ›å»ºUserè¡¨"></p>
<p>3ã€ä½¿ç”¨ IDEA åˆå§‹åŒ–ä¸€ä¸ª SpringBoot é¡¹ç›® mybatis_plusï¼Œé€‰æ‹© Spring Web å’Œ Lombok ä¾èµ–è¿›è¡Œå¯¼å…¥ã€‚</p>
<p>4ã€å¯¼å…¥å…¶ä»–ä¾èµ–</p>
<p>ç”±äºè¿™ä¸ª <code>mybatis-plus-boot-starter</code> åŒ…å«å¯¹ Mybatis çš„è‡ªåŠ¨è£…é…ï¼Œå› æ­¤å®Œå…¨å¯ä»¥æ›¿æ¢æ‰ Mybatis çš„ starter ã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--æ•°æ®åº“é©±åŠ¨--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.31<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--mybatis-plus--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><font color="red"><strong>PSï¼šæ³¨æ„ SpringBoot ç‰ˆæœ¬è¦ä¸ Mybatis-Plus ç‰ˆæœ¬ç›¸å¯¹åº”</strong></font></p>
<p>5ã€ç¼–å†™é…ç½®æ–‡ä»¶ <code>application.yml</code> è¿æ¥æ•°æ®åº“</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">datasource:</span></span><br><span class="line">  <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">  <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/mybatis_plus?serverTimezone=Asia/Shanghai&amp;useUnicode=true&amp;characterEncoding=utf-8&amp;zeroDateTimeBehavior=convertToNull&amp;useSSL=false&amp;allowPublicKeyRetrieval=true</span></span><br><span class="line">  <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">  <span class="attr">password:</span> <span class="string">root</span></span><br></pre></td></tr></table></figure>

<p>6ã€ç¼–å†™å®ä½“ç±» <code>User.java</code> (æ­¤å¤„ä½¿ç”¨äº† <a target="_blank" rel="noopener" href="https://www.projectlombok.org/">Lombok</a> ç®€åŒ–ä»£ç )</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@TableName(&quot;`user`&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>7ã€ç¼–å†™ Mapper åŒ…ä¸‹çš„ <code>UserMapper</code>æ¥å£</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;User&gt; &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>8ã€åœ¨ Spring Boot å¯åŠ¨ç±»ä¸­æ·»åŠ  <code>@MapperScan</code> æ³¨è§£ï¼Œæ‰«æ Mapper æ–‡ä»¶å¤¹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="comment">// æ‰«æ mapper æ–‡ä»¶å¤¹</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;com.muyoukule.mapper&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MybatisPlusApplication</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(MybatisPlusApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-2-æ ‡å‡†CRUDä½¿ç”¨"><a href="#2-2-æ ‡å‡†CRUDä½¿ç”¨" class="headerlink" title="2.2 æ ‡å‡†CRUDä½¿ç”¨"></a>2.2 æ ‡å‡†CRUDä½¿ç”¨</h2><p>å¯¹äºæ ‡å‡†çš„ CRUD åŠŸèƒ½ MP éƒ½æä¾›äº†å“ªäº›æ–¹æ³•å¯ä»¥ä½¿ç”¨å‘¢ï¼Ÿ</p>
<blockquote>
<p>æ–°å¢ Insert</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ’å…¥ä¸€æ¡è®°å½•</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">insert</span><span class="params">(T t)</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>Tï¼šæ³›å‹ï¼Œæ–°å¢ç”¨æ¥ä¿å­˜æ–°å¢æ•°æ®</p>
</li>
<li><p>intï¼šè¿”å›å€¼ï¼Œæ–°å¢æˆåŠŸåè¿”å›1ï¼Œæ²¡æœ‰æ–°å¢æˆåŠŸè¿”å›çš„æ˜¯0</p>
</li>
</ul>
<p>åœ¨æµ‹è¯•ç±»ä¸­è¿›è¡Œæ–°å¢æ“ä½œï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MybatisPlusApplicationTests</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testSave</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">        <span class="comment">// æ³¨æ„ï¼šè¿™é‡Œæ²¡æœ‰æ’å…¥id</span></span><br><span class="line">        user.setName(<span class="string">&quot;æœ¨åˆæ¯äº†&quot;</span>);</span><br><span class="line">        user.setAge(<span class="number">18</span>);</span><br><span class="line">        user.setEmail(<span class="string">&quot;example@gmail.com&quot;</span>);</span><br><span class="line">        <span class="comment">// å—å½±å“çš„è¡Œæ•°</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> userMapper.insert(user);</span><br><span class="line">        System.out.println(i);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ§åˆ¶å°ç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1</span><br></pre></td></tr></table></figure>

<p>è¯´æ˜æ•°æ®æ’å…¥æˆåŠŸï¼Œè¿™æ—¶å€™åˆ°æ•°æ®åº“ä¸­æŸ¥çœ‹ï¼Œæ•°æ®åº“è¡¨ä¸­å°±ä¼šæ·»åŠ ä¸€æ¡æ•°æ®ï¼š</p>
<p><img src="https://muyoukule-blog-pics.oss-cn-chengdu.aliyuncs.com/SSMIMG/MyBatisPlus/%E6%8F%92%E5%85%A5%E4%B8%80%E6%9D%A1%E6%95%B0%E6%8D%AE.png" alt="æ’å…¥ä¸€æ¡æ•°æ®"></p>
<p>ä½†æ˜¯æˆ‘ä»¬å‘ç°ï¼šæˆ‘ä»¬æ˜æ˜æ²¡æœ‰è®¾ç½® IDï¼Œæ’å…¥æ—¶å±…ç„¶è‡ªåŠ¨ç”Ÿæˆäº† IDï¼Œè€Œä¸”ç”Ÿæˆçš„ ID ä¼¼ä¹æœ‰ç‚¹ â€œ å¥‡æ€ª â€ã€‚é‚£è¿™ä¸ªä¸»é”® ID æ˜¯å¦‚ä½•æ¥çš„ï¼Ÿæˆ‘ä»¬æ›´æƒ³è¦çš„æ˜¯ä¸»é”®è‡ªå¢ï¼Œåº”è¯¥æ˜¯ 6 æ‰å¯¹ï¼Œè¿™ä¸ªæ˜¯æˆ‘ä»¬åé¢è¦å­¦ä¹ çš„ <strong>ä¸»é”®ç”Ÿæˆç­–ç•¥</strong>ï¼Œè¿™å—çš„è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬æš‚æ—¶å…ˆæ”¾æ”¾ã€‚</p>
<blockquote>
<p>åˆ é™¤ Delete</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">deleteById</span> <span class="params">(Serializable id)</span></span><br></pre></td></tr></table></figure>

<ul>
<li>Serializableï¼šå‚æ•°ç±»å‹</li>
<li>intï¼šè¿”å›å€¼ç±»å‹ï¼Œæ•°æ®åˆ é™¤æˆåŠŸè¿”å› 1ï¼Œæœªåˆ é™¤æ•°æ®è¿”å› 0</li>
</ul>
<p>æ€è€ƒï¼šå‚æ•°ç±»å‹ä¸ºä»€ä¹ˆæ˜¯ä¸€ä¸ªåºåˆ—åŒ–ç±»ï¼Ÿ</p>
<img src="https://muyoukule-blog-pics.oss-cn-chengdu.aliyuncs.com/SSMIMG/MyBatisPlus/Serializable%E5%85%B3%E7%B3%BB%E5%9B%BE.png" alt="Serializableå…³ç³»å›¾" style="zoom:67%;">

<p>ä»è¿™å¼ å›¾å¯ä»¥çœ‹å‡ºï¼š</p>
<ul>
<li>String å’Œ Number æ˜¯ Serializable çš„å­ç±»</li>
<li>Number åˆæ˜¯ Floatï¼ŒDoubleï¼ŒInteger ç­‰ç±»çš„çˆ¶ç±»</li>
<li>èƒ½ä½œä¸ºä¸»é”®çš„æ•°æ®ç±»å‹éƒ½å·²ç»æ˜¯ Serializable çš„å­ç±»</li>
<li>MP ä½¿ç”¨ Serializable ä½œä¸ºå‚æ•°ç±»å‹ï¼Œå°±å¥½æ¯”æˆ‘ä»¬å¯ä»¥ç”¨ Object æ¥æ”¶ä»»ä½•æ•°æ®ç±»å‹ä¸€æ ·ã€‚</li>
</ul>
<p>åœ¨æµ‹è¯•ç±»ä¸­è¿›è¡Œåˆ é™¤æ“ä½œï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testDelete</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> userMapper.deleteById(<span class="number">1775096675078713345L</span>);</span><br><span class="line">    System.out.println(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ§åˆ¶å°ç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1</span><br></pre></td></tr></table></figure>

<p>è¯´æ˜æ•°æ®åˆ é™¤å…¥æˆåŠŸï¼Œè¿™æ—¶å€™åˆ°æ•°æ®åº“ä¸­æŸ¥çœ‹ï¼Œæ•°æ®åº“è¡¨ä¸­ ID ä¸º <code>1775096675078713345</code> çš„æ•°æ®å°±ä¼šè¢«åˆ é™¤ï¼š</p>
<p><img src="https://muyoukule-blog-pics.oss-cn-chengdu.aliyuncs.com/SSMIMG/MyBatisPlus/%E5%88%A0%E9%99%A4%E4%B8%80%E6%9D%A1%E6%95%B0%E6%8D%AE.png" alt="åˆ é™¤ä¸€æ¡æ•°æ®"></p>
<blockquote>
<p>ä¿®æ”¹ Update</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">updateById</span><span class="params">(T t)</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>Tï¼šæ³›å‹ï¼Œéœ€è¦ä¿®æ”¹çš„æ•°æ®å†…å®¹ï¼Œæ³¨æ„å› ä¸ºæ˜¯æ ¹æ® ID è¿›è¡Œä¿®æ”¹ï¼Œæ‰€ä»¥ä¼ å…¥çš„å¯¹è±¡ä¸­éœ€è¦æœ‰ ID å±æ€§å€¼</p>
</li>
<li><p>intï¼šè¿”å›å€¼ï¼Œä¿®æ”¹æˆåŠŸåè¿”å› 1ï¼Œæœªä¿®æ”¹æ•°æ®è¿”å› 0</p>
</li>
</ul>
<p>åœ¨æµ‹è¯•ç±»ä¸­è¿›è¡Œä¿®æ”¹æ“ä½œï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testUpdate</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">    user.setId(<span class="number">1L</span>);</span><br><span class="line">    user.setName(<span class="string">&quot;Jone001&quot;</span>);</span><br><span class="line">    user.setAge(<span class="number">20</span>);</span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> userMapper.updateById(user);</span><br><span class="line">    System.out.println(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ§åˆ¶å°ç»“æœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1</span><br></pre></td></tr></table></figure>

<p>è¯´æ˜æ•°æ®ä¿®æ”¹æˆåŠŸï¼Œè¿™æ—¶å€™åˆ°æ•°æ®åº“ä¸­æŸ¥çœ‹ï¼Œå‘ç°ä¿®æ”¹æˆåŠŸï¼š</p>
<p><img src="https://muyoukule-blog-pics.oss-cn-chengdu.aliyuncs.com/SSMIMG/MyBatisPlus/%E4%BF%AE%E6%94%B9%E4%B8%80%E6%9D%A1%E6%95%B0%E6%8D%AE.png" alt="ä¿®æ”¹ä¸€æ¡æ•°æ®"></p>
<blockquote>
<p>æŸ¥è¯¢ Select</p>
</blockquote>
<p><strong>æ ¹æ® ID æŸ¥è¯¢</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">T <span class="title function_">selectById</span> <span class="params">(Serializable id)</span></span><br></pre></td></tr></table></figure>

<ul>
<li>Serializableï¼šå‚æ•°ç±»å‹ï¼Œä¸»é”® ID çš„å€¼</li>
<li>Tï¼šæ ¹æ® ID æŸ¥è¯¢åªä¼šè¿”å›ä¸€æ¡æ•°æ®</li>
</ul>
<p>åœ¨æµ‹è¯•ç±»ä¸­è¿›è¡ŒæŸ¥è¯¢æ“ä½œï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testSelectById</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userMapper.selectById(<span class="number">1L</span>);</span><br><span class="line">    System.out.println(user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">User(id=1, name=Jone001, age=20, email=test1@baomidou.com)</span><br></pre></td></tr></table></figure>

<p><strong>æŸ¥è¯¢æ‰€æœ‰</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;T&gt; <span class="title function_">selectList</span><span class="params">(Wrapper&lt;T&gt; queryWrapper)</span></span><br></pre></td></tr></table></figure>

<ul>
<li>Wrapperï¼šç”¨æ¥æ„å»ºæ¡ä»¶æŸ¥è¯¢çš„æ¡ä»¶ï¼Œç›®å‰æˆ‘ä»¬æ²¡æœ‰å¯ç›´æ¥ä¼ ä¸º Null</li>
<li>List<T>ï¼šå› ä¸ºæŸ¥è¯¢çš„æ˜¯æ‰€æœ‰ï¼Œæ‰€ä»¥è¿”å›çš„æ•°æ®æ˜¯ä¸€ä¸ªé›†åˆ</T></li>
</ul>
<p>åœ¨æµ‹è¯•ç±»ä¸­è¿›è¡ŒæŸ¥è¯¢æ“ä½œï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testSelectAll</span><span class="params">()</span> &#123;</span><br><span class="line">    List&lt;User&gt; userList = userMapper.selectList(<span class="literal">null</span>);</span><br><span class="line">    userList.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ§åˆ¶å°è¾“å‡ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">User(id=1, name=Jone001, age=20, email=test1@baomidou.com)</span><br><span class="line">User(id=2, name=Jack, age=20, email=test2@baomidou.com)</span><br><span class="line">User(id=3, name=Tom, age=28, email=test3@baomidou.com)</span><br><span class="line">User(id=4, name=Sandy, age=21, email=test4@baomidou.com)</span><br><span class="line">User(id=5, name=Billie, age=24, email=test5@baomidou.com)</span><br></pre></td></tr></table></figure>

<p>é€šè¿‡ä»¥ä¸Šå‡ ä¸ªç®€å•çš„æ­¥éª¤ï¼Œæˆ‘ä»¬å°±å®ç°äº† User è¡¨çš„ CRUD åŠŸèƒ½ï¼Œç”šè‡³è¿ XML æ–‡ä»¶éƒ½ä¸ç”¨ç¼–å†™ï¼</p>
<p>ä¸Šé¢æˆ‘ä»¬åªæ˜¯ç»§æ‰¿äº† BaseMapper å°±çœå»æ‰€æœ‰çš„å•è¡¨ CRUDï¼Œæ€ä¹ˆå®ç°çš„å‘¢ï¼Ÿ</p>
<p>å½“ç„¶æ˜¯ <code>BaseMapper </code> æ¥å£å…¶ä¸­å·²ç»å®ç°äº†å•è¡¨çš„ CRUDï¼š</p>
<img src="https://muyoukule-blog-pics.oss-cn-chengdu.aliyuncs.com/SSMIMG/MyBatisPlus/BaseMapper%E6%8E%A5%E5%8F%A3.png" alt="BaseMapperæ¥å£" style="zoom:67%;">

<p>å› æ­¤æˆ‘ä»¬è‡ªå®šä¹‰çš„ Mapper åªè¦å®ç°äº†è¿™ä¸ª <code>BaseMapper</code>ï¼Œå°±æ— éœ€è‡ªå·±å®ç°å•è¡¨ CRUD äº†ã€‚</p>
<h1 id="3-é…ç½®æ—¥å¿—"><a href="#3-é…ç½®æ—¥å¿—" class="headerlink" title="3. é…ç½®æ—¥å¿—"></a>3. é…ç½®æ—¥å¿—</h1><p>ä½¿ç”¨ MP åï¼Œéƒ¨åˆ† SQL æ˜¯ä¸å¯è§çš„ï¼Œæˆ‘ä»¬å¸Œæœ›çŸ¥é“å®ƒæ˜¯å¦‚ä½•æ‰§è¡Œçš„ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦æŸ¥çœ‹æ—¥å¿—ï¼</p>
<p>åœ¨é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®ï¼š</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">log-impl:</span> <span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br></pre></td></tr></table></figure>

<img src="https://muyoukule-blog-pics.oss-cn-chengdu.aliyuncs.com/SSMIMG/MyBatisPlus/MP%E9%85%8D%E7%BD%AE%E6%97%A5%E5%BF%97%E4%BF%A1%E6%81%AF.png" alt="MPé…ç½®æ—¥å¿—ä¿¡æ¯" style="zoom: 67%;">

<p>é…ç½®æ—¥å¿—åï¼Œåœ¨ä»¥åçš„å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹æ—¥å¿—ï¼Œè§‚å¯Ÿ MP çš„ SQL æ‰§è¡Œã€‚</p>
<h1 id="4-å¸¸è§æ³¨è§£"><a href="#4-å¸¸è§æ³¨è§£" class="headerlink" title="4. å¸¸è§æ³¨è§£"></a>4. å¸¸è§æ³¨è§£</h1><p>åœ¨åˆšåˆšçš„å…¥é—¨æ¡ˆä¾‹ä¸­ï¼Œæˆ‘ä»¬ä»…ä»…å¼•å…¥äº†ä¾èµ–ï¼Œç»§æ‰¿äº† BaseMapper å°±èƒ½ä½¿ç”¨ MP ï¼Œéå¸¸ç®€å•ã€‚</p>
<p>ä½†æ˜¯é—®é¢˜æ¥äº†ï¼š MP å¦‚ä½•çŸ¥é“æˆ‘ä»¬è¦æŸ¥è¯¢çš„æ˜¯å“ªå¼ è¡¨ï¼Ÿè¡¨ä¸­æœ‰å“ªäº›å­—æ®µå‘¢ï¼Ÿ</p>
<p>å¤§å®¶å›å¿†ä¸€ä¸‹ï¼ŒUserMapper åœ¨ç»§æ‰¿BaseMapper çš„æ—¶å€™æŒ‡å®šäº†ä¸€ä¸ªæ³›å‹ <code>User</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;User&gt; &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ³›å‹ä¸­çš„ User å°±æ˜¯ä¸æ•°æ®åº“å¯¹åº”çš„ POã€‚</p>
<p>MP å°±æ˜¯æ ¹æ® POå®ä½“çš„ä¿¡æ¯æ¥æ¨æ–­å‡ºè¡¨çš„ä¿¡æ¯ï¼Œä»è€Œç”Ÿæˆ SQL çš„ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼š</p>
<ul>
<li>MP ä¼šæŠŠ PO å®ä½“çš„ç±»åé©¼å³°è½¬ä¸‹åˆ’çº¿ä½œä¸ºè¡¨å</li>
<li>MP ä¼šæŠŠ PO å®ä½“çš„æ‰€æœ‰å˜é‡åé©¼å³°è½¬ä¸‹åˆ’çº¿ä½œä¸ºè¡¨çš„å­—æ®µåï¼Œå¹¶æ ¹æ®å˜é‡ç±»å‹æ¨æ–­å­—æ®µç±»å‹</li>
<li>MP ä¼šæŠŠåä¸º ID çš„å­—æ®µä½œä¸ºä¸»é”®</li>
</ul>
<p>ä½†å¾ˆå¤šæƒ…å†µä¸‹ï¼Œé»˜è®¤çš„å®ç°ä¸å®é™…åœºæ™¯ä¸ç¬¦ï¼Œå› æ­¤ MP æä¾›äº†ä¸€äº›æ³¨è§£ä¾¿äºæˆ‘ä»¬å£°æ˜è¡¨ä¿¡æ¯ã€‚</p>
<h2 id="4-1-TableName"><a href="#4-1-TableName" class="headerlink" title="4.1 @TableName"></a>4.1 @TableName</h2><ul>
<li>æè¿°ï¼šè¡¨åæ³¨è§£ï¼Œæ ‡è¯†å®ä½“ç±»å¯¹åº”çš„è¡¨</li>
<li>ä½¿ç”¨ä½ç½®ï¼šå®ä½“ç±»</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@TableName(&quot;sys_user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>TableName æ³¨è§£é™¤äº†æŒ‡å®šè¡¨åä»¥å¤–ï¼Œè¿˜å¯ä»¥æŒ‡å®šå¾ˆå¤šå…¶å®ƒå±æ€§ï¼š</p>
<table>
<thead>
<tr>
<th align="center">å±æ€§</th>
<th align="center">ç±»å‹</th>
<th align="center">å¿…é¡»æŒ‡å®š</th>
<th align="center">é»˜è®¤å€¼</th>
<th align="center">æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td align="center">value</td>
<td align="center">String</td>
<td align="center">å¦</td>
<td align="center">â€œâ€</td>
<td align="center">è¡¨å</td>
</tr>
<tr>
<td align="center">schema</td>
<td align="center">String</td>
<td align="center">å¦</td>
<td align="center">â€œâ€</td>
<td align="center">schema</td>
</tr>
<tr>
<td align="center">keepGlobalPrefix</td>
<td align="center">boolean</td>
<td align="center">å¦</td>
<td align="center">false</td>
<td align="center">æ˜¯å¦ä¿æŒä½¿ç”¨å…¨å±€çš„ tablePrefix çš„å€¼ï¼ˆå½“å…¨å±€ tablePrefix ç”Ÿæ•ˆæ—¶ï¼‰</td>
</tr>
<tr>
<td align="center">resultMap</td>
<td align="center">String</td>
<td align="center">å¦</td>
<td align="center">â€œâ€</td>
<td align="center">xml ä¸­ resultMap çš„ idï¼ˆç”¨äºæ»¡è¶³ç‰¹å®šç±»å‹çš„å®ä½“ç±»å¯¹è±¡ç»‘å®šï¼‰</td>
</tr>
<tr>
<td align="center">autoResultMap</td>
<td align="center">boolean</td>
<td align="center">å¦</td>
<td align="center">false</td>
<td align="center">æ˜¯å¦è‡ªåŠ¨æ„å»º resultMap å¹¶ä½¿ç”¨ï¼ˆå¦‚æœè®¾ç½® resultMap åˆ™ä¸ä¼šè¿›è¡Œ resultMap çš„è‡ªåŠ¨æ„å»ºä¸æ³¨å…¥ï¼‰</td>
</tr>
<tr>
<td align="center">excludeProperty</td>
<td align="center">String[]</td>
<td align="center">å¦</td>
<td align="center">{}</td>
<td align="center">éœ€è¦æ’é™¤çš„å±æ€§å @since 3.3.1</td>
</tr>
</tbody></table>
<h2 id="4-2-TableId"><a href="#4-2-TableId" class="headerlink" title="4.2 @TableId"></a>4.2 @TableId</h2><ul>
<li>æè¿°ï¼šä¸»é”®æ³¨è§£</li>
<li>ä½¿ç”¨ä½ç½®ï¼šå®ä½“ç±»ä¸»é”®å­—æ®µ</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@TableName(&quot;sys_user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="meta">@TableId</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>TableId </code>æ³¨è§£æ”¯æŒä¸¤ä¸ªå±æ€§ï¼š</p>
<table>
<thead>
<tr>
<th align="center">å±æ€§</th>
<th align="center">ç±»å‹</th>
<th align="center">å¿…é¡»æŒ‡å®š</th>
<th align="center">é»˜è®¤å€¼</th>
<th align="center">æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td align="center">value</td>
<td align="center">String</td>
<td align="center">å¦</td>
<td align="center">â€œâ€</td>
<td align="center">è¡¨å</td>
</tr>
<tr>
<td align="center">type</td>
<td align="center">Enum</td>
<td align="center">å¦</td>
<td align="center">IdType.NONE</td>
<td align="center">æŒ‡å®šä¸»é”®ç±»å‹</td>
</tr>
</tbody></table>
<p><code>IdType </code>æ”¯æŒçš„ç±»å‹æœ‰ï¼š</p>
<table>
<thead>
<tr>
<th align="center">å€¼</th>
<th align="center">æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td align="center">AUTO</td>
<td align="center">æ•°æ®åº“ ID è‡ªå¢</td>
</tr>
<tr>
<td align="center">NONE</td>
<td align="center">æ— çŠ¶æ€ï¼Œè¯¥ç±»å‹ä¸ºæœªè®¾ç½®ä¸»é”®ç±»å‹ï¼ˆæ³¨è§£é‡Œç­‰äºè·Ÿéšå…¨å±€ï¼Œå…¨å±€é‡Œçº¦ç­‰äº INPUTï¼‰</td>
</tr>
<tr>
<td align="center">INPUT</td>
<td align="center">insert å‰è‡ªè¡Œ set ä¸»é”®å€¼</td>
</tr>
<tr>
<td align="center">ASSIGN_ID</td>
<td align="center">åˆ†é… ID(ä¸»é”®ç±»å‹ä¸º Number(Long å’Œ Integer)æˆ– String)(since 3.3.0),ä½¿ç”¨æ¥å£IdentifierGeneratorçš„æ–¹æ³•nextId(é»˜è®¤å®ç°ç±»ä¸ºDefaultIdentifierGeneratoré›ªèŠ±ç®—æ³•)</td>
</tr>
<tr>
<td align="center">ASSIGN_UUID</td>
<td align="center">åˆ†é… UUID,ä¸»é”®ç±»å‹ä¸º String(since 3.3.0),ä½¿ç”¨æ¥å£IdentifierGeneratorçš„æ–¹æ³•nextUUID(é»˜è®¤ default æ–¹æ³•)</td>
</tr>
<tr>
<td align="center"><del>ID_WORKER</del></td>
<td align="center">åˆ†å¸ƒå¼å…¨å±€å”¯ä¸€ ID é•¿æ•´å‹ç±»å‹(please use ASSIGN_ID)</td>
</tr>
<tr>
<td align="center"><del>UUID</del></td>
<td align="center">32 ä½ UUID å­—ç¬¦ä¸²(please use ASSIGN_UUID)</td>
</tr>
<tr>
<td align="center"><del>ID_WORKER_STR</del></td>
<td align="center">åˆ†å¸ƒå¼å…¨å±€å”¯ä¸€ ID å­—ç¬¦ä¸²ç±»å‹(please use ASSIGN_ID)</td>
</tr>
</tbody></table>
<p>è¿™é‡Œæ¯”è¾ƒå¸¸è§çš„æœ‰ä¸‰ç§ï¼š</p>
<ul>
<li><code>ASSIGN_ID</code>ï¼šé›ªèŠ±ç®—æ³•ç”Ÿæˆ<code>Long</code>ç±»å‹çš„å…¨å±€å”¯ä¸€IDï¼Œè¿™æ˜¯ MP <strong>é»˜è®¤</strong>çš„ ID ç­–ç•¥</li>
<li><code>AUTO</code>ï¼šåˆ©ç”¨æ•°æ®åº“çš„IDè‡ªå¢é•¿</li>
<li><code>INPUT</code>ï¼šæ‰‹åŠ¨ç”ŸæˆID</li>
</ul>
<h3 id="4-2-1-ä¸»é”®ç”Ÿæˆç­–ç•¥"><a href="#4-2-1-ä¸»é”®ç”Ÿæˆç­–ç•¥" class="headerlink" title="4.2.1 ä¸»é”®ç”Ÿæˆç­–ç•¥"></a>4.2.1 ä¸»é”®ç”Ÿæˆç­–ç•¥</h3><blockquote>
<p>é›ªèŠ±ç®—æ³•</p>
</blockquote>
<p>é›ªèŠ±ç®—æ³•(Snowflake)æ˜¯ Twitter å¼€æºçš„ä¸€ç§åˆ†å¸ƒå¼IDç”Ÿæˆç®—æ³•ï¼Œå…¶ç”Ÿæˆçš„ ID å…·æœ‰å…¨å±€å”¯ä¸€æ€§ã€‚è¿™ç§ç®—æ³•çš„æ ¸å¿ƒæ€æƒ³æ˜¯å°† 64 ä½çš„ Long å‹ ID åˆ†ä¸ºå››ä¸ªéƒ¨åˆ†ï¼šæ—¶é—´æˆ³ã€å·¥ä½œæœºå™¨IDã€æ•°æ®ä¸­å¿ƒIDå’Œåºåˆ—å·ã€‚</p>
<p>åœ¨ä¸Šé¢æˆ‘ä»¬è¿›è¡Œæ•°æ®æ’å…¥çš„æ—¶å€™ï¼Œç”±äºæœªå¯¹ä¸»é”®ç”Ÿæˆç­–ç•¥è¿›è¡Œé…ç½®ï¼Œè€Œ MP <strong>é»˜è®¤</strong>é‡‡ç”¨çš„ä½¿ç”¨ Twitter çš„ <code>é›ªèŠ±ç®—æ³•</code>ã€‚æ‰€ä»¥æ‰ä¼šçœ‹åˆ°ç”Ÿæˆäº†ä¸€é•¿ä¸²æ•°å­—ä½œä¸º IDã€‚</p>
<p><img src="https://muyoukule-blog-pics.oss-cn-chengdu.aliyuncs.com/SSMIMG/MyBatisPlus/%E6%8F%92%E5%85%A5%E4%B8%80%E6%9D%A1%E6%95%B0%E6%8D%AE.png" alt="æ’å…¥ä¸€æ¡æ•°æ®"></p>
<blockquote>
<p>åˆ©ç”¨æ•°æ®åº“çš„ ID è‡ªå¢é•¿</p>
</blockquote>
<p>1ã€å®ä½“ç±»ä¸­è¡¨ç¤ºç»„ä»¶çš„å±æ€§ä¸Šæ·»åŠ æ³¨è§£ï¼š<code>@TableId(type = IdType.AUTO)</code></p>
<p>2ã€ <font color="red">æ•°æ®åº“å­—æ®µä¸€å®šè®¾ç½®ä¸ºè‡ªå¢</font>ğŸ˜€</p>
<img src="https://muyoukule-blog-pics.oss-cn-chengdu.aliyuncs.com/SSMIMG/MyBatisPlus/%E8%AE%BE%E7%BD%AE%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AD%97%E6%AE%B5%E4%B8%BA%E8%87%AA%E5%A2%9E.png" alt="è®¾ç½®æ•°æ®åº“å­—æ®µä¸ºè‡ªå¢" style="zoom:67%;">

<p>3ã€å†æ¬¡è¿è¡Œæ’å…¥æµ‹è¯•ï¼š</p>
<p><img src="https://muyoukule-blog-pics.oss-cn-chengdu.aliyuncs.com/SSMIMG/MyBatisPlus/ID%E8%87%AA%E5%A2%9E%E9%95%BF%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE.png" alt="IDè‡ªå¢é•¿æ’å…¥æ•°æ®"></p>
<blockquote>
<p>æ‰‹åŠ¨ç”Ÿæˆ ID</p>
</blockquote>
<p>1ã€å®ä½“ç±»ä¸­è¡¨ç¤ºç»„ä»¶çš„å±æ€§ä¸Šæ·»åŠ æ³¨è§£ï¼š<code>@TableId(type = IdType.INPUT)</code></p>
<p>2ã€ä¿®æ”¹æµ‹è¯•ç±»ï¼Œæ‰‹åŠ¨è®¾ç½® ID</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testSave</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">    user.setId(<span class="number">6L</span>); <span class="comment">// æ‰‹åŠ¨è®¾ç½® ID</span></span><br><span class="line">    user.setName(<span class="string">&quot;æœ¨åˆæ¯äº†&quot;</span>);</span><br><span class="line">    user.setAge(<span class="number">18</span>);</span><br><span class="line">    user.setEmail(<span class="string">&quot;example@gmail.com&quot;</span>);</span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> userMapper.insert(user);</span><br><span class="line">    System.out.println(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><font color="red">PSï¼šå¦‚æœæˆ‘ä»¬è®¾ç½®ç»„ä»¶ç”Ÿæˆç­–ç•¥ä¸ºæ‰‹åŠ¨è¾“å…¥ ï¼Œä½†æ˜¯æ²¡æœ‰è¾“å…¥ï¼Œè¿™ä¸ªæ—¶å€™æ—¥å¿—å°±ä¼šæ˜¾ç¤ºæ’å…¥çš„æ˜¯ <code>null</code>ï¼Œä½†æ˜¯æ•°æ®åº“ä¸­ä¹Ÿä¼šæ’å…¥ä¸€æ¡ ID è‡ªå¢çš„è®°å½•</font></p>
<p>3ã€å†æ¬¡è¿è¡Œæ’å…¥æµ‹è¯•ï¼š</p>
<p><img src="https://muyoukule-blog-pics.oss-cn-chengdu.aliyuncs.com/SSMIMG/MyBatisPlus/%E6%89%8B%E5%8A%A8%E7%94%9F%E6%88%90ID%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE.png" alt="æ‰‹åŠ¨ç”ŸæˆIDæ’å…¥æ•°æ®"></p>
<h2 id="4-3-TableField"><a href="#4-3-TableField" class="headerlink" title="4.3 @TableField"></a>4.3 @TableField</h2><ul>
<li>æè¿°ï¼šå­—æ®µæ³¨è§£(éä¸»é”®)</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@TableName(&quot;sys_user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="meta">@TableId</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="meta">@TableField(&quot;nickname&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬å¹¶ä¸éœ€è¦ç»™å­—æ®µæ·»åŠ  <code>@TableField</code> æ³¨è§£ï¼Œä¸€äº›ç‰¹æ®Šæƒ…å†µé™¤å¤–ï¼š</p>
<ul>
<li>æˆå‘˜å˜é‡åä¸æ•°æ®åº“å­—æ®µåä¸ä¸€è‡´</li>
<li>æˆå‘˜å˜é‡æ˜¯ä»¥ <code>isXXX</code> å‘½åï¼ŒæŒ‰ç…§ <code>JavaBean</code> çš„è§„èŒƒï¼Œ<code>MP </code>è¯†åˆ«å­—æ®µæ—¶ä¼šæŠŠ <code>is</code> å»é™¤ï¼Œè¿™å°±å¯¼è‡´ä¸æ•°æ®åº“ä¸ç¬¦ã€‚</li>
<li>æˆå‘˜å˜é‡åä¸æ•°æ®åº“ä¸€è‡´ï¼Œä½†æ˜¯ä¸æ•°æ®åº“çš„å…³é”®å­—å†²çªã€‚ä½¿ç”¨ <code>@TableField</code> æ³¨è§£ç»™å­—æ®µåæ·»åŠ è½¬ä¹‰å­—ç¬¦ï¼š<code>``</code></li>
</ul>
<p>æ›´å¤šæ”¯æŒçš„å…¶å®ƒå±æ€§å¦‚ä¸‹è¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š<a target="_blank" rel="noopener" href="https://baomidou.com/pages/223848/#tablefield">@Tablefieldæ³¨è§£</a></p>
<h1 id="5-å¸¸è§é…ç½®"><a href="#5-å¸¸è§é…ç½®" class="headerlink" title="5. å¸¸è§é…ç½®"></a>5. å¸¸è§é…ç½®</h1><p>MP ä¹Ÿæ”¯æŒåŸºäº yml æ–‡ä»¶çš„è‡ªå®šä¹‰é…ç½®ï¼Œè¯¦è§å®˜æ–¹æ–‡æ¡£ï¼š<a target="_blank" rel="noopener" href="https://www.baomidou.com/pages/56bac0/">ä½¿ç”¨é…ç½®</a></p>
<p>å¤§å¤šæ•°çš„é…ç½®éƒ½æœ‰é»˜è®¤å€¼ï¼Œå› æ­¤æˆ‘ä»¬éƒ½æ— éœ€é…ç½®ã€‚ä½†è¿˜æœ‰ä¸€äº›æ˜¯æ²¡æœ‰é»˜è®¤å€¼çš„ï¼Œä¾‹å¦‚:</p>
<ul>
<li>å®ä½“ç±»çš„åˆ«åæ‰«æåŒ…</li>
<li>å…¨å±€ ID ç±»å‹</li>
</ul>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">type-aliases-package:</span> <span class="string">com.muyoukule.entity</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="attr">id-type:</span> <span class="string">auto</span> <span class="comment"># å…¨å±€idç±»å‹ä¸ºè‡ªå¢é•¿</span></span><br></pre></td></tr></table></figure>

<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒMP ä¹Ÿæ”¯æŒæ‰‹å†™ SQL çš„ï¼Œè€Œ mapper æ–‡ä»¶çš„è¯»å–åœ°å€å¯ä»¥è‡ªå·±é…ç½®ï¼š</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">&quot;classpath*:/mapper/**/*.xml&quot;</span> <span class="comment"># Mapper.xmlæ–‡ä»¶åœ°å€ï¼Œå½“å‰è¿™ä¸ªæ˜¯é»˜è®¤å€¼ã€‚</span></span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°é»˜è®¤å€¼æ˜¯ <code>classpath*:/mapper/**/*.xml</code>ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬åªè¦æŠŠ mapper.xml æ–‡ä»¶æ”¾ç½®è¿™ä¸ªç›®å½•ä¸‹å°±ä¸€å®šä¼šè¢«åŠ è½½ã€‚</p>
<h1 id="6-æ¡ä»¶æ„é€ å™¨"><a href="#6-æ¡ä»¶æ„é€ å™¨" class="headerlink" title="6. æ¡ä»¶æ„é€ å™¨"></a>6. æ¡ä»¶æ„é€ å™¨</h1><p>é™¤äº†æ–°å¢ä»¥å¤–ï¼Œä¿®æ”¹ã€åˆ é™¤ã€æŸ¥è¯¢çš„SQLè¯­å¥éƒ½éœ€è¦æŒ‡å®š where æ¡ä»¶ã€‚å› æ­¤ BaseMapper ä¸­æä¾›çš„ç›¸å…³æ–¹æ³•é™¤äº†ä»¥ <code>id</code> ä½œä¸º <code>where</code> æ¡ä»¶ä»¥å¤–ï¼Œè¿˜æ”¯æŒæ›´åŠ å¤æ‚çš„ <code>where</code> æ¡ä»¶ã€‚</p>
<p><img src="https://muyoukule-blog-pics.oss-cn-chengdu.aliyuncs.com/SSMIMG/MyBatisPlus/BaseMapper%E4%B8%AD%E7%9A%84%E6%9D%A1%E4%BB%B6%E6%9E%84%E9%80%A0%E5%99%A8.png" alt="BaseMapperä¸­çš„æ¡ä»¶æ„é€ å™¨"></p>
<p>å‚æ•°ä¸­çš„ <code>Wrapper</code> å°±æ˜¯æ¡ä»¶æ„é€ çš„æŠ½è±¡ç±»ï¼Œå…¶ä¸‹æœ‰å¾ˆå¤šé»˜è®¤å®ç°ï¼Œç»§æ‰¿å…³ç³»å¦‚å›¾ï¼š</p>
<img src="https://muyoukule-blog-pics.oss-cn-chengdu.aliyuncs.com/SSMIMG/MyBatisPlus/Wrapper%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB%E5%9B%BE.png" alt="Wrapperç»§æ‰¿å…³ç³»å›¾" style="zoom: 50%;">

<p><code>Wrapper</code> çš„å­ç±» <code>AbstractWrapper</code> æä¾›äº† where ä¸­åŒ…å«çš„æ‰€æœ‰æ¡ä»¶æ„é€ æ–¹æ³•ï¼š</p>
<img src="https://muyoukule-blog-pics.oss-cn-chengdu.aliyuncs.com/SSMIMG/MyBatisPlus/AbstractWrapper%E4%B8%AD%E7%9A%84%E6%96%B9%E6%B3%95.png" alt="AbstractWrapperä¸­çš„æ–¹æ³•" style="zoom:67%;">

<p>è€Œ <code>QueryWrapper</code> åœ¨ <code>AbstractWrapper</code> çš„åŸºç¡€ä¸Šæ‹“å±•äº†ä¸€ä¸ª <code>select</code> æ–¹æ³•ï¼Œå…è®¸æŒ‡å®šæŸ¥è¯¢å­—æ®µï¼š</p>
<p><img src="https://muyoukule-blog-pics.oss-cn-chengdu.aliyuncs.com/SSMIMG/MyBatisPlus/QueryWrapper%E7%9A%84select%E6%96%B9%E6%B3%95.png" alt="QueryWrapperçš„selectæ–¹æ³•"></p>
<p>è€Œ <code>UpdateWrapper</code> åœ¨ <code>AbstractWrapper</code> çš„åŸºç¡€ä¸Šæ‹“å±•äº†ä¸€ä¸ª <code>set</code> æ–¹æ³•ï¼Œå…è®¸æŒ‡å®š SQL ä¸­çš„ SET éƒ¨åˆ†ï¼š</p>
<p><img src="https://muyoukule-blog-pics.oss-cn-chengdu.aliyuncs.com/SSMIMG/MyBatisPlus/UpdateWrapper%E7%9A%84set%E6%96%B9%E6%B3%95.png" alt="UpdateWrapperçš„setæ–¹æ³•"></p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±æ¥çœ‹çœ‹å¦‚ä½•åˆ©ç”¨ <code>Wrapper </code>å®ç°å¤æ‚æŸ¥è¯¢ã€‚</p>
<h2 id="6-1-QueryWrapper"><a href="#6-1-QueryWrapper" class="headerlink" title="6.1 QueryWrapper"></a>6.1 QueryWrapper</h2><p>å½“å‰æ•°æ®è¡¨æ•°æ®ï¼š</p>
<p><img src="https://muyoukule-blog-pics.oss-cn-chengdu.aliyuncs.com/SSMIMG/MyBatisPlus/%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2%E5%89%8D%E6%95%B0%E6%8D%AE%E5%BA%93%E6%95%B0%E6%8D%AE.png" alt="æ¡ä»¶æŸ¥è¯¢å‰æ•°æ®åº“æ•°æ®"></p>
<p>æ— è®ºæ˜¯ä¿®æ”¹ã€åˆ é™¤ã€æŸ¥è¯¢ï¼Œéƒ½å¯ä»¥ä½¿ç”¨ QueryWrapper æ¥æ„å»ºæŸ¥è¯¢æ¡ä»¶ã€‚æ¥ä¸‹æ¥çœ‹ä¸€äº›ä¾‹å­ï¼š</p>
<p><strong>å¤šæ¡ä»¶æ„å»º</strong></p>
<blockquote>
<p>æŸ¥è¯¢å‡ºåå­—ä¸­å¸¦ o ï¼Œå¹´é¾„å¤§äºç­‰äº 18 çš„äºº</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testQueryWrapper</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// 1.æ„å»ºæŸ¥è¯¢æ¡ä»¶ where name like &quot;%o%&quot; AND age &gt;= 18</span></span><br><span class="line">    QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;User&gt;()</span><br><span class="line">            .select(<span class="string">&quot;id&quot;</span>, <span class="string">&quot;name&quot;</span>, <span class="string">&quot;age&quot;</span>, <span class="string">&quot;email&quot;</span>)</span><br><span class="line">            .like(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;o&quot;</span>)</span><br><span class="line">            .ge(<span class="string">&quot;age&quot;</span>, <span class="number">18</span>);</span><br><span class="line">    <span class="comment">// 2.æŸ¥è¯¢æ•°æ®</span></span><br><span class="line">    List&lt;User&gt; userList = userMapper.selectList(wrapper);</span><br><span class="line">    userList.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ° MP åœ¨ç¼–å†™ SQL è¯­å¥æ—¶ä¼šä½¿ç”¨ ? å ä½ç¬¦ï¼Œç„¶åå°†å‚æ•°ä¼ è¿›å»ï¼Œæœ€ç»ˆæŸ¥è¯¢åˆ°ç»“æœï¼š</p>
<p><img src="https://muyoukule-blog-pics.oss-cn-chengdu.aliyuncs.com/SSMIMG/MyBatisPlus/%E5%90%8D%E5%AD%97%E4%B8%AD%E5%B8%A6o%E5%B9%B4%E9%BE%84%E5%A4%A7%E4%BA%8E%E7%AD%89%E4%BA%8E18.png" alt="åå­—ä¸­å¸¦oå¹´é¾„å¤§äºç­‰äº18"></p>
<blockquote>
<p>æŸ¥è¯¢å‡ºå¹´é¾„å°äº 20 æˆ–å¹´é¾„å¤§äº 25 çš„äºº</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testQueryWrapper</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// 1.æ„å»ºæŸ¥è¯¢æ¡ä»¶ where (age &lt; 25 OR age &gt; 20)</span></span><br><span class="line">    QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;User&gt;();</span><br><span class="line">    wrapper.lt(<span class="string">&quot;age&quot;</span>, <span class="number">20</span>).or().gt(<span class="string">&quot;age&quot;</span>, <span class="number">25</span>);</span><br><span class="line">    <span class="comment">// 2.æŸ¥è¯¢æ•°æ®</span></span><br><span class="line">    List&lt;User&gt; userList = userMapper.selectList(wrapper);</span><br><span class="line">    userList.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://muyoukule-blog-pics.oss-cn-chengdu.aliyuncs.com/SSMIMG/MyBatisPlus/%E5%B9%B4%E9%BE%84%E5%B0%8F%E4%BA%8E20%E6%88%96%E5%B9%B4%E9%BE%84%E5%A4%A7%E4%BA%8E25.png" alt="å¹´é¾„å°äº20æˆ–å¹´é¾„å¤§äº25"></p>
<p><font color="red"><strong>PSï¼š<code>or()</code> å°±ç›¸å½“äºæˆ‘ä»¬sqlè¯­å¥ä¸­çš„ <code>or</code> å…³é”®å­—ï¼Œä¸åŠ é»˜è®¤æ˜¯ <code>and</code></strong></font></p>
<p><strong>æŸ¥è¯¢æŠ•å½±</strong></p>
<blockquote>
<p>æŸ¥è¯¢æŒ‡å®šå­—æ®µ</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testQueryWrapper</span><span class="params">()</span> &#123;</span><br><span class="line">    QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;User&gt;();</span><br><span class="line">    wrapper.select(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;age&quot;</span>);</span><br><span class="line">    List&lt;User&gt; userList = userMapper.selectList(wrapper);</span><br><span class="line">    userList.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://muyoukule-blog-pics.oss-cn-chengdu.aliyuncs.com/SSMIMG/MyBatisPlus/%E6%9F%A5%E8%AF%A2name,age%E5%AD%97%E6%AE%B5.png" alt="æŸ¥è¯¢name,ageå­—æ®µ"></p>
<p><strong>èšåˆæŸ¥è¯¢</strong></p>
<blockquote>
<p>countã€maxã€minã€avgã€sum</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testQueryWrapper</span><span class="params">()</span> &#123;</span><br><span class="line">    QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;User&gt;();</span><br><span class="line">    <span class="comment">// SELECT count(*) as count FROM user</span></span><br><span class="line">    <span class="comment">//wrapper.select(&quot;count(*) as count&quot;);</span></span><br><span class="line">    <span class="comment">// SELECT max(age) as maxAge FROM user</span></span><br><span class="line">    <span class="comment">//wrapper.select(&quot;max(age) as maxAge&quot;);</span></span><br><span class="line">    <span class="comment">// SELECT min(age) as minAge FROM user</span></span><br><span class="line">    <span class="comment">//wrapper.select(&quot;min(age) as minAge&quot;);</span></span><br><span class="line">    <span class="comment">// SELECT sum(age) as sumAge FROM user</span></span><br><span class="line">    <span class="comment">//wrapper.select(&quot;sum(age) as sumAge&quot;);</span></span><br><span class="line">    <span class="comment">//SELECT avg(age) as avgAge FROM user</span></span><br><span class="line">    wrapper.select(<span class="string">&quot;avg(age) as avgAge&quot;</span>);</span><br><span class="line">    List&lt;Map&lt;String, Object&gt;&gt; userList = userMapper.selectMaps(wrapper);</span><br><span class="line">    userList.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>åˆ†ç»„æŸ¥è¯¢</strong></p>
<blockquote>
<p>åˆ†ç»„æŸ¥è¯¢ï¼Œå®Œæˆ group by çš„æŸ¥è¯¢ä½¿ç”¨</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testQueryWrapper</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// SELECT count(*) as count,age FROM `user` GROUP BY age</span></span><br><span class="line">    QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;User&gt;();</span><br><span class="line">    wrapper.select(<span class="string">&quot;count(*) as count,age&quot;</span>);</span><br><span class="line">    wrapper.groupBy(<span class="string">&quot;age&quot;</span>);</span><br><span class="line">    List&lt;Map&lt;String, Object&gt;&gt; list = userMapper.selectMaps(wrapper);</span><br><span class="line">    list.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://muyoukule-blog-pics.oss-cn-chengdu.aliyuncs.com/SSMIMG/MyBatisPlus/%E5%88%86%E7%BB%84%E6%9F%A5%E8%AF%A2age.png" alt="åˆ†ç»„æŸ¥è¯¢age"></p>
<blockquote>
<p>æ ¹æ® ID é™åºæ’åˆ—</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testQueryWrapper</span><span class="params">()</span> &#123;</span><br><span class="line">    QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * condition ï¼šæ¡ä»¶ï¼Œè¿”å›booleanï¼Œ</span></span><br><span class="line"><span class="comment">     å½“conditionä¸ºtrueï¼Œè¿›è¡Œæ’åºï¼Œå¦‚æœä¸ºfalseï¼Œåˆ™ä¸æ’åº</span></span><br><span class="line"><span class="comment">     * isAsc:æ˜¯å¦ä¸ºå‡åºï¼Œtrueä¸ºå‡åºï¼Œfalseä¸ºé™åº</span></span><br><span class="line"><span class="comment">     * columnsï¼šéœ€è¦æ“ä½œçš„åˆ—</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    wrapper.orderBy(<span class="literal">true</span>, <span class="literal">false</span>, <span class="string">&quot;id&quot;</span>);</span><br><span class="line">    List&lt;User&gt; userList = userMapper.selectList(wrapper);</span><br><span class="line">    userList.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://muyoukule-blog-pics.oss-cn-chengdu.aliyuncs.com/SSMIMG/MyBatisPlus/%E6%A0%B9%E6%8D%AEID%E9%99%8D%E5%BA%8F%E6%8E%92%E5%88%97.png" alt="æ ¹æ®IDé™åºæ’åˆ—"></p>
<blockquote>
<p>æ›´æ–°ç”¨æˆ·åä¸º Jack çš„ç”¨æˆ·çš„å¹´é¾„ä¸º 18</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testUpdateByQueryWrapper</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// 1.æ„å»ºæŸ¥è¯¢æ¡ä»¶ where name = &quot;Jack&quot;</span></span><br><span class="line">    QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;User&gt;().eq(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;Jack&quot;</span>);</span><br><span class="line">    <span class="comment">// 2.æ›´æ–°æ•°æ®ï¼Œuserä¸­énullå­—æ®µéƒ½ä¼šä½œä¸ºsetè¯­å¥</span></span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">    user.setAge(<span class="number">18</span>);</span><br><span class="line">    userMapper.update(user, wrapper);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://muyoukule-blog-pics.oss-cn-chengdu.aliyuncs.com/SSMIMG/MyBatisPlus/%E6%9B%B4%E6%96%B0%E7%94%A8%E6%88%B7%E5%90%8D%E4%B8%BAJack%E7%9A%84%E7%94%A8%E6%88%B7%E7%9A%84%E5%B9%B4%E9%BE%84%E4%B8%BA18.png" alt="æ›´æ–°ç”¨æˆ·åä¸ºJackçš„ç”¨æˆ·çš„å¹´é¾„ä¸º18"></p>
<p>é™¤äº†ä¸Šé¢ä»‹ç»çš„è¿™å‡ ç§æŸ¥è¯¢æ¡ä»¶æ„å»ºæ–¹æ³•ä»¥å¤–è¿˜ä¼šæœ‰å¾ˆå¤šå…¶ä»–çš„æ–¹æ³•ï¼Œæ¯”å¦‚ isNullï¼ŒisNotNullï¼Œinï¼ŒnotIn ç­‰ç­‰æ–¹æ³•å¯ä¾›é€‰æ‹©ï¼Œå…·ä½“å‚è€ƒ<a target="_blank" rel="noopener" href="https://baomidou.com/pages/10c804/">å®˜æ–¹æ–‡æ¡£</a>çš„æ¡ä»¶æ„é€ å™¨æ¥å­¦ä¹ ä½¿ç”¨ã€‚</p>
<h2 id="6-2-UpdateWrapper"><a href="#6-2-UpdateWrapper" class="headerlink" title="6.2 UpdateWrapper"></a>6.2 UpdateWrapper</h2><p>åŸºäº BaseMapper ä¸­çš„ update æ–¹æ³•æ›´æ–°æ—¶åªèƒ½ç›´æ¥èµ‹å€¼ï¼Œå¯¹äºä¸€äº›å¤æ‚çš„éœ€æ±‚å°±éš¾ä»¥å®ç°ã€‚ </p>
<p>ä¾‹å¦‚ï¼šæ›´æ–° ID ä¸º <code>1ã€2ã€4</code> çš„ç”¨æˆ·çš„å¹´é¾„ï¼Œå‡ä¸¤å²ï¼Œå¯¹åº”çš„ SQL åº”è¯¥æ˜¯ï¼š</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> <span class="keyword">user</span> <span class="keyword">SET</span> age <span class="operator">=</span> age <span class="operator">-</span> <span class="number">2</span> <span class="keyword">WHERE</span> id <span class="keyword">in</span> (<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>)</span><br></pre></td></tr></table></figure>

<p>SET çš„èµ‹å€¼ç»“æœæ˜¯åŸºäºå­—æ®µç°æœ‰å€¼çš„ï¼Œè¿™ä¸ªæ—¶å€™å°±è¦åˆ©ç”¨ UpdateWrapper ä¸­çš„ setSql åŠŸèƒ½äº†ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testUpdateWrapper</span><span class="params">()</span> &#123;</span><br><span class="line">    List&lt;Long&gt; ids = List.of(<span class="number">1L</span>, <span class="number">2L</span>, <span class="number">4L</span>);</span><br><span class="line">    <span class="comment">// 1.ç”ŸæˆSQL</span></span><br><span class="line">    UpdateWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> <span class="title class_">UpdateWrapper</span>&lt;User&gt;()</span><br><span class="line">            .setSql(<span class="string">&quot;age = age - 2&quot;</span>) <span class="comment">// SET age = age - 2</span></span><br><span class="line">            .in(<span class="string">&quot;id&quot;</span>, ids); <span class="comment">// WHERE id in (1, 2, 4)</span></span><br><span class="line">    <span class="comment">// 2.æ›´æ–°ï¼Œæ³¨æ„ç¬¬ä¸€ä¸ªå‚æ•°å¯ä»¥ç»™ nullï¼Œä¹Ÿå°±æ˜¯ä¸å¡«æ›´æ–°å­—æ®µå’Œæ•°æ®ï¼Œè€Œæ˜¯åŸºäº UpdateWrapper ä¸­çš„ setSQL æ¥æ›´æ–°</span></span><br><span class="line">    userMapper.update(<span class="literal">null</span>, wrapper);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://muyoukule-blog-pics.oss-cn-chengdu.aliyuncs.com/SSMIMG/MyBatisPlus/%E6%9B%B4%E6%96%B0ID%E4%B8%BA1,2,4%E7%9A%84%E7%94%A8%E6%88%B7%E7%9A%84%E5%B9%B4%E9%BE%84%E5%87%8F%E4%B8%A4%E5%B2%81.png" alt="æ›´æ–°IDä¸º1,2,4çš„ç”¨æˆ·çš„å¹´é¾„å‡ä¸¤å²"></p>
<h2 id="6-3-LambdaQueryWrapper"><a href="#6-3-LambdaQueryWrapper" class="headerlink" title="6.3 LambdaQueryWrapper"></a>6.3 LambdaQueryWrapper</h2><p>æ— è®ºæ˜¯ QueryWrapper è¿˜æ˜¯ UpdateWrapper åœ¨æ„é€ æ¡ä»¶çš„æ—¶å€™éƒ½éœ€è¦å†™æ­»å­—æ®µåç§°ï¼Œä¼šå‡ºç°å­—ç¬¦ä¸²<code>é­”æ³•å€¼</code>ã€‚è¿™åœ¨ç¼–ç¨‹è§„èŒƒä¸­æ˜¾ç„¶æ˜¯ä¸æ¨èçš„ã€‚ é‚£æ€ä¹ˆæ ·æ‰èƒ½ä¸å†™å­—æ®µåï¼Œåˆèƒ½çŸ¥é“å­—æ®µåå‘¢ï¼Ÿ</p>
<p>å…¶ä¸­ä¸€ç§åŠæ³•æ˜¯åŸºäºå˜é‡çš„ <code>gettter</code> æ–¹æ³•ç»“åˆåå°„æŠ€æœ¯ã€‚å› æ­¤æˆ‘ä»¬åªè¦å°†æ¡ä»¶å¯¹åº”çš„å­—æ®µçš„ <code>getter</code> æ–¹æ³•ä¼ é€’ç»™ MPï¼Œå®ƒå°±èƒ½è®¡ç®—å‡ºå¯¹åº”çš„å˜é‡åäº†ã€‚è€Œä¼ é€’æ–¹æ³•å¯ä»¥ä½¿ç”¨JDK8ä¸­çš„ <code>æ–¹æ³•å¼•ç”¨</code> å’Œ <code>Lambda </code>è¡¨è¾¾å¼ã€‚ å› æ­¤ MP åˆæä¾›äº†ä¸€å¥—åŸºäº Lambda çš„Wrapperï¼ŒåŒ…å«ä¸¤ä¸ªï¼š</p>
<ul>
<li>LambdaQueryWrapper</li>
<li>LambdaUpdateWrapper</li>
</ul>
<p>åˆ†åˆ«å¯¹åº” QueryWrapper å’Œ UpdateWrapper</p>
<p>å…¶ä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testLambdaQueryWrapper</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// 1.æ„å»ºæ¡ä»¶ where name like &quot;%o%&quot; AND age &gt;= 18</span></span><br><span class="line">    QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">    wrapper.lambda()</span><br><span class="line">            .select(User::getId, User::getName, User::getAge, User::getEmail)</span><br><span class="line">            .like(User::getName, <span class="string">&quot;o&quot;</span>)</span><br><span class="line">            .ge(User::getAge, <span class="number">18</span>);</span><br><span class="line">    <span class="comment">// 2.æŸ¥è¯¢</span></span><br><span class="line">    List&lt;User&gt; userList = userMapper.selectList(wrapper);</span><br><span class="line">    userList.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6-4-è‡ªå®šä¹‰SQL"><a href="#6-4-è‡ªå®šä¹‰SQL" class="headerlink" title="6.4 è‡ªå®šä¹‰SQL"></a>6.4 è‡ªå®šä¹‰SQL</h2><p>åœ¨æ¼”ç¤º UpdateWrapper çš„æ¡ˆä¾‹ä¸­ï¼Œæˆ‘ä»¬åœ¨ä»£ç ä¸­ç¼–å†™äº†æ›´æ–°çš„ SQL è¯­å¥ï¼š</p>
<p><img src="https://muyoukule-blog-pics.oss-cn-chengdu.aliyuncs.com/SSMIMG/MyBatisPlus/%E6%89%8B%E5%86%99%E7%9A%84SQL%E8%AF%AD%E5%8F%A5.png" alt="æ‰‹å†™çš„SQLè¯­å¥"></p>
<p>è¿™ç§å†™æ³•åœ¨æŸäº›ä¼ä¸šä¹Ÿæ˜¯ä¸å…è®¸çš„ï¼Œå› ä¸º SQL è¯­å¥æœ€å¥½éƒ½ç»´æŠ¤åœ¨æŒä¹…å±‚ï¼Œè€Œä¸æ˜¯ä¸šåŠ¡å±‚ã€‚å°±å½“å‰æ¡ˆä¾‹æ¥è¯´ï¼Œç”±äºæ¡ä»¶æ˜¯ in è¯­å¥ï¼Œåªèƒ½å°†SQLå†™åœ¨Mapper.xmlæ–‡ä»¶ï¼Œåˆ©ç”¨foreachæ¥ç”ŸæˆåŠ¨æ€SQLã€‚ è¿™å®åœ¨æ˜¯å¤ªéº»çƒ¦äº†ã€‚å‡å¦‚æŸ¥è¯¢æ¡ä»¶æ›´å¤æ‚ï¼ŒåŠ¨æ€SQLçš„ç¼–å†™ä¹Ÿä¼šæ›´åŠ å¤æ‚ã€‚</p>
<p>æ‰€ä»¥ï¼ŒMPæä¾›äº†è‡ªå®šä¹‰SQLåŠŸèƒ½ï¼Œå¯ä»¥è®©æˆ‘ä»¬åˆ©ç”¨Wrapperç”ŸæˆæŸ¥è¯¢æ¡ä»¶ï¼Œå†ç»“åˆMapper.xmlç¼–å†™SQLã€‚</p>
<h3 id="6-4-1-åŸºæœ¬ç”¨æ³•"><a href="#6-4-1-åŸºæœ¬ç”¨æ³•" class="headerlink" title="6.4.1 åŸºæœ¬ç”¨æ³•"></a>6.4.1 åŸºæœ¬ç”¨æ³•</h3><p>ä»¥å½“å‰æ¡ˆä¾‹æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·å†™ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testCustomWrapper</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// 1.å‡†å¤‡è‡ªå®šä¹‰æŸ¥è¯¢æ¡ä»¶</span></span><br><span class="line">    List&lt;Long&gt; ids = List.of(<span class="number">1L</span>, <span class="number">2L</span>, <span class="number">4L</span>);</span><br><span class="line">    QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;User&gt;().in(<span class="string">&quot;id&quot;</span>, ids);</span><br><span class="line">    <span class="comment">// 2.è°ƒç”¨mapperçš„è‡ªå®šä¹‰æ–¹æ³•ï¼Œç›´æ¥ä¼ é€’Wrapper</span></span><br><span class="line">    userMapper.deductAgeByIds(<span class="number">2</span>, wrapper);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç„¶ååœ¨UserMapperä¸­è‡ªå®šä¹‰SQLï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;User&gt; &#123;</span><br><span class="line">    <span class="meta">@Select(&quot;UPDATE user SET age = age - #&#123;age&#125; $&#123;ew.customSqlSegment&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">deductAgeByIds</span><span class="params">(<span class="meta">@Param(&quot;age&quot;)</span> <span class="type">int</span> age, <span class="meta">@Param(&quot;ew&quot;)</span> QueryWrapper&lt;User&gt; wrapper)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·å°±çœå»äº†ç¼–å†™å¤æ‚æŸ¥è¯¢æ¡ä»¶çš„çƒ¦æ¼äº†ã€‚</p>
<h3 id="6-4-2-å¤šè¡¨å…³è”"><a href="#6-4-2-å¤šè¡¨å…³è”" class="headerlink" title="6.4.2 å¤šè¡¨å…³è”"></a>6.4.2 å¤šè¡¨å…³è”</h3><p>ç†è®ºä¸Šæ¥è®²MyBatisPlusæ˜¯ä¸æ”¯æŒå¤šè¡¨æŸ¥è¯¢çš„ï¼Œä¸è¿‡æˆ‘ä»¬å¯ä»¥åˆ©ç”¨Wrapperä¸­è‡ªå®šä¹‰æ¡ä»¶ç»“åˆè‡ªå®šä¹‰SQLæ¥å®ç°å¤šè¡¨æŸ¥è¯¢çš„æ•ˆæœã€‚</p>
<p>æ‰§è¡ŒSQLè„šæœ¬ï¼Œåˆ›å»ºaddressè¡¨ï¼Œä¸ user è¡¨ç›¸å…³è”ï¼š</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> `address` (</span><br><span class="line">  `id` <span class="type">bigint</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  `user_id` <span class="type">bigint</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;ç”¨æˆ·ID&#x27;</span>,</span><br><span class="line">  `province` <span class="type">varchar</span>(<span class="number">10</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;çœ&#x27;</span>,</span><br><span class="line">  `city` <span class="type">varchar</span>(<span class="number">10</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;å¸‚&#x27;</span>,</span><br><span class="line">  `town` <span class="type">varchar</span>(<span class="number">10</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;å¿/åŒº&#x27;</span>,</span><br><span class="line">  `mobile` <span class="type">varchar</span>(<span class="number">255</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;æ‰‹æœº&#x27;</span>,</span><br><span class="line">  `street` <span class="type">varchar</span>(<span class="number">255</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;è¯¦ç»†åœ°å€&#x27;</span>,</span><br><span class="line">  `contact` <span class="type">varchar</span>(<span class="number">255</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;è”ç³»äºº&#x27;</span>,</span><br><span class="line">  `is_default` bit(<span class="number">1</span>) <span class="keyword">DEFAULT</span> b<span class="string">&#x27;0&#x27;</span> COMMENT <span class="string">&#x27;æ˜¯å¦æ˜¯é»˜è®¤ 1é»˜è®¤ 0å¦&#x27;</span>,</span><br><span class="line">  `notes` <span class="type">varchar</span>(<span class="number">255</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;å¤‡æ³¨&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`) <span class="keyword">USING</span> BTREE,</span><br><span class="line">  KEY `user_id` (`user_id`) <span class="keyword">USING</span> BTREE</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB AUTO_INCREMENT<span class="operator">=</span><span class="number">71</span> <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8mb3 ROW_FORMAT<span class="operator">=</span>COMPACT;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `address` (`id`, `user_id`, `province`, `city`, `town`, `mobile`, `street`, `contact`, `is_default`, `notes`) <span class="keyword">VALUES</span></span><br><span class="line">    (<span class="number">59</span>, <span class="number">2</span>, <span class="string">&#x27;åŒ—äº¬&#x27;</span>, <span class="string">&#x27;åŒ—äº¬&#x27;</span>, <span class="string">&#x27;æœé˜³åŒº&#x27;</span>, <span class="string">&#x27;13900112222&#x27;</span>, <span class="string">&#x27;é‡‘ç‡•é¾™åŠå…¬æ¥¼&#x27;</span>, <span class="string">&#x27;Rose&#x27;</span>, b<span class="string">&#x27;1&#x27;</span>, <span class="keyword">NULL</span>),</span><br><span class="line">    (<span class="number">60</span>, <span class="number">1</span>, <span class="string">&#x27;åŒ—äº¬&#x27;</span>, <span class="string">&#x27;åŒ—äº¬&#x27;</span>, <span class="string">&#x27;æœé˜³åŒº&#x27;</span>, <span class="string">&#x27;13700221122&#x27;</span>, <span class="string">&#x27;ä¿®æ­£å¤§å¦&#x27;</span>, <span class="string">&#x27;Jack&#x27;</span>, b<span class="string">&#x27;0&#x27;</span>, <span class="keyword">NULL</span>),</span><br><span class="line">    (<span class="number">61</span>, <span class="number">1</span>, <span class="string">&#x27;ä¸Šæµ·&#x27;</span>, <span class="string">&#x27;ä¸Šæµ·&#x27;</span>, <span class="string">&#x27;æµ¦ä¸œæ–°åŒº&#x27;</span>, <span class="string">&#x27;13301212233&#x27;</span>, <span class="string">&#x27;èˆªå¤´é•‡èˆªå¤´è·¯&#x27;</span>, <span class="string">&#x27;Jack&#x27;</span>, b<span class="string">&#x27;1&#x27;</span>, <span class="keyword">NULL</span>),</span><br><span class="line">    (<span class="number">63</span>, <span class="number">2</span>, <span class="string">&#x27;å¹¿ä¸œ&#x27;</span>, <span class="string">&#x27;ä½›å±±&#x27;</span>, <span class="string">&#x27;æ°¸æ˜¥&#x27;</span>, <span class="string">&#x27;13301212233&#x27;</span>, <span class="string">&#x27;æ°¸æ˜¥æ­¦é¦†&#x27;</span>, <span class="string">&#x27;Rose&#x27;</span>, b<span class="string">&#x27;0&#x27;</span>, <span class="keyword">NULL</span>),</span><br><span class="line">    (<span class="number">64</span>, <span class="number">3</span>, <span class="string">&#x27;æµ™æ±Ÿ&#x27;</span>, <span class="string">&#x27;æ­å·&#x27;</span>, <span class="string">&#x27;æ‹±å¢…åŒº&#x27;</span>, <span class="string">&#x27;13567809102&#x27;</span>, <span class="string">&#x27;æµ™æ±Ÿå¤§å­¦&#x27;</span>, <span class="string">&#x27;Hope&#x27;</span>, b<span class="string">&#x27;1&#x27;</span>, <span class="keyword">NULL</span>),</span><br><span class="line">    (<span class="number">65</span>, <span class="number">3</span>, <span class="string">&#x27;æµ™æ±Ÿ&#x27;</span>, <span class="string">&#x27;æ­å·&#x27;</span>, <span class="string">&#x27;æ‹±å¢…åŒº&#x27;</span>, <span class="string">&#x27;13967589201&#x27;</span>, <span class="string">&#x27;å·¦å²¸èŠ±å›­&#x27;</span>, <span class="string">&#x27;Hope&#x27;</span>, b<span class="string">&#x27;0&#x27;</span>, <span class="keyword">NULL</span>),</span><br><span class="line">    (<span class="number">66</span>, <span class="number">4</span>, <span class="string">&#x27;æ¹–åŒ—&#x27;</span>, <span class="string">&#x27;æ­¦æ±‰&#x27;</span>, <span class="string">&#x27;æ±‰å£&#x27;</span>, <span class="string">&#x27;13967519202&#x27;</span>, <span class="string">&#x27;å¤©å¤©èŠ±å›­&#x27;</span>, <span class="string">&#x27;Thomas&#x27;</span>, b<span class="string">&#x27;1&#x27;</span>, <span class="keyword">NULL</span>),</span><br><span class="line">    (<span class="number">67</span>, <span class="number">3</span>, <span class="string">&#x27;æµ™æ±Ÿ&#x27;</span>, <span class="string">&#x27;æ­å·&#x27;</span>, <span class="string">&#x27;æ‹±å¢…åŒº&#x27;</span>, <span class="string">&#x27;13967589201&#x27;</span>, <span class="string">&#x27;å·¦å²¸èŠ±å›­&#x27;</span>, <span class="string">&#x27;Hopey&#x27;</span>, b<span class="string">&#x27;0&#x27;</span>, <span class="keyword">NULL</span>),</span><br><span class="line">    (<span class="number">68</span>, <span class="number">4</span>, <span class="string">&#x27;æ¹–åŒ—&#x27;</span>, <span class="string">&#x27;æ­¦æ±‰&#x27;</span>, <span class="string">&#x27;æ±‰å£&#x27;</span>, <span class="string">&#x27;13967519202&#x27;</span>, <span class="string">&#x27;å¤©å¤©èŠ±å›­&#x27;</span>, <span class="string">&#x27;Thomas&#x27;</span>, b<span class="string">&#x27;1&#x27;</span>, <span class="keyword">NULL</span>),</span><br><span class="line">    (<span class="number">69</span>, <span class="number">3</span>, <span class="string">&#x27;æµ™æ±Ÿ&#x27;</span>, <span class="string">&#x27;æ­å·&#x27;</span>, <span class="string">&#x27;æ‹±å¢…åŒº&#x27;</span>, <span class="string">&#x27;13967589201&#x27;</span>, <span class="string">&#x27;å·¦å²¸èŠ±å›­&#x27;</span>, <span class="string">&#x27;Hopey&#x27;</span>, b<span class="string">&#x27;0&#x27;</span>, <span class="keyword">NULL</span>),</span><br><span class="line">    (<span class="number">70</span>, <span class="number">4</span>, <span class="string">&#x27;æ¹–åŒ—&#x27;</span>, <span class="string">&#x27;æ­¦æ±‰&#x27;</span>, <span class="string">&#x27;æ±‰å£&#x27;</span>, <span class="string">&#x27;13967519202&#x27;</span>, <span class="string">&#x27;å¤©å¤©èŠ±å›­&#x27;</span>, <span class="string">&#x27;Thomas&#x27;</span>, b<span class="string">&#x27;1&#x27;</span>, <span class="keyword">NULL</span>);</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬è¦æŸ¥è¯¢å‡ºæ‰€æœ‰æ”¶è´§åœ°å€åœ¨åŒ—äº¬çš„å¹¶ä¸”ç”¨æˆ· ID åœ¨ <code>1ã€2ã€4</code> ä¹‹ä¸­çš„ç”¨æˆ· è¦æ˜¯è‡ªå·±åŸºäº Mybatis å®ç° SQLï¼Œå¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryUserByIdAndAddr&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.muyoukule.entity.User&quot;</span>&gt;</span></span><br><span class="line">      SELECT *</span><br><span class="line">      FROM user u</span><br><span class="line">      INNER JOIN address a ON u.id = a.user_id</span><br><span class="line">      WHERE u.id</span><br><span class="line">      <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;ids&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span> <span class="attr">item</span>=<span class="string">&quot;id&quot;</span> <span class="attr">open</span>=<span class="string">&quot;IN (&quot;</span> <span class="attr">close</span>=<span class="string">&quot;)&quot;</span>&gt;</span></span><br><span class="line">          #&#123;id&#125;</span><br><span class="line">      <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">      AND a.city = #&#123;city&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹å‡ºå…¶ä¸­æœ€å¤æ‚çš„å°±æ˜¯ WHERE æ¡ä»¶çš„ç¼–å†™ï¼Œå¦‚æœä¸šåŠ¡å¤æ‚ä¸€äº›ï¼Œè¿™é‡Œçš„ SQL ä¼šæ›´å˜æ€ã€‚</p>
<p>ä½†æ˜¯åŸºäºè‡ªå®šä¹‰ SQL ç»“åˆ Wrapper çš„ç©æ³•ï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨ Wrapper æ¥æ„å»ºæŸ¥è¯¢æ¡ä»¶ï¼Œç„¶åæ‰‹å†™ SELECT åŠ FROM éƒ¨åˆ†ï¼Œå®ç°å¤šè¡¨æŸ¥è¯¢ã€‚</p>
<p>æŸ¥è¯¢æ¡ä»¶è¿™æ ·æ¥æ„å»ºï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testCustomJoinWrapper</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// 1.å‡†å¤‡è‡ªå®šä¹‰æŸ¥è¯¢æ¡ä»¶</span></span><br><span class="line">    QueryWrapper&lt;User&gt; wrapper = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;User&gt;()</span><br><span class="line">            .in(<span class="string">&quot;u.id&quot;</span>, List.of(<span class="number">1L</span>, <span class="number">2L</span>, <span class="number">4L</span>))</span><br><span class="line">            .eq(<span class="string">&quot;a.city&quot;</span>, <span class="string">&quot;åŒ—äº¬&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2.è°ƒç”¨mapperçš„è‡ªå®šä¹‰æ–¹æ³•</span></span><br><span class="line">    List&lt;User&gt; userList = userMapper.queryUserByWrapper(wrapper);</span><br><span class="line">    userList.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç„¶ååœ¨UserMapperä¸­è‡ªå®šä¹‰æ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Select(&quot;SELECT u.* FROM user u INNER JOIN address a ON u.id = a.user_id $&#123;ew.customSqlSegment&#125;&quot;)</span></span><br><span class="line">List&lt;User&gt; <span class="title function_">queryUserByWrapper</span><span class="params">(<span class="meta">@Param(&quot;ew&quot;)</span> QueryWrapper&lt;User&gt; wrapper)</span>;</span><br></pre></td></tr></table></figure>

<p>å½“ç„¶ï¼Œä¹Ÿå¯ä»¥åœ¨<code>UserMapper.xml</code>ä¸­å†™SQLï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryUserByIdAndAddr&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.itheima.mp.domain.po.User&quot;</span>&gt;</span></span><br><span class="line">    SELECT * FROM user u INNER JOIN address a ON u.id = a.user_id $&#123;ew.customSqlSegment&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="7-ä»£ç ç”Ÿæˆ"><a href="#7-ä»£ç ç”Ÿæˆ" class="headerlink" title="7. ä»£ç ç”Ÿæˆ"></a>7. ä»£ç ç”Ÿæˆ</h1><p>åœ¨ä½¿ç”¨MP ä»¥åï¼ŒåŸºç¡€çš„<code>Mapper</code>ã€<code>Service</code>ã€<code>PO</code>ä»£ç ç›¸å¯¹å›ºå®šï¼Œé‡å¤ç¼–å†™ä¹Ÿæ¯”è¾ƒéº»çƒ¦ã€‚å› æ­¤MP å®˜æ–¹æä¾›äº†ä»£ç ç”Ÿæˆå™¨ã€‚</p>
<p>é€‚ç”¨ç‰ˆæœ¬ï¼šmybatis-plus-generator 3.5.1 åŠå…¶ä»¥ä¸Šç‰ˆæœ¬ï¼Œå¯¹å†å²ç‰ˆæœ¬ä¸å…¼å®¹ï¼</p>
<p>3.5.1 ä»¥ä¸‹çš„è¯·å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://baomidou.com/pages/d357af/">ä»£ç ç”Ÿæˆå™¨ï¼ˆæ—§ï¼‰</a></p>
<p>é¦–å…ˆéœ€è¦æ·»åŠ ä¾èµ–ï¼ŒMP ä» <code>3.0.3</code> ä¹‹åç§»é™¤äº†ä»£ç ç”Ÿæˆå™¨ä¸æ¨¡æ¿å¼•æ“çš„é»˜è®¤ä¾èµ–ï¼Œéœ€è¦æ‰‹åŠ¨æ·»åŠ ç›¸å…³ä¾èµ–ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--ä»£ç ç”Ÿæˆå™¨--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-generator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--æ¨¡æ¿å¼•æ“  Velocity(é»˜è®¤)--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.velocity<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>velocity-engine-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>åˆ›å»ºä»£ç ç”Ÿæˆç±»ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.muyoukule;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.FieldFill;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.IdType;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.FastAutoGenerator;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.config.OutputFile;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.config.rules.DateType;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.config.rules.DbColumnType;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.fill.Column;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.generator.fill.Property;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Types;</span><br><span class="line"><span class="keyword">import</span> java.util.Collections;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> æœ¨åˆæ¯äº†</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2024/4/4</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// ä»£ç è‡ªåŠ¨ç”Ÿæˆå™¨</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CodeGenerator</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// ä»£ç ç”Ÿæˆå™¨å¯¹è±¡</span></span><br><span class="line">        <span class="comment">// æ•°æ®åº“ä¿¡æ¯</span></span><br><span class="line">        FastAutoGenerator.create(<span class="string">&quot;jdbc:mysql://127.0.0.1:3306/mybatis_plus&quot;</span>, <span class="string">&quot;root&quot;</span>, <span class="string">&quot;root&quot;</span>)</span><br><span class="line">                <span class="comment">// 1.å…¨å±€é…ç½®</span></span><br><span class="line">                .globalConfig(builder -&gt; &#123;</span><br><span class="line">                    builder.disableOpenDir()</span><br><span class="line">                            .author(<span class="string">&quot;æœ¨åˆæ¯äº†&quot;</span>)    <span class="comment">// è®¾ç½®ä½œè€…</span></span><br><span class="line">                            .outputDir(System.getProperty(<span class="string">&quot;user.dir&quot;</span>) + <span class="string">&quot;/src/main/java&quot;</span>)   <span class="comment">// ä»£ç è¾“å‡ºç›®å½•</span></span><br><span class="line">                            <span class="comment">//.enableSwagger()  // å¼€å¯ swagger æ¨¡å¼</span></span><br><span class="line">                            .dateType(DateType.TIME_PACK)   <span class="comment">// æ—¶é—´ç­–ç•¥</span></span><br><span class="line">                            .commentDate(<span class="string">&quot;yyyy-MM-dd&quot;</span>)  <span class="comment">// æ³¨é‡Šæ—¥æœŸ</span></span><br><span class="line">                            .build();</span><br><span class="line">                &#125;)</span><br><span class="line">                <span class="comment">// 2.æ•°æ®åº“é…ç½®</span></span><br><span class="line">                .dataSourceConfig(builder -&gt;</span><br><span class="line">                        builder.typeConvertHandler((globalConfig, typeRegistry, metaInfo) -&gt; &#123;</span><br><span class="line">                            <span class="type">int</span> <span class="variable">typeCode</span> <span class="operator">=</span> metaInfo.getJdbcType().TYPE_CODE;</span><br><span class="line">                            <span class="keyword">if</span> (typeCode == Types.SMALLINT) &#123;</span><br><span class="line">                                <span class="comment">// è‡ªå®šä¹‰ç±»å‹è½¬æ¢</span></span><br><span class="line">                                <span class="keyword">return</span> DbColumnType.INTEGER;</span><br><span class="line">                            &#125;</span><br><span class="line">                            <span class="keyword">return</span> typeRegistry.getColumnType(metaInfo);</span><br><span class="line">                        &#125;)</span><br><span class="line">                )</span><br><span class="line">                <span class="comment">// 3.åŒ…é…ç½®</span></span><br><span class="line">                .packageConfig(builder -&gt; &#123;</span><br><span class="line">                    builder.parent(<span class="string">&quot;com.muyoukule&quot;</span>) <span class="comment">// è®¾ç½®çˆ¶åŒ…å</span></span><br><span class="line">                            .entity(<span class="string">&quot;entity&quot;</span>)   <span class="comment">// Entity åŒ…å</span></span><br><span class="line">                            .service(<span class="string">&quot;service&quot;</span>) <span class="comment">// Service åŒ…å</span></span><br><span class="line">                            .serviceImpl(<span class="string">&quot;service.impl&quot;</span>)    <span class="comment">//Service Impl åŒ…å</span></span><br><span class="line">                            .mapper(<span class="string">&quot;mapper&quot;</span>)   <span class="comment">//Mapper åŒ…å</span></span><br><span class="line">                            .xml(<span class="string">&quot;AddressMapper.xml&quot;</span>)   <span class="comment">//Mapper XML åŒ…å</span></span><br><span class="line">                            .controller(<span class="string">&quot;controller&quot;</span>)   <span class="comment">//	Controller åŒ…å</span></span><br><span class="line">                            .pathInfo(Collections.singletonMap(OutputFile.xml, System.getProperty(<span class="string">&quot;user.dir&quot;</span>) + <span class="string">&quot;/src/main/resources/mapper&quot;</span>))<span class="comment">// è®¾ç½®mapperXmlç”Ÿæˆè·¯å¾„</span></span><br><span class="line">                            .build();</span><br><span class="line">                &#125;)</span><br><span class="line">                <span class="comment">// 4.ç­–ç•¥é…ç½®</span></span><br><span class="line">                .strategyConfig(builder -&gt; &#123;</span><br><span class="line">                    builder</span><br><span class="line">                            <span class="comment">// å®ä½“ç­–ç•¥é…ç½®</span></span><br><span class="line">                            .entityBuilder()</span><br><span class="line">                            .enableLombok() <span class="comment">// å¼€å¯ lombok æ¨¡å‹</span></span><br><span class="line">                            .versionColumnName(<span class="string">&quot;version&quot;</span>)   <span class="comment">// ä¹è§‚é”å­—æ®µå(æ•°æ®åº“å­—æ®µ)</span></span><br><span class="line">                            .logicDeleteColumnName(<span class="string">&quot;deleted&quot;</span>)   <span class="comment">// é€»è¾‘åˆ é™¤å­—æ®µå(æ•°æ®åº“å­—æ®µ)</span></span><br><span class="line">                            .addTableFills(<span class="keyword">new</span> <span class="title class_">Column</span>(<span class="string">&quot;create_time&quot;</span>, FieldFill.INSERT)) <span class="comment">// æ·»åŠ è¡¨å­—æ®µå¡«å……</span></span><br><span class="line">                            .addTableFills(<span class="keyword">new</span> <span class="title class_">Property</span>(<span class="string">&quot;updateTime&quot;</span>, FieldFill.INSERT_UPDATE)) <span class="comment">// æ·»åŠ è¡¨å­—æ®µå¡«å……</span></span><br><span class="line">                            .idType(IdType.AUTO)    <span class="comment">// å…¨å±€ä¸»é”®ç±»å‹</span></span><br><span class="line">                            .formatFileName(<span class="string">&quot;%s&quot;</span>)   <span class="comment">// æ ¼å¼åŒ–æ–‡ä»¶åç§°ï¼Œ %sä¸ºå ä½ç¬¦ï¼ŒæŒ‡ä»£æ¨¡å—åç§°</span></span><br><span class="line">                            <span class="comment">// Controller ç­–ç•¥é…ç½®</span></span><br><span class="line">                            .controllerBuilder()</span><br><span class="line">                            .enableRestStyle() <span class="comment">// å¼€å¯ç”Ÿæˆ @RestController æ§åˆ¶å™¨</span></span><br><span class="line">                            .formatFileName(<span class="string">&quot;%sController&quot;</span>) <span class="comment">// æ ¼å¼åŒ–æ–‡ä»¶åç§°ï¼Œ %sä¸ºå ä½ç¬¦ï¼ŒæŒ‡ä»£æ¨¡å—åç§°</span></span><br><span class="line">                            .build();</span><br><span class="line">                &#125;)</span><br><span class="line">                <span class="comment">// 5.æ‰§è¡Œç”Ÿæˆæ“ä½œ</span></span><br><span class="line">                .execute();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸Šä»£ç æŒ‰è¦æ±‚ä¿®æ”¹å³å¯ä½¿ç”¨ã€‚å¯¹äºä»£ç ç”Ÿæˆå™¨ä¸­çš„æ›´å¤šä»£ç å†…å®¹ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä»<a target="_blank" rel="noopener" href="https://baomidou.com/pages/981406/#%E6%95%B0%E6%8D%AE%E5%BA%93%E9%85%8D%E7%BD%AE-datasourceconfig">å®˜æ–¹æ–‡æ¡£</a>ä¸­è·å–ä»£ç è¿›è¡Œä¿®æ”¹ã€‚</p>
<h1 id="8-é€»è¾‘åˆ é™¤"><a href="#8-é€»è¾‘åˆ é™¤" class="headerlink" title="8. é€»è¾‘åˆ é™¤"></a>8. é€»è¾‘åˆ é™¤</h1><p>å¯¹äºä¸€äº›æ¯”è¾ƒé‡è¦çš„æ•°æ®ï¼Œæˆ‘ä»¬å¾€å¾€ä¼šé‡‡ç”¨é€»è¾‘åˆ é™¤çš„æ–¹æ¡ˆï¼Œå³ï¼š</p>
<ul>
<li>åœ¨è¡¨ä¸­æ·»åŠ ä¸€ä¸ªå­—æ®µæ ‡è®°æ•°æ®æ˜¯å¦è¢«åˆ é™¤</li>
<li>å½“åˆ é™¤æ•°æ®æ—¶æŠŠæ ‡è®°ç½®ä¸ºtrue</li>
<li>æŸ¥è¯¢æ—¶è¿‡æ»¤æ‰æ ‡è®°ä¸ºtrueçš„æ•°æ®</li>
</ul>
<p>ä¸€æ—¦é‡‡ç”¨äº†é€»è¾‘åˆ é™¤ï¼Œæ‰€æœ‰çš„æŸ¥è¯¢å’Œåˆ é™¤é€»è¾‘éƒ½è¦è·Ÿç€å˜åŒ–ï¼Œéå¸¸éº»çƒ¦ã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒMP å°±æ·»åŠ äº†å¯¹é€»è¾‘åˆ é™¤çš„æ”¯æŒã€‚</p>
<p><font color="red">PSï¼šåªæœ‰ MP ç”Ÿæˆçš„SQLè¯­å¥æ‰æ”¯æŒè‡ªåŠ¨çš„é€»è¾‘åˆ é™¤ï¼Œè‡ªå®šä¹‰ SQL éœ€è¦è‡ªå·±æ‰‹åŠ¨å¤„ç†é€»è¾‘åˆ é™¤ã€‚</font></p>
<p>1ã€æˆ‘ä»¬ç»™ <code>user</code> è¡¨æ·»åŠ ä¸€ä¸ªé€»è¾‘åˆ é™¤å­—æ®µï¼Œè®¾ç½®é»˜è®¤å€¼ä¸º 0 ï¼š</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> <span class="keyword">user</span> <span class="keyword">add</span> deleted bit <span class="keyword">default</span> b<span class="string">&#x27;0&#x27;</span> <span class="keyword">null</span> comment <span class="string">&#x27;é€»è¾‘åˆ é™¤&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p><img src="https://muyoukule-blog-pics.oss-cn-chengdu.aliyuncs.com/SSMIMG/MyBatisPlus/%E6%B7%BB%E5%8A%A0%E9%80%BB%E8%BE%91%E5%88%A0%E9%99%A4%E5%AD%97%E6%AE%B5deleted.png" alt="æ·»åŠ é€»è¾‘åˆ é™¤å­—æ®µdeleted"></p>
<p>2ã€ç»™ <code>user</code> å®ä½“æ·»åŠ  <code>deleted</code> å­—æ®µï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//é€»è¾‘åˆ é™¤</span></span><br><span class="line"><span class="keyword">private</span> Boolean deleted;</span><br></pre></td></tr></table></figure>

<p>3ã€åœ¨<code>application.yml</code>ä¸­é…ç½®é€»è¾‘åˆ é™¤å­—æ®µï¼š</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="attr">logic-delete-field:</span> <span class="string">deleted</span> <span class="comment"># å…¨å±€é€»è¾‘åˆ é™¤çš„å®ä½“å­—æ®µå(since 3.3.0,é…ç½®åå¯ä»¥å¿½ç•¥ä¸é…ç½®æ­¥éª¤2)</span></span><br><span class="line">      <span class="attr">logic-delete-value:</span> <span class="number">1</span> <span class="comment"># é€»è¾‘å·²åˆ é™¤å€¼(é»˜è®¤ä¸º 1)</span></span><br><span class="line">      <span class="attr">logic-not-delete-value:</span> <span class="number">0</span> <span class="comment"># é€»è¾‘æœªåˆ é™¤å€¼(é»˜è®¤ä¸º 0)</span></span><br></pre></td></tr></table></figure>

<p>4ã€æµ‹è¯•</p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬æ‰§è¡Œä¸€ä¸ªåˆ é™¤æ“ä½œï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testDelete</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> userMapper.deleteById(<span class="number">1L</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ–¹æ³•ä¸æ™®é€šåˆ é™¤ä¸€æ¨¡ä¸€æ ·ï¼Œä½†æ˜¯åº•å±‚çš„SQLé€»è¾‘å˜äº†ï¼š</p>
<p><img src="https://muyoukule-blog-pics.oss-cn-chengdu.aliyuncs.com/SSMIMG/MyBatisPlus/%E5%BA%95%E5%B1%82%E7%9A%84SQL%E9%80%BB%E8%BE%91%E6%94%B9%E5%8F%98.png" alt="åº•å±‚çš„SQLé€»è¾‘æ”¹å˜"></p>
<p>æŸ¥çœ‹æ•°æ®åº“ï¼Œå‘ç° ID ä¸º1 çš„è®°å½•è¿˜åœ¨æ•°æ®åº“ï¼Œåªæ˜¯ deleted å­—æ®µå˜ä¸º 1 ï¼š</p>
<p><img src="https://muyoukule-blog-pics.oss-cn-chengdu.aliyuncs.com/SSMIMG/MyBatisPlus/deleted%E5%AD%97%E6%AE%B5%E5%8F%98%E4%B8%BA1.png"></p>
<p>æŸ¥è¯¢ä¸€ä¸‹è¯•è¯•ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testSelectAll</span><span class="params">()</span> &#123;</span><br><span class="line">    List&lt;User&gt; userList = userMapper.selectList(<span class="literal">null</span>);</span><br><span class="line">    userList.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¼šå‘ç° IDä¸º 1 çš„è®°å½•ç¡®å®æ²¡æœ‰æŸ¥è¯¢å‡ºæ¥ï¼Œè€Œä¸” SQL ä¸­ä¹Ÿå¯¹é€»è¾‘åˆ é™¤å­—æ®µåšäº†åˆ¤æ–­ï¼š</p>
<p><img src="https://muyoukule-blog-pics.oss-cn-chengdu.aliyuncs.com/SSMIMG/MyBatisPlus/SQL%E5%AF%B9%E9%80%BB%E8%BE%91%E5%88%A0%E9%99%A4%E5%AD%97%E6%AE%B5%E5%81%9A%E5%87%BA%E5%88%A4%E6%96%AD.png" alt="SQLå¯¹é€»è¾‘åˆ é™¤å­—æ®µåšå‡ºåˆ¤æ–­"></p>
<p>ç»¼ä¸Šï¼Œ å¼€å¯äº†é€»è¾‘åˆ é™¤åŠŸèƒ½ä»¥åï¼Œæˆ‘ä»¬å°±å¯ä»¥åƒæ™®é€šåˆ é™¤ä¸€æ ·åšCRUDï¼ŒåŸºæœ¬ä¸ç”¨è€ƒè™‘ä»£ç é€»è¾‘é—®é¢˜ã€‚è¿˜æ˜¯éå¸¸æ–¹ä¾¿çš„ã€‚</p>
<p><strong>æ³¨æ„</strong>ï¼š é€»è¾‘åˆ é™¤æœ¬èº«ä¹Ÿæœ‰è‡ªå·±çš„é—®é¢˜ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>ä¼šå¯¼è‡´æ•°æ®åº“è¡¨åƒåœ¾æ•°æ®è¶Šæ¥è¶Šå¤šï¼Œä»è€Œå½±å“æŸ¥è¯¢æ•ˆç‡</li>
<li>SQL ä¸­å…¨éƒ½éœ€è¦å¯¹é€»è¾‘åˆ é™¤å­—æ®µåšåˆ¤æ–­ï¼Œå½±å“æŸ¥è¯¢æ•ˆç‡</li>
</ul>
<p>å› æ­¤ï¼Œä¸å¤ªæ¨èé‡‡ç”¨é€»è¾‘åˆ é™¤åŠŸèƒ½ï¼Œå¦‚æœæ•°æ®ä¸èƒ½åˆ é™¤ï¼Œå¯ä»¥é‡‡ç”¨æŠŠæ•°æ®è¿ç§»åˆ°å…¶å®ƒè¡¨çš„åŠæ³•ã€‚</p>
<h1 id="9-é€šç”¨æšä¸¾"><a href="#9-é€šç”¨æšä¸¾" class="headerlink" title="9. é€šç”¨æšä¸¾"></a>9. é€šç”¨æšä¸¾</h1><h2 id="9-1-å£°æ˜é€šç”¨æšä¸¾å±æ€§"><a href="#9-1-å£°æ˜é€šç”¨æšä¸¾å±æ€§" class="headerlink" title="9.1 å£°æ˜é€šç”¨æšä¸¾å±æ€§"></a>9.1 å£°æ˜é€šç”¨æšä¸¾å±æ€§</h2><p>1ã€æˆ‘ä»¬ç»™  <code>user</code>  è¡¨æ·»åŠ ä¸€ä¸ª <code>status</code> å­—æ®µï¼š</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> <span class="keyword">user</span> <span class="keyword">add</span> `status` <span class="type">INT</span>(<span class="number">10</span>) <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;1&#x27;</span> COMMENT <span class="string">&#x27;ä½¿ç”¨çŠ¶æ€ï¼ˆ1æ­£å¸¸ 2å†»ç»“ï¼‰&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>2ã€å®šä¹‰ä¸€ä¸ªç”¨æˆ·çŠ¶æ€çš„æšä¸¾ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.muyoukule.enums;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Getter;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">UserStatus</span> &#123;</span><br><span class="line">    NORMAL(<span class="number">1</span>, <span class="string">&quot;æ­£å¸¸&quot;</span>),</span><br><span class="line">    FREEZE(<span class="number">2</span>, <span class="string">&quot;å†»ç»“&quot;</span>);</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> value;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String desc;</span><br><span class="line"></span><br><span class="line">    UserStatus(<span class="type">int</span> value, String desc) &#123;</span><br><span class="line">        <span class="built_in">this</span>.value = value;</span><br><span class="line">        <span class="built_in">this</span>.desc = desc;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3ã€ç»™ <code>user</code> å®ä½“æ·»åŠ  <code>status</code> å­—æ®µï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä½¿ç”¨çŠ¶æ€ï¼ˆ1æ­£å¸¸ 2å†»ç»“ï¼‰</span></span><br><span class="line"><span class="keyword">private</span> UserStatus status;</span><br></pre></td></tr></table></figure>

<p>è¦è®© MP å¤„ç†æšä¸¾ä¸æ•°æ®åº“ç±»å‹è‡ªåŠ¨è½¬æ¢ï¼Œæˆ‘ä»¬å¿…é¡»å‘Šè¯‰ MPï¼Œæšä¸¾ä¸­çš„å“ªä¸ªå­—æ®µçš„å€¼ä½œä¸ºæ•°æ®åº“å€¼ã€‚ </p>
<p>MP æä¾›äº† <code>@EnumValue</code> æ³¨è§£æ¥æ ‡è®°æšä¸¾å±æ€§ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">UserStatus</span> &#123;</span><br><span class="line">    NORMAL(<span class="number">1</span>, <span class="string">&quot;æ­£å¸¸&quot;</span>),</span><br><span class="line">    FREEZE(<span class="number">2</span>, <span class="string">&quot;å†»ç»“&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@EnumValue</span> <span class="comment">// æ ‡è®°æ•°æ®åº“å­˜çš„å€¼æ˜¯ value</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> value;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String desc;</span><br><span class="line"></span><br><span class="line">    UserStatus(<span class="type">int</span> value, String desc) &#123;</span><br><span class="line">        <span class="built_in">this</span>.value = value;</span><br><span class="line">        <span class="built_in">this</span>.desc = desc;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="9-2-é…ç½®æ‰«æé€šç”¨æšä¸¾"><a href="#9-2-é…ç½®æ‰«æé€šç”¨æšä¸¾" class="headerlink" title="9.2 é…ç½®æ‰«æé€šç”¨æšä¸¾"></a><del>9.2 é…ç½®æ‰«æé€šç”¨æšä¸¾</del></h2><p><font color="red"><strong>PSï¼šä» 3.5.2 å¼€å§‹æ— éœ€é…ç½®ï¼</strong></font>ğŸ˜</p>
<p><strong>æ–¹å¼ä¸€ï¼šä»…é…ç½®æŒ‡å®šåŒ…å†…çš„æšä¸¾ç±»ä½¿ç”¨ MybatisEnumTypeHandler</strong></p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line"> 	<span class="comment"># è®¾ç½®æšä¸¾åŒ…æ‰«æã€‚3.5.2 ç‰ˆæœ¬å¼€å§‹ï¼Œçœç•¥æ­¤é…ç½®ã€‚</span></span><br><span class="line">    <span class="comment"># æ”¯æŒç»Ÿé…ç¬¦ * æˆ–è€… ; åˆ†å‰² </span></span><br><span class="line">    <span class="attr">typeEnumsPackage:</span> <span class="string">com.muyoukule.enums</span></span><br></pre></td></tr></table></figure>

<p>å½“æ·»åŠ è¿™ä¸ªé…ç½®åï¼Œmybatis-plus æä¾›çš„ <code>MybatisSqlSessionFactoryBean</code> ä¼šè‡ªåŠ¨æ‰«æåŒ…å†…åˆæ³•çš„æšä¸¾ç±»ï¼ˆä½¿ç”¨äº† <code>@EnumValue</code> æ³¨è§£ï¼Œæˆ–è€…å®ç°äº† <code>IEnum</code> æ¥å£ï¼‰ï¼Œåˆ†åˆ«ä¸ºè¿™äº›ç±»æ³¨å†Œä½¿ç”¨ <code>MybatisEnumTypeHandler</code>ã€‚</p>
<p>æ¢å¥è¯è¯´ï¼Œåªæœ‰æŒ‡å®šåŒ…ä¸‹çš„æšä¸¾ç±»ä¼šä½¿ç”¨æ–°çš„ TypeHandlerã€‚å…¶ä»–åŒ…ä¸‹ï¼Œæˆ–è€…åŒ…å†…æ²¡æœ‰åšç›¸å…³æ”¹é€ çš„æšä¸¾ç±»ï¼Œä»ç„¶ä¼šä½¿ç”¨ Mybatis çš„ DefaultEnumTypeHandlerã€‚</p>
<p><strong>æ–¹å¼äºŒï¼šç›´æ¥æŒ‡å®š DefaultEnumTypeHandler</strong></p>
<p>æ­¤æ–¹å¼ç”¨æ¥ <code>å…¨å±€</code> ä¿®æ”¹ Mybatis ä½¿ç”¨çš„ EnumTypeHandlerã€‚</p>
<p>åœ¨application.yamlæ–‡ä»¶ä¸­æ·»åŠ é…ç½®ï¼š</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">default-enum-type-handler:</span> <span class="string">com.baomidou.mybatisplus.core.handlers.MybatisEnumTypeHandler</span></span><br></pre></td></tr></table></figure>

<p>è‡ªå®šä¹‰é…ç½®ç±» MybatisPlusAutoConfigurationï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MybatisPlusAutoConfiguration</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> MybatisPlusPropertiesCustomizer <span class="title function_">mybatisPlusPropertiesCustomizer</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> properties -&gt; &#123;</span><br><span class="line">            <span class="type">GlobalConfig</span> <span class="variable">globalConfig</span> <span class="operator">=</span> properties.getGlobalConfig();</span><br><span class="line">            globalConfig.setBanner(<span class="literal">false</span>);</span><br><span class="line">            <span class="type">MybatisConfiguration</span> <span class="variable">configuration</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MybatisConfiguration</span>();</span><br><span class="line">            configuration.setDefaultEnumTypeHandler(MybatisEnumTypeHandler.class);</span><br><span class="line">            properties.setConfiguration(configuration);</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æŸ¥è¯¢ä¸€æ¡æ•°æ®æŸ¥çœ‹ï¼š</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Jack&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">16</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;email&quot;</span><span class="punctuation">:</span> <span class="string">&quot;test2@baomidou.com&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;deleted&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="string">&quot;NORMAL&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>å¦‚ä½•åºåˆ—åŒ–æšä¸¾å€¼ä¸ºå‰ç«¯è¿”å›å€¼ï¼Ÿ</p>
</blockquote>
<p>åœ¨UserStatusæšä¸¾ä¸­é€šè¿‡ <code>@JsonValue</code> æ³¨è§£æ ‡è®° JSON åºåˆ—åŒ–æ—¶å±•ç¤ºçš„å­—æ®µ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">UserStatus</span> &#123;</span><br><span class="line">    NORMAL(<span class="number">1</span>, <span class="string">&quot;æ­£å¸¸&quot;</span>),</span><br><span class="line">    FREEZE(<span class="number">2</span>, <span class="string">&quot;å†»ç»“&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@EnumValue</span> <span class="comment">// æ ‡è®°æ•°æ®åº“å­˜çš„å€¼æ˜¯ value</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> value;</span><br><span class="line">    <span class="meta">@JsonValue</span>    <span class="comment">//æ ‡è®°å“åº”jsonå€¼</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String desc;</span><br><span class="line"></span><br><span class="line">    UserStatus(<span class="type">int</span> value, String desc) &#123;</span><br><span class="line">        <span class="built_in">this</span>.value = value;</span><br><span class="line">        <span class="built_in">this</span>.desc = desc;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å†æ¬¡æŸ¥çœ‹ï¼š</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Jack&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">16</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;email&quot;</span><span class="punctuation">:</span> <span class="string">&quot;test2@baomidou.com&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;deleted&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="string">&quot;æ­£å¸¸&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°åœ¨ desc ä¸ŠåŠ äº† <code>@JsonValue</code> æ³¨è§£æ³¨è§£å status ç”± <code>NORMAL</code> å˜ä¸ºäº† <code>æ­£å¸¸</code> ã€‚</p>
<h1 id="10-JSONç±»å‹å¤„ç†å™¨"><a href="#10-JSONç±»å‹å¤„ç†å™¨" class="headerlink" title="10. JSONç±»å‹å¤„ç†å™¨"></a>10. JSONç±»å‹å¤„ç†å™¨</h1><p>1ã€æˆ‘ä»¬ç»™  <code>user</code>  è¡¨æ·»åŠ ä¸€ä¸ª <code>info</code> å­—æ®µï¼Œæ˜¯ JSON ç±»å‹ï¼š</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> <span class="keyword">user</span> <span class="keyword">add</span> `info` JSON <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;è¯¦ç»†ä¿¡æ¯&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>2ã€å‘ <code>info</code> å­—æ®µæ“¦æ’å…¥æ•°æ®æ ¼å¼åƒè¿™æ ·ï¼š</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;intro&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ä½›ç³»é’å¹´&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;gender&quot;</span><span class="punctuation">:</span> <span class="string">&quot;male&quot;</span><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>3ã€ç»™ <code>user</code> å®ä½“æ·»åŠ  <code>info</code> å­—æ®µï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¯¦ç»†ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">private</span> String info;</span><br></pre></td></tr></table></figure>

<p>ä¸€èˆ¬ User å®ä½“ç±»ä¸­éƒ½æ˜¯ <code>String </code> ç±»å‹çš„ infoï¼Œè¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬è¦è¯»å– info ä¸­çš„å±æ€§æ—¶å°±éå¸¸ä¸æ–¹ä¾¿ã€‚</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Jack&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">16</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;email&quot;</span><span class="punctuation">:</span> <span class="string">&quot;test2@baomidou.com&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;deleted&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="string">&quot;æ­£å¸¸&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;info&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&#123;\&quot;intro\&quot;: \&quot;ä½›ç³»é’å¹´\&quot;, \&quot;gender\&quot;: \&quot;male\&quot;&#125;&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>å¦‚æœè¦æ–¹ä¾¿è·å–ï¼Œinfo çš„ç±»å‹æœ€å¥½æ˜¯ä¸€ä¸ª <code>Map</code> æˆ–è€…å®ä½“ç±»ã€‚è€Œä¸€æ—¦æˆ‘ä»¬æŠŠ <code>info </code> æ”¹ä¸º <code>å¯¹è±¡</code> ç±»å‹ï¼Œå°±éœ€è¦åœ¨å†™å…¥æ•°æ®åº“æ—¶æ‰‹åŠ¨è½¬ä¸º <code>String</code>ï¼Œå†è¯»å–æ•°æ®åº“æ—¶ï¼Œæ‰‹åŠ¨è½¬æ¢ä¸º <code>å¯¹è±¡</code>ï¼Œè¿™ä¼šéå¸¸éº»çƒ¦ã€‚</p>
<p>å› æ­¤ MP æä¾›äº†å¾ˆå¤šç‰¹æ®Šç±»å‹å­—æ®µçš„ç±»å‹å¤„ç†å™¨ï¼Œè§£å†³ç‰¹æ®Šå­—æ®µç±»å‹ä¸æ•°æ®åº“ç±»å‹è½¬æ¢çš„é—®é¢˜ã€‚ä¾‹å¦‚å¤„ç† JSON å°±å¯ä»¥ä½¿ç”¨ <code>JacksonTypeHandler </code> å¤„ç†å™¨ã€‚</p>
<blockquote>
<p>æ€ä¹ˆä½¿ç”¨ JacksonTypeHandler å¤„ç†å™¨å‘¢ï¼Ÿ</p>
</blockquote>
<p>1ã€æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå•ç‹¬å®ä½“ç±»æ¥ä¸ info å­—æ®µçš„å±æ€§åŒ¹é…ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserInfo</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String intro;</span><br><span class="line">    <span class="keyword">private</span> String gender;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2ã€æ¥ä¸‹æ¥ï¼Œå°† User ç±»çš„ info å­—æ®µè®¾ç½®ä¸º UserInfo ç±»å‹ï¼Œå¹¶å£°æ˜ç±»å‹å¤„ç†å™¨ï¼š</p>
<p><font color="red"><strong>PSï¼šå¿…é¡»å¼€å¯æ˜ å°„æ³¨è§£Â <code>@TableName(autoResultMap = true)</code> ï¼ï¼ï¼</strong></font></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@TableName(value = &quot;`user`&quot;, autoResultMap = true)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="meta">@TableId(type = IdType.INPUT)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    </span><br><span class="line">	<span class="comment">// -- skip --</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è¯¦ç»†ä¿¡æ¯</span></span><br><span class="line">    <span class="meta">@TableField(typeHandler = JacksonTypeHandler.class)</span></span><br><span class="line">    <span class="keyword">private</span> UserInfo info;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3ã€æµ‹è¯•å¯ä»¥å‘ç°ï¼Œæ‰€æœ‰æ•°æ®éƒ½æ­£ç¡®å°è£…åˆ° UserInfo å½“ä¸­äº†ï¼š</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Jack&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">16</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;email&quot;</span><span class="punctuation">:</span> <span class="string">&quot;test2@baomidou.com&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;deleted&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="string">&quot;æ­£å¸¸&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;info&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;intro&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ä¼åœ°é­”&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;gender&quot;</span><span class="punctuation">:</span> <span class="string">&quot;male&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h1 id="11-è‡ªåŠ¨å¡«å……åŠŸèƒ½"><a href="#11-è‡ªåŠ¨å¡«å……åŠŸèƒ½" class="headerlink" title="11. è‡ªåŠ¨å¡«å……åŠŸèƒ½"></a>11. è‡ªåŠ¨å¡«å……åŠŸèƒ½</h1><p>åˆ›å»ºæ—¶é—´ã€æ›´æ–°æ—¶é—´ï¼Œå¯¹äºè¿™ä¸¤ä¸ªå­—æ®µçš„æ“ä½œæˆ‘ä»¬å¸Œæœ›æ˜¯è‡ªåŠ¨å®Œæˆè€Œä¸æ˜¯éœ€è¦æ‰‹åŠ¨ç¼–å†™ã€‚</p>
<p>1ã€æˆ‘ä»¬ç»™  <code>user</code>  è¡¨æ·»åŠ  <code>create_time</code> å­—æ®µå’Œ  <code>update_time</code> å­—æ®µå¹¶å°†è¿™ä¸¤ä¸ªå­—æ®µç±»å‹è®¾ç½®ä¸º <code>timestamp</code>ï¼š</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> <span class="keyword">user</span> <span class="keyword">add</span> `create_time` <span class="type">timestamp</span> COMMENT <span class="string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>;</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> <span class="keyword">user</span> <span class="keyword">add</span> `update_time` <span class="type">timestamp</span> COMMENT <span class="string">&#x27;æ›´æ–°æ—¶é—´&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>2ã€åŒæ­¥å®ä½“ç±»ï¼Œå®ä½“ç±»çš„å±æ€§ä¸Šå¢åŠ æ³¨è§£ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å­—æ®µå¡«å……å†…å®¹</span></span><br><span class="line"><span class="meta">@TableField(fill = FieldFill.INSERT)</span></span><br><span class="line"><span class="keyword">private</span> LocalDateTime createTime;</span><br><span class="line"><span class="meta">@TableField(fill = FieldFill.INSERT_UPDATE)</span></span><br><span class="line"><span class="keyword">private</span> LocalDateTime updateTime;</span><br></pre></td></tr></table></figure>

<p>3ã€ç¼–å†™å¤„ç†å™¨æ¥å¤„ç†è¿™äº›æ³¨è§£ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyMetaObjectHandler</span> <span class="keyword">implements</span> <span class="title class_">MetaObjectHandler</span> &#123;</span><br><span class="line">    <span class="comment">// æ’å…¥çš„å¡«å……ç­–ç•¥</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insertFill</span><span class="params">(MetaObject metaObject)</span> &#123;</span><br><span class="line">        log.info(<span class="string">&quot;start insert fill ....&quot;</span>);</span><br><span class="line">        <span class="built_in">this</span>.strictInsertFill(metaObject, <span class="string">&quot;createTime&quot;</span>, LocalDateTime.class, LocalDateTime.now());</span><br><span class="line">        <span class="built_in">this</span>.strictInsertFill(metaObject, <span class="string">&quot;updateTime&quot;</span>, LocalDateTime.class, LocalDateTime.now());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ›´æ–°çš„å¡«å……ç­–ç•¥</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateFill</span><span class="params">(MetaObject metaObject)</span> &#123;</span><br><span class="line">        log.info(<span class="string">&quot;start update fill ....&quot;</span>);</span><br><span class="line">        <span class="built_in">this</span>.strictUpdateFill(metaObject, <span class="string">&quot;updateTime&quot;</span>, LocalDateTime.class, LocalDateTime.now());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3ã€æµ‹è¯•æ’å…¥ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testSave</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">    user.setName(<span class="string">&quot;æœ¨åˆæ¯äº†&quot;</span>);</span><br><span class="line">    user.setAge(<span class="number">18</span>);</span><br><span class="line">    user.setEmail(<span class="string">&quot;example@gmail.com&quot;</span>);</span><br><span class="line">    <span class="comment">// è¿™é‡Œä½¿ç”¨ MP é»˜è®¤ä¸»é”® ID ç”Ÿæˆç­–ç•¥</span></span><br><span class="line">    userMapper.insert(user); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>4ã€æŸ¥çœ‹æ•°æ®åº“ï¼š</p>
<p><img src="https://muyoukule-blog-pics.oss-cn-chengdu.aliyuncs.com/SSMIMG/MyBatisPlus/%E6%95%B0%E6%8D%AE%E8%87%AA%E5%8A%A8%E5%A1%AB%E5%85%85.png" alt="æ•°æ®è‡ªåŠ¨å¡«å……"></p>
<h1 id="12-ä¹è§‚é”æ’ä»¶"><a href="#12-ä¹è§‚é”æ’ä»¶" class="headerlink" title="12. ä¹è§‚é”æ’ä»¶"></a>12. ä¹è§‚é”æ’ä»¶</h1><p>ä¸ä¹è§‚é”ç›¸å¯¹çš„æœ‰ï¼š<strong>æ‚²è§‚é”</strong></p>
<ul>
<li>æ‚²è§‚é”åœ¨æ•°æ®ä¿®æ”¹å‰åŠ é”ï¼Œé¿å…å…¶ä»–äº‹åŠ¡ä¿®æ”¹ï¼Œç¡®ä¿æ•°æ®å®‰å…¨ä½†å¯èƒ½é™ä½å¹¶å‘æ€§èƒ½ã€‚</li>
<li>ä¹è§‚é”åˆ™å‡è®¾å†²çªå°‘ï¼Œåªåœ¨æ•°æ®æäº¤æ—¶éªŒè¯å†²çªï¼Œæé«˜å¹¶å‘æ€§èƒ½ä½†å¯èƒ½éœ€å¤„ç†æ›´å¤šå†²çªã€‚</li>
</ul>
<p>å®˜æ–¹è§£é‡Šï¼š<a target="_blank" rel="noopener" href="https://baomidou.com/pages/0d93c0/#optimisticlockerinnerinterceptor">ä¹è§‚é”æ’ä»¶</a></p>
<p>ç›®çš„ï¼šå½“è¦æ›´æ–°ä¸€æ¡è®°å½•çš„æ—¶å€™ï¼Œå¸Œæœ›è¿™æ¡è®°å½•æ²¡æœ‰è¢«åˆ«äººæ›´æ–°ã€‚</p>
<p>ä¹è§‚é”å®ç°æ–¹å¼ï¼š</p>
<ul>
<li>å–å‡ºè®°å½•æ—¶ï¼Œè·å–å½“å‰ version</li>
<li>æ›´æ–°æ—¶ï¼Œå¸¦ä¸Šè¿™ä¸ª version</li>
<li>æ‰§è¡Œæ›´æ–°æ—¶ï¼Œ set version &#x3D; newVersion where version &#x3D; oldVersion</li>
<li>å¦‚æœ version ä¸å¯¹ï¼Œå°±æ›´æ–°å¤±è´¥</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- å‡è®¾æœ‰ä¸¤ä¸ªçº¿ç¨‹ Aã€B åŒæ—¶ä¿®æ”¹ä¸€æ¡è®°å½•</span></span><br><span class="line"><span class="keyword">update</span> <span class="keyword">user</span> <span class="keyword">set</span> name <span class="operator">=</span> &quot;æœ¨åˆæ¯äº†&quot;, version <span class="operator">=</span> version <span class="operator">+</span> <span class="number">1</span> <span class="keyword">where</span> id <span class="operator">=</span> <span class="number">6</span> <span class="keyword">and</span> version <span class="operator">=</span> <span class="number">1</span></span><br><span class="line"><span class="comment">-- ä½†æ˜¯ B æŠ¢å…ˆå®Œæˆäº†ä¿®æ”¹ï¼Œversion ä¿®æ”¹æˆ 2</span></span><br><span class="line"><span class="comment">-- è¿™ä¸ªæ—¶å€™ A å°±ä¸èƒ½ä¿®æ”¹æ•°æ®äº†ï¼Œå®ç°çº¿ç¨‹é€šä¿¡çš„å®‰å…¨</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä¹è§‚é”æ’ä»¶å®ç°æ­¥éª¤</p>
</blockquote>
<p>1ã€æˆ‘ä»¬ç»™ <code>user</code> è¡¨æ·»åŠ ä¸€ä¸ª <code>version</code> å­—æ®µï¼Œè®¾ç½®é»˜è®¤å€¼ä¸º 1 ï¼š</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> <span class="keyword">user</span> <span class="keyword">add</span> version <span class="type">int</span> <span class="keyword">default</span> b<span class="string">&#x27;1&#x27;</span> <span class="keyword">null</span> comment <span class="string">&#x27;ä¹è§‚é”&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>æ·»åŠ ç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="https://muyoukule-blog-pics.oss-cn-chengdu.aliyuncs.com/SSMIMG/MyBatisPlus/%E6%B7%BB%E5%8A%A0version%E5%AD%97%E6%AE%B5.png" alt="æ·»åŠ versionå­—æ®µ"></p>
<p>2ã€ç»™å®ä½“ç±»å¢åŠ ç›¸åº”çš„å­—æ®µï¼Œå¹¶æ·»åŠ æ³¨è§£ <code>@Version</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Version</span></span><br><span class="line"><span class="keyword">private</span> Integer version;</span><br></pre></td></tr></table></figure>

<p>3ã€æ³¨å†Œç»„ä»¶</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;com.muyoukule.mapper&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MybatisPlusConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> MybatisPlusInterceptor <span class="title function_">mybatisPlusInterceptor</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">MybatisPlusInterceptor</span> <span class="variable">mybatisPlusInterceptor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MybatisPlusInterceptor</span>();</span><br><span class="line">        mybatisPlusInterceptor.addInnerInterceptor(<span class="keyword">new</span> <span class="title class_">OptimisticLockerInnerInterceptor</span>());</span><br><span class="line">        <span class="keyword">return</span> mybatisPlusInterceptor;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>4ã€ç¼–å†™æµ‹è¯•æ–¹æ³•è¿›è¡Œæµ‹è¯•ï¼š</p>
<p><strong>PSï¼šè¦æƒ³å®ç°ä¹è§‚é”ï¼Œé¦–å…ˆç¬¬ä¸€æ­¥åº”è¯¥æ˜¯æ‹¿åˆ°è¡¨ä¸­çš„ versionï¼Œç„¶åæ‹¿ version å½“æ¡ä»¶å†å°† version åŠ  1 æ›´æ–°å›åˆ°æ•°æ®åº“è¡¨ä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦<font color="red">å…ˆå¯¹å…¶è¿›è¡ŒæŸ¥è¯¢</font></strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æµ‹è¯•ä¹è§‚é”</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testOptimisticLocker</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// æŸ¥è¯¢</span></span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userMapper.selectById(<span class="number">2L</span>);</span><br><span class="line">    <span class="comment">// ä¿®æ”¹ä¿¡æ¯</span></span><br><span class="line">    user.setName(<span class="string">&quot;muyoukule&quot;</span>);</span><br><span class="line">    user.setAge(<span class="number">18</span>);</span><br><span class="line">    user.setEmail(<span class="string">&quot;example@gmail.com&quot;</span>);</span><br><span class="line">    <span class="comment">// æ›´æ–°ä¿¡æ¯</span></span><br><span class="line">    userMapper.updateById(user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>5ã€æŸ¥çœ‹æ•°æ®åº“ï¼š</p>
<p><img src="https://muyoukule-blog-pics.oss-cn-chengdu.aliyuncs.com/SSMIMG/MyBatisPlus/%E4%B9%90%E8%A7%82%E9%94%81%E4%BF%AE%E6%94%B9%E6%88%90%E5%8A%9F.png" alt="ä¹è§‚é”ä¿®æ”¹æˆåŠŸ"></p>
<p>æˆ‘ä»¬å†æ¥æµ‹è¯•ä¸€ä¸‹ä¿®æ”¹å¤±è´¥çš„æƒ…å†µï¼Œæ¨¡æ‹Ÿä¸€ç§åŠ é”çš„æƒ…å†µï¼Œçœ‹çœ‹èƒ½ä¸èƒ½å®ç°å¤šä¸ªäººä¿®æ”¹åŒä¸€ä¸ªæ•°æ®çš„æ—¶å€™ï¼Œåªèƒ½æœ‰ä¸€ä¸ªäººä¿®æ”¹æˆåŠŸã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testOptimisticLocker2</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// 1.å…ˆé€šè¿‡è¦ä¿®æ”¹çš„æ•°æ® id å°†å½“å‰æ•°æ®æŸ¥è¯¢å‡ºæ¥</span></span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userMapper.selectById(<span class="number">2L</span>);     <span class="comment">//version=2</span></span><br><span class="line">    <span class="type">User</span> <span class="variable">user2</span> <span class="operator">=</span> userMapper.selectById(<span class="number">2L</span>);    <span class="comment">//version=2</span></span><br><span class="line">    user2.setName(<span class="string">&quot;muyoukule222&quot;</span>);</span><br><span class="line">    userMapper.updateById(user2);              <span class="comment">//version=&gt;3</span></span><br><span class="line"></span><br><span class="line">    user.setName(<span class="string">&quot;muyoukule111&quot;</span>);</span><br><span class="line">    userMapper.updateById(user);               <span class="comment">//verion=2?æ¡ä»¶è¿˜æˆç«‹å—ï¼Ÿ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæ²¡æœ‰ä¹è§‚é”ï¼Œæœ€åä¸€æ¬¡çš„ä¿®æ”¹ä¼šè¦†ç›–å‰ä¸€æ¬¡çš„ä¿®æ”¹ï¼Œä½†æ˜¯æœ‰äº†ä¹è§‚é”å°±ä¸ä¼šå‡ºç°è¿™ç§æƒ…å†µäº†ã€‚æŸ¥çœ‹æ•°æ®åº“ä¿®æ”¹ç»“æœï¼š</p>
<p><img src="https://muyoukule-blog-pics.oss-cn-chengdu.aliyuncs.com/SSMIMG/MyBatisPlus/%E4%B9%90%E8%A7%82%E9%94%81%E4%BF%AE%E6%94%B9%E5%A4%B1%E8%B4%A5.png" alt="ä¹è§‚é”ä¿®æ”¹å¤±è´¥"></p>
<p>æŸ¥çœ‹æ•°æ®åº“åå‘ç° <code>muyoukule111</code> å¹¶æœªè¦†ç›– <code>muyoukule222</code> ã€‚</p>
<h1 id="12-åˆ†é¡µæ’ä»¶"><a href="#12-åˆ†é¡µæ’ä»¶" class="headerlink" title="12. åˆ†é¡µæ’ä»¶"></a>12. åˆ†é¡µæ’ä»¶</h1><p>åœ¨æœªå¼•å…¥åˆ†é¡µæ’ä»¶çš„æƒ…å†µä¸‹ï¼Œ<code>MP </code>æ˜¯ä¸æ”¯æŒåˆ†é¡µåŠŸèƒ½çš„ï¼Œ<code>IService</code> å’Œ <code>BaseMapper</code> ä¸­çš„åˆ†é¡µæ–¹æ³•éƒ½æ— æ³•æ­£å¸¸èµ·æ•ˆã€‚ æ‰€ä»¥ï¼Œæˆ‘ä»¬å¿…é¡»é…ç½®åˆ†é¡µæ’ä»¶ã€‚</p>
<p>1ã€é…ç½®åˆ†é¡µæ’ä»¶ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;com.muyoukule.mapper&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MybatisPlusConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ·»åŠ åˆ†é¡µæ’ä»¶</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> MybatisPlusInterceptor <span class="title function_">mybatisPlusInterceptor</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">MybatisPlusInterceptor</span> <span class="variable">interceptor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MybatisPlusInterceptor</span>();</span><br><span class="line">        interceptor.addInnerInterceptor(<span class="keyword">new</span> <span class="title class_">PaginationInnerInterceptor</span>(DbType.MYSQL));<span class="comment">//å¦‚æœé…ç½®å¤šä¸ªæ’ä»¶,åˆ‡è®°åˆ†é¡µæœ€åæ·»åŠ </span></span><br><span class="line">        <span class="comment">//interceptor.addInnerInterceptor(new PaginationInnerInterceptor()); å¦‚æœæœ‰å¤šæ•°æ®æºå¯ä»¥ä¸é…å…·ä½“ç±»å‹ å¦åˆ™éƒ½å»ºè®®é…ä¸Šå…·ä½“çš„DbType</span></span><br><span class="line">        <span class="keyword">return</span> interceptor;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2ã€ç¼–å†™ä¸€ä¸ªåˆ†é¡µæŸ¥è¯¢çš„æµ‹è¯•ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testPageQuery</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// 1.åˆ†é¡µæŸ¥è¯¢ï¼Œnew Page()çš„ä¸¤ä¸ªå‚æ•°åˆ†åˆ«æ˜¯ï¼šé¡µç ã€æ¯é¡µå¤§å°</span></span><br><span class="line">    Page&lt;User&gt; page = <span class="keyword">new</span> <span class="title class_">Page</span>&lt;&gt;(<span class="number">2</span>, <span class="number">2</span>);</span><br><span class="line">    userMapper.selectPage(page, <span class="literal">null</span>);</span><br><span class="line">    <span class="comment">// 2.æ€»æ¡æ•°</span></span><br><span class="line">    System.out.println(<span class="string">&quot;total = &quot;</span> + page.getTotal());</span><br><span class="line">    <span class="comment">// 3.æ€»é¡µæ•°</span></span><br><span class="line">    System.out.println(<span class="string">&quot;pages = &quot;</span> + page.getPages());</span><br><span class="line">    <span class="comment">// 4.æ•°æ®</span></span><br><span class="line">    List&lt;User&gt; records = page.getRecords();</span><br><span class="line">    records.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3ã€æ§åˆ¶å°è¾“å‡ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">total = 8</span><br><span class="line">pages = 4</span><br><span class="line">User(id=4, name=Sandy, age=19, email=test4@baomidou.com, deleted=false, status=NORMAL, info=null, createTime=null, updateTime=null, version=1)</span><br><span class="line">User(id=5, name=Billie, age=24, email=test5@baomidou.com, deleted=false, status=NORMAL, info=null, createTime=null, updateTime=null, version=1)</span><br></pre></td></tr></table></figure>

<p><strong>PSï¼šç”±äºå‰é¢æˆ‘ä»¬ä½¿ç”¨äº†é€»è¾‘åˆ é™¤ï¼Œ<code>deleted</code> å€¼ä¸º 1 çš„å­—æ®µä¸ä¼šè¢«æŸ¥è¯¢åˆ°ï¼Œæ‰€ä»¥æ•°æ®è¡¨ä¸€å…±æ˜¯ 8 æ¡è®°å½•ã€‚</strong></p>
<p>4ã€å¯¹æ¯”æ•°æ®åº“æ•°æ®ï¼š</p>
<p><img src="https://muyoukule-blog-pics.oss-cn-chengdu.aliyuncs.com/SSMIMG/MyBatisPlus/%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2%E6%95%B0%E6%8D%AE%E5%BA%93%E6%95%B0%E6%8D%AE%E5%AF%B9%E6%AF%94.png" alt="åˆ†é¡µæŸ¥è¯¢æ•°æ®åº“æ•°æ®å¯¹æ¯”"></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="https://zz.muyoukule.cn">æœ¨åˆæ¯äº†</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="https://zz.muyoukule.cn/posts/Mybatis-Plus/">https://zz.muyoukule.cn/posts/Mybatis-Plus/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="https://zz.muyoukule.cn" target="_blank">muyoukule</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/MyBatisPlus/">MyBatisPlus</a></div><div class="post_share"><div class="social-share" data-image="/img/avatar_muyoukule.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/SpringMVC-Chapter-One-Acquaintance-SpringMVC/" title="ã€ç¬¬1ç« ã€‘ åˆè¯†SpringMVC"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">ã€ç¬¬1ç« ã€‘ åˆè¯†SpringMVC</div></div></a></div><div class="next-post pull-right"><a href="/posts/RabbitMQ-Advanced/" title="RabbitMQé«˜çº§"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">RabbitMQé«˜çº§</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-MyBatis-Plus-%E6%A6%82%E8%BF%B0"><span class="toc-text">1. MyBatis-Plus æ¦‚è¿°</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%AD%A6%EF%BC%9F"><span class="toc-text">1.1 ä¸ºä»€ä¹ˆè¦å­¦ï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-%E7%AE%80%E4%BB%8B"><span class="toc-text">1.2 ç®€ä»‹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-%E7%89%B9%E6%80%A7"><span class="toc-text">1.3 ç‰¹æ€§</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B"><span class="toc-text">2. å¿«é€Ÿå¼€å§‹</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87"><span class="toc-text">2.1 ç¯å¢ƒå‡†å¤‡</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-%E6%A0%87%E5%87%86CRUD%E4%BD%BF%E7%94%A8"><span class="toc-text">2.2 æ ‡å‡†CRUDä½¿ç”¨</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-%E9%85%8D%E7%BD%AE%E6%97%A5%E5%BF%97"><span class="toc-text">3. é…ç½®æ—¥å¿—</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-%E5%B8%B8%E8%A7%81%E6%B3%A8%E8%A7%A3"><span class="toc-text">4. å¸¸è§æ³¨è§£</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-TableName"><span class="toc-text">4.1 @TableName</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2-TableId"><span class="toc-text">4.2 @TableId</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-1-%E4%B8%BB%E9%94%AE%E7%94%9F%E6%88%90%E7%AD%96%E7%95%A5"><span class="toc-text">4.2.1 ä¸»é”®ç”Ÿæˆç­–ç•¥</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-3-TableField"><span class="toc-text">4.3 @TableField</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-%E5%B8%B8%E8%A7%81%E9%85%8D%E7%BD%AE"><span class="toc-text">5. å¸¸è§é…ç½®</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6-%E6%9D%A1%E4%BB%B6%E6%9E%84%E9%80%A0%E5%99%A8"><span class="toc-text">6. æ¡ä»¶æ„é€ å™¨</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#6-1-QueryWrapper"><span class="toc-text">6.1 QueryWrapper</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-2-UpdateWrapper"><span class="toc-text">6.2 UpdateWrapper</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-3-LambdaQueryWrapper"><span class="toc-text">6.3 LambdaQueryWrapper</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-4-%E8%87%AA%E5%AE%9A%E4%B9%89SQL"><span class="toc-text">6.4 è‡ªå®šä¹‰SQL</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-1-%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95"><span class="toc-text">6.4.1 åŸºæœ¬ç”¨æ³•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-2-%E5%A4%9A%E8%A1%A8%E5%85%B3%E8%81%94"><span class="toc-text">6.4.2 å¤šè¡¨å…³è”</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#7-%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90"><span class="toc-text">7. ä»£ç ç”Ÿæˆ</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#8-%E9%80%BB%E8%BE%91%E5%88%A0%E9%99%A4"><span class="toc-text">8. é€»è¾‘åˆ é™¤</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#9-%E9%80%9A%E7%94%A8%E6%9E%9A%E4%B8%BE"><span class="toc-text">9. é€šç”¨æšä¸¾</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#9-1-%E5%A3%B0%E6%98%8E%E9%80%9A%E7%94%A8%E6%9E%9A%E4%B8%BE%E5%B1%9E%E6%80%A7"><span class="toc-text">9.1 å£°æ˜é€šç”¨æšä¸¾å±æ€§</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-2-%E9%85%8D%E7%BD%AE%E6%89%AB%E6%8F%8F%E9%80%9A%E7%94%A8%E6%9E%9A%E4%B8%BE"><span class="toc-text">9.2 é…ç½®æ‰«æé€šç”¨æšä¸¾</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#10-JSON%E7%B1%BB%E5%9E%8B%E5%A4%84%E7%90%86%E5%99%A8"><span class="toc-text">10. JSONç±»å‹å¤„ç†å™¨</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#11-%E8%87%AA%E5%8A%A8%E5%A1%AB%E5%85%85%E5%8A%9F%E8%83%BD"><span class="toc-text">11. è‡ªåŠ¨å¡«å……åŠŸèƒ½</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#12-%E4%B9%90%E8%A7%82%E9%94%81%E6%8F%92%E4%BB%B6"><span class="toc-text">12. ä¹è§‚é”æ’ä»¶</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#12-%E5%88%86%E9%A1%B5%E6%8F%92%E4%BB%B6"><span class="toc-text">12. åˆ†é¡µæ’ä»¶</span></a></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2024 By æœ¨åˆæ¯äº†</div><div class="footer_custom_text">Welcome to my <a href="#">blog</a>ï¼</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="ç®€ç¹è½¬æ¢">ç¹</button><button id="darkmode" type="button" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button><button id="go-down" type="button" title="ç›´è¾¾åº•éƒ¨" onclick="btf.scrollToDest(document.body.scrollHeight, 500)"><i class="fas fa-arrow-down"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="/js/tw_cn.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.2.0/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"></div><script defer src="https://npm.elemecdn.com/jquery@latest/dist/jquery.min.js"></script><script async src="https://cdn1.tianli0.top/npm/vue@2.6.14/dist/vue.min.js"></script><script async src="https://cdn1.tianli0.top/npm/element-ui@2.15.6/lib/index.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script><script defer src="/live2d-widget/autoload.js"></script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/click-show-text.min.js" data-mobile="true" data-text="mu,you,ku,le" data-fontsize="18px" data-random="true" async="async"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="algolia-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æœç´¢</span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="search-wrap"><div id="algolia-search-input"></div><hr/><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-info"><div class="algolia-stats"></div><div class="algolia-poweredBy"></div></div></div></div></div><div id="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/algoliasearch@4.22.1/dist/algoliasearch-lite.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@4.65.0/dist/instantsearch.production.min.js"></script><script src="/js/search/algolia.js?v=4.13.0"></script></div></div><!-- hexo injector body_end start --><div class="js-pjax"><script async="async">var arr = document.getElementsByClassName('recent-post-item');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '300ms');
    arr[i].setAttribute('data-wow-delay', '300ms');
    arr[i].setAttribute('data-wow-offset', '50');
    arr[i].setAttribute('data-wow-iteration', '1');
  }</script><script async="async">var arr = document.getElementsByClassName('card-widget');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '');
    arr[i].setAttribute('data-wow-delay', '');
    arr[i].setAttribute('data-wow-offset', '');
    arr[i].setAttribute('data-wow-iteration', '');
  }</script></div><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow.min.js"></script><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow_init.js"></script><!-- hexo injector body_end end --></body></html>